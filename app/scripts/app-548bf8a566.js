/**
 * @author v.lugovsky
 * created on 16.12.2015
 */
!function(){"use strict";function a(a,e){a.otherwise("/citas")}a.$inject=["$urlRouterProvider","baSidebarServiceProvider"],angular.module("BlurAdmin.pages",["ui.router","BlurAdmin.pages.routes","BlurAdmin.pages.auth","BlurAdmin.pages.dashboard","BlurAdmin.pages.notifications","BlurAdmin.pages.utils","BlurAdmin.pages.loader","BlurAdmin.pages.users","BlurAdmin.pages.profesiones","BlurAdmin.pages.pacientes","BlurAdmin.pages.citas","BlurAdmin.pages.casos","BlurAdmin.pages.consultas","BlurAdmin.pages.caja"]).config(a).config(["$provide",function(a){a.decorator("taOptions",["taRegisterTool","$delegate",function(a,e){return e.keyMappings=[],e.toolbar=[["bold","italics","underline"],["ul","ol"],["justifyLeft","justifyCenter","justifyRight"],["indent","outdent"]],e}])}])}(),function(){"use strict";angular.module("BlurAdmin.theme",["toastr","chart.js","angular-chartist","angular.morris-chart","textAngular","BlurAdmin.theme.components","BlurAdmin.theme.inputs"])}(),function(){"use strict";angular.module("BlurAdmin.pages.auth",[])}(),function(){"use strict";function a(a){}a.$inject=["$stateProvider"],angular.module("BlurAdmin.pages.dashboard",[]).config(a)}(),function(){"use strict";angular.module("BlurAdmin.pages.loader",[])}(),angular.module("BlurAdmin.pages.notifications",[]),function(){"use strict";angular.module("BlurAdmin.pages.routes",[])}(),function(){"use strict";angular.module("BlurAdmin.pages.utils",[])}(),function(){"use strict";angular.module("BlurAdmin.theme.components",[])}(),function(){"use strict";angular.module("BlurAdmin.theme.inputs",[])}(),function(){"use strict";angular.module("BlurAdmin.pages.auth",[])}(),function(){"use strict";angular.module("BlurAdmin.pages.caja",["ui.select","ngSanitize","ui.bootstrap","ngAnimate"])}(),function(){"use strict";angular.module("BlurAdmin.pages.casos",["ui.select","ngSanitize","ui.bootstrap","ngAnimate"])}(),function(){"use strict";angular.module("BlurAdmin.pages.citas",["ui.select","ngSanitize","ui.bootstrap","ngAnimate"])}(),function(){"use strict";angular.module("BlurAdmin.pages.consultas",["ui.select","ngSanitize","ui.bootstrap","ngAnimate"])}(),function(){"use strict";angular.module("BlurAdmin.pages.pacientes",["ui.select","ngSanitize"])}(),function(){"use strict";angular.module("BlurAdmin.pages.profesiones",["ui.select","ngSanitize"])}(),function(){"use strict";angular.module("BlurAdmin.pages.users",["ui.select","ngSanitize","ui.bootstrap","ngAnimate"])}(),angular.module("BlurAdmin",["ngAnimate","ngDialog","ui.bootstrap","ui.sortable","ui.router","ngTouch","toastr","smart-table","xeditable","ui.slimscroll","ngJsTree","angular-progress-button-styles","ngResource","ngFileUpload","ui.mask","mgo-angular-wizard","textAngular","BlurAdmin.theme","BlurAdmin.pages"]),function(){"use strict";function a(a,t,o){o.decorator("$uiViewScroll",e)}function e(a,e,t){return function(o){t.hasAttr(o,"autoscroll-body-top")?e():a(o)}}a.$inject=["baConfigProvider","colorHelper","$provide"],e.$inject=["$delegate","$anchorScroll","baUtil"],angular.module("BlurAdmin.theme").config(a)}(),function(){"use strict";function a(a){var n={theme:{blur:!1},colors:{default:e.default,defaultText:e.defaultText,border:e.border,borderDark:e.borderDark,primary:t.primary,info:t.info,success:t.success,warning:t.warning,danger:t.danger,primaryLight:a.tint(t.primary,30),infoLight:a.tint(t.info,30),successLight:a.tint(t.success,30),warningLight:a.tint(t.warning,30),dangerLight:a.tint(t.danger,30),primaryDark:a.shade(t.primary,15),infoDark:a.shade(t.info,15),successDark:a.shade(t.success,15),warningDark:a.shade(t.warning,15),dangerDark:a.shade(t.danger,15),dashboard:{blueStone:o.blueStone,surfieGreen:o.surfieGreen,silverTree:o.silverTree,gossip:o.gossip,white:o.white}}};return n.changeTheme=function(a){angular.merge(n.theme,a)},n.changeColors=function(a){angular.merge(n.colors,a)},n.$get=function(){return delete n.$get,n},n}a.$inject=["colorHelper"];var e={default:"#ffffff",defaultText:"#666666",border:"#dddddd",borderDark:"#aaaaaa"},t={primary:"#209e91",info:"#2dacd1",success:"#90b900",warning:"#dfb81c",danger:"#e85656"},o={blueStone:"#005562",surfieGreen:"#0e8174",silverTree:"#6eba8c",gossip:"#b9f2a1",white:"#10c4b5"};angular.module("BlurAdmin.theme").provider("baConfig",a)}(),function(){"use strict";function a(a,e,t){function o(a){return a.toString(16)}function n(a){return parseInt(a,16)}for(var i="#",s=1;s<7;s+=2){var r=n(a.substr(s,2)),l=n(e.substr(s,2)),c=o(Math.floor(l+(r-l)*(t/100)));i+=("0"+c).slice(-2)}return i}var e="assets/img/";angular.module("BlurAdmin.theme").constant("layoutSizes",{resWidthCollapseSidebar:1200,resWidthHideSidebar:500}).constant("layoutPaths",{images:{root:e,profile:e+"app/profile/",amMap:"assets/img/theme/vendor/ammap//dist/ammap/images/",amChart:"assets/img/theme/vendor/amcharts/dist/amcharts/images/"}}).constant("colorHelper",{tint:function(e,t){return a("#ffffff",e,t)},shade:function(e,t){return a("#000000",e,t)}})}(),function(){"use strict";function a(a,e,t,o,n,i,s){var r=[o.loadAmCharts(),a(3e3)],l=s;l.blur&&(l.mobile?r.unshift(o.loadImg(t.images.root+"blur-bg-mobile.jpg")):(r.unshift(o.loadImg(t.images.root+"blur-bg.jpg")),r.unshift(o.loadImg(t.images.root+"blur-bg-blurred.jpg")))),n.all(r).then(function(){e.$pageFinishedLoading=!0}),a(function(){e.$pageFinishedLoading||(e.$pageFinishedLoading=!0,e.$apply())},7e3),e.$baSidebarService=i}a.$inject=["$timeout","$rootScope","layoutPaths","preloader","$q","baSidebarService","themeLayoutSettings"],angular.module("BlurAdmin.theme").run(a)}(),function(){"use strict";function a(a){var e=/android|webos|iphone|ipad|ipod|blackberry|windows phone/.test(navigator.userAgent.toLowerCase()),t=e?"mobile":"",o=a.theme.blur?"blur-theme":"";return angular.element(document.body).addClass(t).addClass(o),{blur:a.theme.blur,mobile:e}}a.$inject=["baConfig"],angular.module("BlurAdmin.theme").service("themeLayoutSettings",a)}(),function(){"use strict";function a(a,e,t,o,n,i){function s(){}s()}a.$inject=["$scope","$rootScope","$location","$state","NotificationsService","TestService"],angular.module("BlurAdmin.pages.dashboard").controller("DashboardController",a)}(),function(){"use strict";function a(a){return{restrict:"EA",transclude:!0,templateUrl:"app/pages/loader/loader.html"}}a.$inject=["$rootScope"],angular.module("BlurAdmin.pages.loader").directive("miLoader",a)}(),function(){"use strict";function a(a,e){var t=[],o=(angular.copy(e),["success","error","info","warning"]),n="success",i="error",s="info",r="warning",l=function(o){angular.extend(e,o),t.push(a[o.type](o.msg,o.title))},c={autoDismiss:!1,positionClass:"toast-top-right",type:"info",timeOut:"5000",extendedTimeOut:"2000",allowHtml:!0,closeButton:!0,tapToDismiss:!0,progressBar:!0,newestOnTop:!1,maxOpened:0,preventDuplicates:!1,preventOpenDuplicates:!1,title:"",msg:""},d=function(a,e,t){return!(!a||!t)&&(c.title="<strong>"+a+"</strong>",c.msg=e,c.type=t,l(c))},p=function(a){return!!a&&l(a)};return{SUCCESS:n,ERROR:i,INFO:s,WARNING:r,types:o,default_toast:d,custom_toast:p}}a.$inject=["toastr","toastrConfig"],angular.module("BlurAdmin.pages.notifications").factory("NotificationsService",a)}(),function(){"use strict";function a(a,e,l){t=e,a.html5Mode(!1),o=l,l.state("login",{url:"/login",templateUrl:"app/pages/auth/login/login.html"}).state("citas",{url:"/citas",templateUrl:"app/pages/citas/templates/citas.html",title:"Citas",sidebarMeta:{icon:"fa fa-clock-o fa-lg",order:0},permissions:[n,i,s,r]}).state("pacientes",{url:"/pacientes",templateUrl:"app/pages/pacientes/templates/pacientes.html",title:"Pacientes",sidebarMeta:{icon:"ion-android-contacts f24",order:0},permissions:[n,i,s,r]}).state("pacientes_create",{url:"/pacientes/nuevo",templateUrl:"app/pages/pacientes/templates/pacientes.create.html",title:"Agregar paciente"}).state("pacientes_edit",{url:"/pacientes/editar/:id",templateUrl:"app/pages/pacientes/templates/pacientes.edit.html",title:"Editar paciente"}).state("cobros_paciente",{url:"/pacientes/cobros/:id",templateUrl:"app/pages/pacientes/templates/cobros.html",title:"Abonos y cobros del paciente",permissions:[n,r,i,s]}).state("casos",{url:"/casos",templateUrl:"app/pages/casos/templates/casos.html",title:"Casos",sidebarMeta:{icon:"fa fa-lg fa-file-text",order:0},permissions:[s]}).state("casos_notas",{url:"/casos/notas/:id",templateUrl:"app/pages/casos/templates/casos.notas.html",title:"Notas evolutivas",permissions:[s]}).state("casos_create",{url:"/casos/nuevo/:id",templateUrl:"app/pages/casos/templates/casos.create.html",title:"Nuevo caso",permissions:[s]}).state("casos_edit",{url:"/casos/editar/:id",templateUrl:"app/pages/casos/templates/casos.edit.html",title:"Información del caso",permissions:[s]}).state("consultas",{url:"/consultas",templateUrl:"app/pages/consultas/templates/consultas.html",title:"Consultas",sidebarMeta:{icon:"fa fa-lg fa-user-md",order:0},permissions:[i]}).state("consultas_create",{url:"/consultas/nuevo/:id",templateUrl:"app/pages/consultas/templates/consultas.create.html",title:"Nueva consulta",permissions:[i]}).state("consultas_edit",{url:"/consultas/editar/:id",templateUrl:"app/pages/consultas/templates/consultas.edit.html",title:"Información de la consulta",permissions:[i]}).state("reconsultas",{url:"/reconsultas/:id",templateUrl:"app/pages/consultas/templates/reconsultas.html",title:"Reconsultas",permissions:[i]}).state("reconsultas_create",{url:"/reconsultas/nuevo/:id",templateUrl:"app/pages/consultas/templates/reconsultas.create.html",title:"Nueva reconsulta",permissions:[i]}).state("reconsultas_edit",{url:"/reconsultas/editar/:id",templateUrl:"app/pages/consultas/templates/reconsultas.edit.html",title:"Información de la reconsulta",permissions:[i]}).state("archivos_consulta",{url:"/consultas/archivos/:id",templateUrl:"app/pages/consultas/templates/archivos.consulta.html",title:"Archivos adjuntos",permissions:[i]}).state("caja",{url:"/caja",templateUrl:"app/pages/caja/templates/caja.html",title:"Caja",sidebarMeta:{icon:"fa fa-archive fa-lg",order:0},permissions:[n,r]}).state("movimientos_caja",{url:"/caja/movimientos_caja/:id",templateUrl:"app/pages/caja/templates/movimientos_caja.html",title:"Movimientos de caja",permissions:[n,r]}).state("users",{url:"/users",templateUrl:"app/pages/users/templates/users.html",title:"Colaboradores",sidebarMeta:{icon:"fa fa-group fa-lg",order:0},permissions:[n]}).state("users_create",{url:"/users/new",templateUrl:"app/pages/users/templates/users.create.html",title:"Agregar colaborador",permissions:[n]}).state("users_edit",{url:"/users/edit/:id",templateUrl:"app/pages/users/templates/users.edit.html",title:"Editar colaborador",permissions:[n]}).state("users_profile",{url:"/users/profile/:id",templateUrl:"app/pages/users/templates/users.profile.html",title:"Editar perfil",permissions:[n,i,s,r]}).state("profesiones",{url:"/profesiones",templateUrl:"app/pages/profesiones/templates/profesiones.html",title:"Profesiones",access:"admin",sidebarMeta:{icon:"fa fa-university fa-lg",order:0},permissions:[n]})}function e(a,e,t,o,n,i){e.$on("$stateChangeStart",function(a,o){var s=i.localStorage.getItem("token");null!=s&&n.me().then(function(i){e.esPsicologo=!1,e.esMedico=!1,e.esSecretaria=!1,e.esAdmin=!1,n.hasPermission(i,n.PSICOLOGIA)&&(e.esPsicologo=!0),n.hasPermission(i,n.MEDICINA)&&(e.esMedico=!0),n.hasPermission(i,n.SECRETARIA)&&(e.esSecretaria=!0),n.hasPermission(i,n.ADMIN)&&(e.esAdmin=!0);var s=i,r=!1;o.permissions?_.forEach(o.permissions,function(a){if(_.indexOf(s.roles,a)!==-1)return r=!0,!1}):r=!0,r||(a.preventDefault(),t.go("login"))})})}a.$inject=["$locationProvider","$urlRouterProvider","$stateProvider"],e.$inject=["$q","$rootScope","$state","$http","AuthService","$window"];var t=null,o=null,n="100",i="40",s="30",r="20";angular.module("BlurAdmin.pages.routes",[]).config(a).run(e)}(),angular.module("ngLocale",[],["$provide",function(a){var e={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:6,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],STANDALONEMONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d/MM/y HH:mm:ss",mediumDate:"d/MM/y",mediumTime:"HH:mm:ss",short:"d/MM/yy HH:mm",shortDate:"d/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"Q",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"(¤",negSuf:")",posPre:"¤",posSuf:""}]},id:"es-gt",localeID:"es_GT",pluralCat:function(a,t){return 1==a?e.ONE:e.OTHER}})}]),function(){"use strict";function a(a){return{restrict:"A",link:function(e,t){a(function(){t[0].focus()})}}}a.$inject=["$timeout"],angular.module("BlurAdmin.pages.utils").directive("autofocus",a)}(),function(){"use strict";function a(){var a={},e=[{value:"100",name:"Administración"},{value:"40",name:"Medicina"},{value:"30",name:"Psicología"},{value:"20",name:"Secretaría"}],t=[{id:1,name:"Alta Verapaz"},{id:2,name:"Baja Verapaz"},{id:3,name:"Chimaltenango"},{id:4,name:"Chiquimula"},{id:5,name:"Petén"},{id:6,name:"El Progreso"},{id:7,name:"Quiché"},{id:8,name:"Escuintla"},{id:9,name:"Guatemala"},{id:10,name:"Huehuetenango"},{id:11,name:"Izabal"},{id:12,name:"Jalapa"},{id:13,name:"Jutiapa"},{id:14,name:"Quetzaltenango"},{id:15,name:"Retalhuleu"},{id:16,name:"Sacatepéquez"},{id:17,name:"San Marcos"},{id:18,name:"Santa Rosa"},{id:19,name:"Sololá"},{id:20,name:"Suchitepéquez"},{id:21,name:"Totonicapán"},{id:22,name:"Zacapa"}],o=["Católico","Evangélico","Testigo de Jehová","Mormón","Adventista"],n=[],i=[{id:0,value:"Enero"},{id:1,value:"Febrero"},{id:2,value:"Marzo"},{id:3,value:"Abril"},{id:4,value:"Mayo"},{id:5,value:"Junio"},{id:6,value:"Julio"},{id:7,value:"Agosto"},{id:8,value:"Septiembre"},{id:9,value:"Octubre"},{id:10,value:"Noviembre"},{id:11,value:"Diciembre"}],s=[],r=[{id:0,value:"---"},{id:1,value:"AB+"},{id:2,value:"AB-"},{id:3,value:"A+"},{id:4,value:"A-"},{id:5,value:"B+"},{id:6,value:"B-"},{id:7,value:"O+"},{id:8,value:"O-"}],l=[{id:0,value:"Sin Educación"},{id:1,value:"Educación Primaria"},{id:2,value:"Educación  Secundaria"},{id:3,value:"Educación Media Superior"},{id:4,value:"Educación Universitaria"},{id:5,value:"Maestría"},{id:6,value:"Doctorado"}],c=[{id:10,value:"APERTURADA"},{id:20,value:"CERRADA"}],d=[],p=[];return a.getEstadosCaja=function(){return c},a.getMinutes=function(a){p=[],a||(a=15);for(var e=0;e<60;)p.push({id:e,value:(e<10?"0":"")+e.toString()}),e+=a;return p},a.getHours=function(){d=[];for(var a=0;a<24;a++)d.push({id:a,value:(a<10?"0":"")+a.toString()});return d},a.getGrados=function(){return l},a.getBloodTypes=function(){return r},a.getYears=function(){var a=(new Date).getFullYear();n=[];for(var e=a-99;e<=a;e++)n.push({id:e,value:e});return n.reverse()},a.getMonths=function(){return i},a.getDays=function(){s=[];for(var a=1;a<=31;a++)s.push({id:a,value:a});return s},a.getReligiones=function(){return o},a.getRoles=function(){return e},a.getDepartamentos=function(){return t},a}angular.module("BlurAdmin.pages.utils").factory("UtilsService",a)}(),function(){"use strict";function a(a){angular.extend(a,{closeButton:!0,closeHtml:"<button>&times;</button>",timeOut:5e3,autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}a.$inject=["toastrConfig"],angular.module("BlurAdmin.theme.components").config(a)}(),function(){"use strict";function a(a){return{link:function(e,t){a(function(){function e(e){a(function(){t.html(e)},30)}var o=t.attr("new-value"),n=parseInt(t.html());if(o>n)for(var i=n;i<=o;i++)e(i);else for(var s=n;s>=o;s--)e(s);a(function(){t.next().find("i").addClass("show-arr")},500)},3500)}}}a.$inject=["$timeout"],angular.module("BlurAdmin.theme").directive("animatedChange",a)}(),function(){"use strict";function a(){return{restrict:"A",link:function(a,e){e.bind("keydown",function(a){var e=a.target;$(e).height(0);var t=$(e)[0].scrollHeight;t=t<16?16:t,$(e).height(t)}),setTimeout(function(){var a=e;$(a).height(0);var t=$(a)[0].scrollHeight;t=t<16?16:t,$(a).height(t)},0)}}}angular.module("BlurAdmin.theme").directive("autoExpand",a)}(),function(){"use strict";function a(a,e){return{link:function(t,o,n){var i=e(n.autoFocus);t.$watch(i,function(e){e===!0&&a(function(){o[0].focus(),o[0].select()})}),o.bind("blur",function(){t.$apply(i.assign(t,!1))})}}}a.$inject=["$timeout","$parse"],angular.module("BlurAdmin.theme").directive("autoFocus",a)}(),function(){"use strict";function a(){return{restrict:"AE",templateUrl:function(a,e){return e.includeWithScope}}}angular.module("BlurAdmin.theme").directive("includeWithScope",a)}(),function(){"use strict";function a(a){return{restrict:"EA",template:"<div></div>",replace:!0,scope:{min:"=",max:"=",type:"@",prefix:"@",maxPostfix:"@",prettify:"=",prettifySeparator:"@",grid:"=",gridMargin:"@",postfix:"@",step:"@",hideMinMax:"@",hideFromTo:"@",from:"=",to:"=",disable:"=",onChange:"=",onFinish:"=",values:"=",timeout:"@"},link:function(e,t){t.ionRangeSlider({min:e.min,max:e.max,type:e.type,prefix:e.prefix,maxPostfix:e.maxPostfix,prettify_enabled:e.prettify,prettify_separator:e.prettifySeparator,grid:e.grid,gridMargin:e.gridMargin,postfix:e.postfix,step:e.step,hideMinMax:e.hideMinMax,hideFromTo:e.hideFromTo,from:e.from,to:e.to,disable:e.disable,onChange:e.onChange,onFinish:e.onFinish,values:e.values}),e.$watch("min",function(e){a(function(){t.data("ionRangeSlider").update({min:e})})},!0),e.$watch("max",function(e){a(function(){t.data("ionRangeSlider").update({max:e})})}),e.$watch("from",function(e){a(function(){t.data("ionRangeSlider").update({from:e})})}),e.$watch("to",function(e){a(function(){t.data("ionRangeSlider").update({to:e})})}),e.$watch("disable",function(e){a(function(){t.data("ionRangeSlider").update({disable:e})})})}}}a.$inject=["$timeout"],angular.module("BlurAdmin.theme").directive("ionSlider",a)}(),function(){"use strict";function a(){return{link:function(a,e){e.bind("change",function(e){a.file=(e.srcElement||e.target).files[0],a.getFile()})}}}angular.module("BlurAdmin.theme").directive("ngFileSelect",a)}(),function(){"use strict";function a(){return{scope:{scrollPosition:"=",maxHeight:"="},link:function(a){$(window).on("scroll",function(){var e=$(window).scrollTop()>a.maxHeight;e!==a.prevScrollTop&&a.$apply(function(){a.scrollPosition=e}),a.prevScrollTop=e})}}}angular.module("BlurAdmin.theme").directive("scrollPosition",a)}(),function(){"use strict";function a(){return{scope:{trackWidth:"=",minWidth:"="},link:function(a,e){a.trackWidth=$(e).width()<a.minWidth,a.prevTrackWidth=a.trackWidth,$(window).resize(function(){var t=$(e).width()<a.minWidth;t!==a.prevTrackWidth&&a.$apply(function(){a.trackWidth=t}),a.prevTrackWidth=t})}}}angular.module("BlurAdmin.theme").directive("trackWidth",a)}(),function(){"use strict";function a(a,e){return{restrict:"A",link:function(t,o){var n=1e3;e.$pageFinishedLoading&&(n=100),a(function(){o.removeClass("full-invisible"),o.addClass("animated zoomIn")},n)}}}a.$inject=["$timeout","$rootScope"],angular.module("BlurAdmin.theme").directive("zoomIn",a)}(),function(){"use strict";function a(a){var e={},t=0,o=100,n=!1;return{setProgress:function(a){if(a>o)throw Error("Progress can't be greater than max");t=a},getProgress:function(){return t},open:function(){if(n)throw Error("Progress modal opened now");e=a.open({animation:!0,templateUrl:"app/pages/ui/modals/progressModal/progressModal.html",size:"sm",keyboard:!1,backdrop:"static"}),n=!0},close:function(){if(!n)throw Error("Progress modal is not active");e.close(),n=!1}}}a.$inject=["$uibModal"],angular.module("BlurAdmin.theme").factory("baProgressModal",a)}(),function(){"use strict";function a(){this.isDescendant=function(a,e){for(var t=e.parentNode;null!=t;){if(t==a)return!0;t=t.parentNode}return!1},this.hexToRGB=function(a,e){var t=parseInt(a.slice(1,3),16),o=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16);return"rgba("+t+", "+o+", "+n+", "+e+")"},this.hasAttr=function(a,e){var t=$(a).attr(e);return"undefined"!=typeof t&&t!==!1}}angular.module("BlurAdmin.theme").service("baUtil",a)}(),function(){"use strict";function a(a){var e=function(a,e,t){return function(){t.$apply(function(){e.resolve(a.result)})}},t=function(a,e,t){return function(){t.$apply(function(){e.reject(a.result)})}},o=function(a,e){return function(a){e.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},n=function(a,n){var i=new FileReader;return i.onload=e(i,a,n),i.onerror=t(i,a,n),i.onprogress=o(i,n),i},i=function(e,t){var o=a.defer(),i=n(o,t);return i.readAsDataURL(e),o.promise};return{readAsDataUrl:i}}a.$inject=["$q"],angular.module("BlurAdmin.theme").service("fileReader",a)}(),function(){"use strict";function a(a){return{loadImg:function(e){var t=a.defer(),o=new Image;return o.src=e,o.onload=function(){t.resolve()},t.promise},loadAmCharts:function(){var e=a.defer();return AmCharts.ready(function(){e.resolve()}),e.promise}}}a.$inject=["$q"],angular.module("BlurAdmin.theme").service("preloader",a)}(),function(){"use strict";function a(a){return{start:function(e,t,o){function n(){return e(t,o)}var i=n();angular.element(a).bind("focus",function(){i&&e.cancel(i),i=n()}),angular.element(a).bind("blur",function(){i&&e.cancel(i)})}}}a.$inject=["$window"],angular.module("BlurAdmin.theme").service("stopableInterval",a)}(),function(){"use strict";function a(a,e,t,o,n,i){function s(){c.account={},c.loading=!1,e.user=null,e.utils_template=o.current.templateUrl,e.utils_app=!0,t.localStorage.removeItem("token")}function r(){e.utils_template=null,e.utils_app=null}function l(a){var e="Error en la autenticación",t="Usuario y/o contraseña inválidos";return i.default_toast(e,t,i.ERROR),c.loading=!1,c.logout(),!1}var c=this;s(),c.logout=function(){t.localStorage.removeItem("token"),o.go("login")};var d=function(){if(!c.account.username||!c.account.password){var a="Campos vacíos o incorrectos",e="Por favor, llena los campos correctamente.";return i.default_toast(a,e,i.ERROR),!1}return!0};c.login=function(){return c.loading=!0,d()?n.login({username:c.account.username||"",password:c.account.password||""}).then(function(a){r(),t.localStorage.setItem("token",a.token);var e="Bienvenido/a";return i.default_toast(e,"",i.SUCCESS),n.me().then(function(a){return a.eliminado?l(null):o.go("citas")}).catch(l)}).catch(l):(c.loading=!1,c.logout(),!1)}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService"],angular.module("BlurAdmin.pages.auth").controller("LoginController",a)}(),function(){"use strict";function a(a,e,t,o,n,i){function s(){}s()}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService"],angular.module("BlurAdmin.pages.auth").controller("MeController",a)}(),function(){"use strict";function a(a,e,t,o){function n(){}var i=this;n(),i.logout=function(){swal({title:"¿Cerrar sesión?",text:"Estás a punto de cerrar sesión",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, cerrar sesión!",cancelButtonText:"No, aún no",closeOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null,t.localStorage.removeItem("token"),e.user=null,o.go("login")})}}a.$inject=["$scope","$rootScope","$window","$state"],angular.module("BlurAdmin.pages.auth").controller("LogoutController",a)}(),function(){"use strict";function a(a){a.interceptors.push("authInterceptor")}angular.module("BlurAdmin.pages.auth").config(a),a.$inject=["$httpProvider"]}(),function(){"use strict";function a(a,e,t){return{request:function(e){return e.headers=e.headers||{},t.localStorage.getItem("token")&&(e.headers.Authorization="Token "+t.localStorage.getItem("token")),e||a.when(e)},responseError:function(o){return 401!==o.status&&403!==o.status||(t.localStorage.removeItem("token"),e.path("/login")),a.reject(o)}}}angular.module("BlurAdmin.pages.auth").factory("authInterceptor",a),a.$inject=["$q","$location","$window"]}(),function(){"use strict";function a(a){var e=function(){return a.get("/api/perfiles/me/").then(function(a){return a.data})},t=function(e){return a.post("/api/login/",e).then(function(a){return a.data})},o="100",n="40",i="30",s="20",r=function(a,e){var t=_.indexOf(a.roles,e);return t!==-1};return{ADMIN:o,MEDICINA:n,PSICOLOGIA:i,SECRETARIA:s,hasPermission:r,me:e,login:t}}a.$inject=["$http"],angular.module("BlurAdmin.pages.auth").factory("AuthService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l){function c(){m.apertura_cierre_caja=r,m.ingresos_egresos=l,m.ESTADOS_CAJA=i.getEstadosCaja(),m.total_cierre_form=""}function d(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return null==m.total_cierre_form||void 0==m.total_cierre_form?(a="Sin total de cierre",e="Por favor, escribe el total del cierre de caja",t=!0):m.total_cierre_form==m.apertura_cierre_caja.total_actual||m.apertura_cierre_caja.notas||(a="Incoherencia encontrada",e="Escriba una observación en el apartado de notas para especificar porqué no coincide el efectivo en sistema y el efectivo real en caja.",t=!0),t&&swal(a,e,"error"),!t}function p(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function u(t){n.me().then(function(t){return e.user.caja_activa=t.caja_activa,e.user.id_apertura_caja=t.id_apertura_caja,swal("¡Éxito!","La caja se cerró exitosamente.","success"),a.confirm(t),o.go("caja")}).catch(function(a){})}var m=this;c(),m.save=function(){d()&&swal({title:"¿Cerrar caja?",text:"Se cerrará la caja actual.",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, cerrar caja!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a={id:m.apertura_cierre_caja.id,estado:m.ESTADOS_CAJA[1].id,total_cierre:m.total_cierre_form,fecha_cierre:new Date,notas:m.apertura_cierre_caja.notas};return s.update(a,u,p)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","UtilsService","AperturaCierreService","item","ingresos_egresos"],angular.module("BlurAdmin.pages.caja").controller("CerrarCajaController",a)}(),function(){"use strict";function a(a){var e="/api/aperturas_cierres_caja/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},ingresos_egresos:{url:e+"ingresos_egresos/",method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.caja").factory("AperturaCierreService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){u.loading=!1,u.array=[],u.pagination={max_size:10,total_items:0,current_page:1,search:""},u.caja={},u.ESTADOS_CAJA=l.getEstadosCaja(),u.query={estado:null},p()}function p(){u.loading=!0,r.list({page:1},function(a){u.caja=a.results[0],u.loading=!1,u.list()},function(a){})}var u=this;d(),u.page_changed=function(){return u.list()},u.search=function(){u.pagination.current_page=1,u.list()},u.list=function(){return u.loading=!0,c.list({page:u.pagination.current_page,search:u.pagination.search,estado:u.query.estado},function(a){u.pagination.total_items=a.count,u.array=a.results,u.loading=!1},function(a){})},u.aperturarCaja=function(){var a=0;return u.array.length&&(a=u.array[0].total_cierre),e.cierre_anterior=a,e.total_apertura_form=0,i.openConfirm({template:"app/pages/caja/templates/aperturar_caja.html",width:"50%",closeByDocument:!1,closeByEscape:!1,controller:["$scope","$rootScope","AperturaCierreService","AuthService","ngDialog",function(a,e,t,n,i){function s(){l.total_apertura_form=0}function r(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return null==l.total_apertura_form||void 0==l.total_apertura_form?(a="Sin total de apertura",e="Por favor, escribe el total de la apertura de caja",t=!0):l.total_apertura_form<0&&(a="Total de apertura negativo",e="No es posible aperturar la caja con una cantidad negativa.",t=!0),t&&swal(a,e,"error"),!t}var l=this;s(),l.save=function(){r()&&swal({title:"¿Aperturar caja?",text:"Será aperturada la caja con la cantidad monetaria de: Q"+l.total_apertura_form.toFixed(2),type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, aperturar caja!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var i={total_apertura:l.total_apertura_form,total_actual:l.total_apertura_form};return t.create(i,function(t){n.me().then(function(n){e.user.caja_activa=n.caja_activa,e.user.id_apertura_caja=n.id_apertura_caja,swal("¡Caja aperturada!","La caja fue aperturada exitosamente.","success"),a.confirm(),o.go("movimientos_caja",{id:t.id})}).catch(function(a){})},function(e){var t="Ocurrió un error al aperturar la caja. Por favor intenta más tarde.";e.data.detail&&(t=e.data.detail),swal("Error",t,"error"),a.confirm()})})}}],controllerAs:"ctrl"}).then(function(){})},u.reporteMovimientos=function(){return i.open({template:"app/pages/caja/templates/reporte.mov.dialog.html",width:"50%",closeByDocument:!1,closeByEscape:!1,controller:["$scope","$rootScope","AperturaCierreService","AuthService",function(a,e,t,o){function n(){s.reporte={},s.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd/MM/yyyy","shortDate"],s.format=s.formats[2],s.dateOptions={formatYear:"yy",startingDay:0}}function i(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return s.reporte.desde&&s.reporte.hasta?s.reporte.desde>s.reporte.hasta&&(t=!0,a="Fecha inicial incorrecta",e="La fecha inicial no debe ser mayor a la fecha final"):(t=!0,a="Fechas incorrectas",e="Verifica que has seleccionado correctamente las fechas"),t&&swal(a,e,"error"),!t}var s=this;n(),s.clear=function(){s.reporte.desde=null,s.reporte.hasta=null},s.openFechaDesde=function(a){a.preventDefault(),a.stopPropagation(),s.openedFechaDesde=!0},s.openFechaHasta=function(a){a.preventDefault(),a.stopPropagation(),s.openedFechaHasta=!0},s.today=function(){s.reporte.desde=new Date,s.reporte.hasta=new Date},s.today(),s.generate=function(){if(i()){var t=s.reporte.desde;t=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var o=s.reporte.hasta;o=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),window.open("/api/aperturas_cierres_caja/reporte_movimientos/?fecha_inicial="+t+"&fecha_final="+o+"&usuario="+e.user.id,"_blank"),a.closeThisDialog(0)}}}],controllerAs:"ctrl"})},u.detallesCierreCaja=function(a){return a.loadingIngEng=!0,c.ingresos_egresos({id:a.id},function(t){return a.loadingIngEng=!1,e.ingresos_egresos_info=t,e.apertura_cierre_caja_info=a,i.open({template:"app/pages/caja/templates/cerrar_caja.dialog.html",width:"50%",closeByDocument:!0,closeByEscape:!0})},function(a){swal("¡Error!","Ocurrió un error. Por favor intenta más tarde.","error")})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","AuthService","CajaService","UtilsService","AperturaCierreService"],angular.module("BlurAdmin.pages.caja").controller("CajaController",a)}(),function(){"use strict";function a(a){var e="/api/caja/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.caja").factory("CajaService",a);
}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){m.loading=!1,m.loadingIngEng=!1,m.array=[],m.ingresos_egresos={},m.pagination={max_size:10,total_items:0,current_page:1,search:""},m.apertura_cierre_caja={},m.ESTADOS_CAJA=l.getEstadosCaja(),u()}function u(){return o.params.id?(m.loading=!0,void c.get({id:o.params.id},function(a){m.apertura_cierre_caja=a,m.loading=!1,m.list()},function(a){})):o.go("caja")}var m=this;p(),m.page_changed=function(){return m.list()},m.search=function(){m.pagination.current_page=1,m.list()},m.list=function(){return m.loading=!0,d.list({apertura_cierre_caja:o.params.id,page:m.pagination.current_page,search:m.pagination.search},function(a){m.pagination.total_items=a.count,_.forEach(a.results,function(a){10==a.tipo?a.tipo_nombre="INGRESO":20==a.tipo&&(a.tipo_nombre="EGRESO")}),m.array=a.results,m.loading=!1},function(a){})},m.registrarMovimiento=function(){return i.openConfirm({template:"app/pages/caja/templates/movimientos_caja.create.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"MovimientosCajaCreateController",controllerAs:"ctrl",resolve:{item:function(){return m.apertura_cierre_caja}},closeByDocument:!1,closeByEscape:!1}).then(function(a){u()}).catch(function(a){})},m.cerrarCaja=function(){return m.loadingIngEng=!0,c.ingresos_egresos({id:m.apertura_cierre_caja.id},function(a){return m.ingresos_egresos=a,i.openConfirm({template:"app/pages/caja/templates/cerrar_caja.html",width:"50%",controller:"CerrarCajaController",controllerAs:"ctrl",resolve:{item:function(){return m.apertura_cierre_caja},ingresos_egresos:function(){return m.ingresos_egresos}},closeByDocument:!1,closeByEscape:!1}).then(function(a){m.loadingIngEng=!1}).catch(function(a){m.loadingIngEng=!1})},function(a){swal("¡Error!","Ocurrió un error. Por favor intenta más tarde.","error")})},m.detallesMovimiento=function(a){return e.movimiento_caja=a,i.open({template:"app/pages/caja/templates/movimientos_caja.dialog.html",className:"ngdialog-theme-default ngdialog-theme-custom",closeByDocument:!0,closeByEscape:!0})},m.detallesCierreCaja=function(){return m.loadingIngEng=!0,c.ingresos_egresos({id:m.apertura_cierre_caja.id},function(a){return m.loadingIngEng=!1,e.ingresos_egresos_info=a,e.apertura_cierre_caja_info=m.apertura_cierre_caja,i.open({template:"app/pages/caja/templates/cerrar_caja.dialog.html",width:"50%",closeByDocument:!0,closeByEscape:!0})},function(a){swal("¡Error!","Ocurrió un error. Por favor intenta más tarde.","error")})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","AuthService","CajaService","UtilsService","AperturaCierreService","MovimientosCajaService"],angular.module("BlurAdmin.pages.caja").controller("MovimientosCajaController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l){function c(){m.movimiento_caja={apertura_cierre_caja:null,cantidad:0,tipo:10,tipo_documento:null,num_documento:null,concepto:"Abono de Paciente: "+l.persona.persona||""},m.activar_cantidad=!0,m.activar_egreso=!1}function d(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return m.movimiento_caja.cantidad?m.movimiento_caja.tipo?m.movimiento_caja.concepto||(a="Sin concepto",e="Por favor, escribe el concepto del movimiento",t=!0):(a="Sin tipo",e="Por favor, selecciona el tipo de movimiento",t=!0):(a="Sin cantidad",e="Por favor, escribe la cantidad del movimiento",t=!0),t&&swal(a,e,"error"),!t}function p(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function u(t){var o={colaborador:e.user.id,paciente:l.id,monto:m.movimiento_caja.cantidad,tipo:20,pagado:!0,motivo:m.movimiento_caja.concepto};r.create(o,function(e){swal("¡Éxito!","El movimiento fue registrado exitosamente. Puede revisar la caja para corroborar el registro del mismo.","success"),a.confirm(e)},p)}var m=this;c(),m.changeType=function(){m.movimiento_caja.tipo_documento=null,m.movimiento_caja.num_documento=null},m.save=function(){d()&&swal({title:"¿Registrar movimiento?",text:"Será registrado un movimiento de caja.",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,m.movimiento_caja.apertura_cierre_caja=e.user.id_apertura_caja||null,s.create(m.movimiento_caja,u,p)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","MovimientosCajaService","CobrosPacienteService","paciente"],angular.module("BlurAdmin.pages.caja").controller("MovimientosCajaCreateAbonoPacienteController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l){function c(){m.movimiento_caja={apertura_cierre_caja:null,cantidad:l.monto,tipo:10,tipo_documento:null,num_documento:null,concepto:l.motivo+" -- Paciente: "+l.paciente.persona.persona||""},m.activar_cantidad=!1,m.activar_egreso=!1}function d(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return m.movimiento_caja.cantidad?m.movimiento_caja.tipo?m.movimiento_caja.concepto||(a="Sin concepto",e="Por favor, escribe el concepto del movimiento",t=!0):(a="Sin tipo",e="Por favor, selecciona el tipo de movimiento",t=!0):(a="Sin cantidad",e="Por favor, escribe la cantidad del movimiento",t=!0),t&&swal(a,e,"error"),!t}function p(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function u(t){var o={id:l.id,colaborador:e.user.id,paciente:l.paciente.id,monto:l.monto,pagado:!0};r.update(o,function(e){swal("¡Éxito!","El movimiento fue registrado exitosamente. Puede revisar la caja para corroborar el registro del mismo.","success"),a.confirm(e)},p)}var m=this;c(),m.changeType=function(){m.movimiento_caja.tipo_documento=null,m.movimiento_caja.num_documento=null},m.save=function(){d()&&swal({title:"¿Registrar movimiento?",text:"Será registrado un movimiento de caja.",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,m.movimiento_caja.apertura_cierre_caja=e.user.id_apertura_caja||null,s.create(m.movimiento_caja,u,p)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","MovimientosCajaService","CobrosPacienteService","item"],angular.module("BlurAdmin.pages.caja").controller("MovimientosCajaCreateCobroPacienteController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){u.movimiento_caja={apertura_cierre_caja:r.id,cantidad:null,tipo:null,tipo_documento:null,num_documento:null,concepto:""},u.activar_cantidad=!0,u.activar_egreso=!0}function c(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return u.movimiento_caja.cantidad?u.movimiento_caja.tipo?u.movimiento_caja.concepto||(a="Sin concepto",e="Por favor, escribe el concepto del movimiento",t=!0):(a="Sin tipo",e="Por favor, selecciona el tipo de movimiento",t=!0):(a="Sin cantidad",e="Por favor, escribe la cantidad del movimiento",t=!0),t&&swal(a,e,"error"),!t}function d(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function p(e){swal("¡Éxito!","El movimiento fue registrado exitosamente.","success"),a.confirm(e)}var u=this;l(),u.changeType=function(){u.movimiento_caja.tipo_documento=null,u.movimiento_caja.num_documento=null},u.save=function(){c()&&swal({title:"¿Registrar movimiento?",text:"Será registrado un movimiento de caja.",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.create(u.movimiento_caja,p,d)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","MovimientosCajaService","item"],angular.module("BlurAdmin.pages.caja").controller("MovimientosCajaCreateController",a)}(),function(){"use strict";function a(a){var e="/api/movimientos_caja/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.caja").factory("MovimientosCajaService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){u.loading=!1,u.caso=c,u.sesiones=0,u.caso.paciente.fecha_nacimiento&&(u.edad=moment().diff(moment(u.caso.paciente.fecha_nacimiento),"years")),u.fecha=new Date,p()}function p(){l.list({caso:u.caso.id},function(a){u.sesiones=a.count},function(a){})}var u=this;d(),u.save=function(){swal({title:"¿Cerrar el caso?",text:"Se cerrará el caso",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, cerrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a={id:u.caso.id,paciente:u.caso.paciente.id,colaborador:u.caso.colaborador.id,cerrado:!0,diagnostico:u.caso.diagnostico||"---",plan_terapeutico:u.caso.plan_terapeutico||"---",instrumentos:u.caso.instrumentos||"---",resultados:u.caso.resultados||"---",pronostico:u.caso.pronostico||"---",observaciones:u.caso.observaciones||"---",fecha_cierre:new Date};s.update(a,function(a){u.caso.cerrado=a.cerrado,u.caso.fecha_cierre=a.fecha_cierre,swal("¡Éxito!","El caso ha sido cerrado exitosamente.","success")},function(a){swal("¡Error!","Ocurrió un error al guardar. Por favor intenta más tarde.","error")})})},u.abrirCaso=function(){swal({title:"¿Abrir el caso?",text:"Se volverá a aperturar el caso",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, abrir!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a={id:u.caso.id,paciente:u.caso.paciente.id,colaborador:u.caso.colaborador.id,cerrado:!1};s.update(a,function(a){u.caso.cerrado=a.cerrado,u.fecha=new Date,swal("¡Éxito!","El caso ha sido abierto exitosamente.","success")},function(a){swal("¡Error!","Ocurrió un error al guardar. Por favor intenta más tarde.","error")})})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService","CasoNotasService","item"],angular.module("BlurAdmin.pages.casos").controller("CasoNotasCerrarController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){p.loading=!1,p.array=[],p.pagination={max_size:10,total_items:0,current_page:1,search:""},p.query={cerrado:null}}function c(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),p.loading=!1,swal("¡Error!",e,"error")}function d(a){return swal("¡Éxito al eliminar!","Caso eliminado exitosamente","success"),p.list()}var p=this;l(),p.page_changed=function(){return p.list()},p.search=function(){p.pagination.current_page=1,p.list()},p.list=function(){return p.loading=!0,s.list({page:p.pagination.current_page,search:p.pagination.search,cerrado:p.query.cerrado},function(a){p.pagination.total_items=a.count,p.array=a.results,p.loading=!1},function(a){})},p.list(),p.viewImg=function(a){return e.actual_user_foto=a,i.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},p.goToUrl=function(a){window.open(a.toString(),"_blank")},p.delete=function(a){swal({title:"¿Eliminar el caso?",text:"Se eliminará el caso",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.delete({id:a.id},d,c)})},p.status=function(a,e){return i.openConfirm({template:"app/pages/casos/templates/casos.cerrar.html",width:"80%",controller:"CasoNotasCerrarController",controllerAs:"ctrl",closeByDocument:!0,closeByEscape:!0,resolve:{item:function(){return a}}}).then(function(a){return p.list()}).catch(function(a){return p.list()})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService"],angular.module("BlurAdmin.pages.casos").controller("CasoController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p){function u(){x.loading=!1,x.departamentos=i.getDepartamentos(),x.religiones=i.getReligiones(),x.foto=null,x.genograma=null,x.panelPacienteOculto=!0,x.panelMotivoOculto=!1,x.panelHistoriaActualOculto=!0,x.panelHistoriaClinicaOculto=!0,x.panelHistoriaFamiliarOculto=!0,x.panelExamenMentalOculto=!0,x.panelFuentesSecundariasOculto=!0,x.panelDiscernimientoDiagnosticoOculto=!0,x.panelObjetivoTerapeuticoOculto=!0,x.panelEvaluacionPronosticaOculto=!0,x.panelPlanTerapeuticoOculto=!0,x.panelGenogramaOculto=!0,x.caso={motivo:"",notas:{historia_actual:{fecha_inicio_duracion_evento:"",factores_precipitantes:"",impacto_enfermedad:""},examen_mental:{apariencia:"",actitud:"",conducta:"",lenguaje:"",curso_contenido_pensamiento:"",percepcion:"",humor:"",afecto:"",inteligencia:"",orientacion:"",memoria:"",control_impulsos:"",capacidad_juicio_critico:"",capacidad_insight:"",confiabilidad:""},fuentes_secundarias:{informes_medicos:"",test_psicometricos_informe_resultados:"",test_proyectivos_interpretacion_resultados:""},discernimiento_diag:{criterios_diagnostico:"",diagnostico_semiologico:"",diagnostico_psicodinamico:""},objetivo_terapeutico:{corto_plazo:"",mediano_plazo:"",largo_plazo:""}}},x.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{notas:{antecedentes:{medicos:"",quirurgicos:"",traumaticos:"",alergicos:"",vicios:"",pediatricos:"",familiares:"",ginecologicos:{fur:"",gestas:"",partos:"",abortos:"",pf:""}}}},notas_psicologicas:{historia_clinica:{historia_prenatal:"",desarrollo_psicomotriz:"",desenvolvimiento_escolar:"",adolescencia:"",historia_psico_sexual:"",vida_social:"",historia_medica:"",trastornos_familiares:"",otros:""},historia_familiar:""}},x.grados=i.getGrados(),x.paciente.nivel_academico=x.grados[3],x.tiposDeSangre=i.getBloodTypes(),x.paciente.tipo_de_sangre=x.tiposDeSangre[0],x.anios=i.getYears(),x.meses=i.getMonths(),x.dias=i.getDays(),x.nacimiento={dias:x.dias[0],meses:x.meses[0],anios:x.anios[0]},m()}function m(){l.params.id?(x.loading=!0,o.get({id:l.params.id},function(a){setTimeout(function(){$("#motivo").focus()},50),a.nivel_academico=_.find(x.grados,{value:a.nivel_academico}),a.tipo_de_sangre=_.find(x.tiposDeSangre,{value:a.tipo_de_sangre});var e=new Date(a.fecha_nacimiento);e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),x.nacimiento.anios=_.find(x.anios,{id:e.getFullYear()}),x.nacimiento.meses=_.find(x.meses,{id:e.getMonth()}),x.nacimiento.dias=_.find(x.dias,{id:e.getDate()}),a.tipos=[],a.notas_psicologicas=JSON.parse(a.notas_psicologicas),a.notas_medicas=JSON.parse(a.notas_medicas),x.paciente=a,x.loading=!1},function(a){return l.go("pacientes")})):(x.panelPacienteOculto=!1,x.panelMotivoOculto=!0,setTimeout(function(){$("#persona").focus(),$(document).ready(function(){$(this).scrollTop(0)})},50))}function g(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function f(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return x.paciente.persona.persona?x.caso.motivo||(a="Motivo de la consulta",e="No fue asignado un motivo a la consulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function v(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function b(a){x.caso.paciente=x.paciente.id,x.caso.colaborador=e.user.id,x.caso.notas=JSON.stringify(x.caso.notas),d.create(x.caso,function(a){c.upload({url:"/api/casos/genograma/",method:"POST",data:{id:a.id,genograma:x.genograma}}).then(function(e){return swal("¡Éxito!","El caso fue registrado exitosamente.","success"),l.go("casos_notas",{id:a.id})}).catch(function(e){return swal("¡Éxito!","El caso fue registrado exitosamente.","success"),l.go("casos_notas",{id:a.id})})},function(a){return swal("¡Error!","El caso no pudo ser registrado. Por favor, intenta más tarde.","error"),l.go("pacientes")})}function h(a){x.paciente.id=a.id;var e={id:x.paciente.id,foto:x.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return b(a)}).catch(function(a){return b(a)})}var x=this;u(),x.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",w),angular.element(document.querySelector("#genogramInput")).on("change",y)},1e3)},x.listenUploaders(),x.showPanel=function(a){return x.listenUploaders(),!a},x.getDepartamentos=function(a){var e=_.filter(x.departamentos,function(e){var t=g(a).toLowerCase(),o=g(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},x.getReligiones=function(a){var e=_.filter(x.religiones,function(e){var t=g(a).toLowerCase(),o=g(e).toLowerCase();return o.indexOf(t)!==-1});return e},x.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=x.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var w=function(e){x.foto=e.currentTarget.files[0],x.paciente.persona.foto=e.currentTarget.files[0],a.$apply()},y=function(e){x.genograma=e.currentTarget.files[0],a.$apply()};x.save=function(){f()&&swal({title:"¿Registrar caso?",text:"Será registrado un nuevo caso para el paciente: "+x.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(x.paciente),e=new Date(x.nacimiento.anios.id,x.nacimiento.meses.id,x.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_psicologicas=JSON.stringify(a.notas_psicologicas),a.notas_medicas=JSON.stringify(a.notas_medicas),delete a.persona.foto,a.id?o.update(a,h,v):o.create(a,h,v)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","CasoService","ngDialog"],angular.module("BlurAdmin.pages.casos").controller("CasoCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p){function u(){x.loading=!1,x.disabled=!1,x.departamentos=i.getDepartamentos(),x.religiones=i.getReligiones(),x.foto=null,x.genograma=null,x.panelPacienteOculto=!0,x.panelMotivoOculto=!1,x.panelHistoriaActualOculto=!0,x.panelHistoriaClinicaOculto=!0,x.panelHistoriaFamiliarOculto=!0,x.panelExamenMentalOculto=!0,x.panelFuentesSecundariasOculto=!0,x.panelDiscernimientoDiagnosticoOculto=!0,x.panelObjetivoTerapeuticoOculto=!0,x.panelEvaluacionPronosticaOculto=!0,x.panelPlanTerapeuticoOculto=!0,x.panelGenogramaOculto=!0,setTimeout(function(){$("#motivo").focus()},250),x.caso={motivo:"",notas:{}},x.colaborador={},x.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_psicologicas:{}},x.grados=i.getGrados(),x.paciente.nivel_academico=x.grados[3],x.tiposDeSangre=i.getBloodTypes(),x.paciente.tipo_de_sangre=x.tiposDeSangre[0],x.anios=i.getYears(),x.meses=i.getMonths(),x.dias=i.getDays(),x.nacimiento={dias:x.dias[0],meses:x.meses[0],anios:x.anios[0]},m()}function m(){return x.loading=!0,l.params.id?void d.get({id:l.params.id},function(a){a.cerrado&&(x.disabled=!0),x.genograma=a.genograma,a.paciente.nivel_academico=_.find(x.grados,{value:a.nivel_academico}),a.paciente.tipo_de_sangre=_.find(x.tiposDeSangre,{value:a.tipo_de_sangre}),a.paciente.nivel_academico||(a.paciente.nivel_academico=x.grados[0]),a.paciente.tipo_de_sangre||(a.paciente.tipo_de_sangre=x.tiposDeSangre[0]);var e=new Date(a.paciente.fecha_nacimiento);e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),x.nacimiento.anios=_.find(x.anios,{id:e.getFullYear()}),x.nacimiento.meses=_.find(x.meses,{id:e.getMonth()}),x.nacimiento.dias=_.find(x.dias,{id:e.getDate()}),a.paciente.tipos=[],a.paciente.notas_psicologicas=JSON.parse(a.paciente.notas_psicologicas||"{}"),x.paciente=a.paciente,x.colaborador=a.colaborador,a.notas=JSON.parse(a.notas),x.caso=a,x.loading=!1},function(a){return l.go("casos")}):l.go("casos")}function g(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function f(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return x.paciente.persona.persona?x.caso.motivo||(a="Motivo de la consulta",e="No fue asignado un motivo a la consulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function v(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function b(a){x.caso.paciente=x.paciente.id,x.caso.colaborador=x.colaborador.id,x.caso.notas=JSON.stringify(x.caso.notas),x.caso.genograma?delete x.caso.genograma:x.caso.genograma=null,d.update(x.caso,function(a){c.upload({url:"/api/casos/genograma/",method:"POST",data:{id:a.id,genograma:x.genograma}}).then(function(e){return swal("¡Éxito!","El caso fue editado exitosamente.","success"),l.go("casos_notas",{id:a.id})}).catch(function(e){return swal("¡Éxito!","El caso fue editado exitosamente.","success"),l.go("casos_notas",{id:a.id})})},function(a){return swal("¡Error!","El caso no pudo ser editado. Por favor, intenta más tarde.","error"),l.go("casos")})}function h(a){var e={id:x.paciente.id,foto:x.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return b(a)}).catch(function(a){return b(a)})}var x=this;u(),x.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",w),angular.element(document.querySelector("#genogramInput")).on("change",y)},1e3)},x.listenUploaders(),x.showPanel=function(a){return x.listenUploaders(),!a},x.getDepartamentos=function(a){var e=_.filter(x.departamentos,function(e){var t=g(a).toLowerCase(),o=g(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},x.getReligiones=function(a){var e=_.filter(x.religiones,function(e){var t=g(a).toLowerCase(),o=g(e).toLowerCase();return o.indexOf(t)!==-1});return e},x.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=x.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var w=function(e){x.foto=e.currentTarget.files[0],x.paciente.persona.foto=e.currentTarget.files[0],a.$apply()},y=function(e){x.genograma=e.currentTarget.files[0],a.$apply()};setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",w)},1e3),x.save=function(){f()&&swal({title:"¿Editar caso?",text:"Será editado el caso del paciente: "+x.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(x.paciente),e=new Date(x.nacimiento.anios.id,x.nacimiento.meses.id,x.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,delete a.persona.foto,a.notas_psicologicas=JSON.stringify(a.notas_psicologicas),o.update(a,h,v)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","CasoService","ngDialog"],angular.module("BlurAdmin.pages.casos").controller("CasoEditController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l){function c(){m.loading=!1,m.loading_item=!1,m.array=[],m.pagination={max_size:10,total_items:0,current_page:1,search:""},m.query={cerrado:!1},o.params.id||o.go("casos"),d()}function d(){m.loading_item=!0,s.get({id:o.params.id},function(a){m.caso=a,m.loading_item=!1},function(a){return m.loading_item=!1,o.go("casos")})}function p(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),m.loading=!1,swal("¡Error!",e,"error")}function u(a){return swal("¡Éxito al eliminar!","Nota eliminada exitosamente","success"),m.list()}var m=this;c(),m.gotoCaso=function(){o.go("casos_edit",{id:o.params.id})},m.page_changed=function(){return m.list()},m.search=function(){m.pagination.current_page=1,m.list()},m.list=function(){return m.loading=!0,l.list({page:m.pagination.current_page,search:m.pagination.search,caso:o.params.id},function(a){m.pagination.total_items=a.count,m.array=a.results,m.loading=!1},function(a){})},m.list(),m.viewImg=function(a){return e.actual_user_foto=a,i.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},m.delete=function(a){swal({title:"¿Eliminar la nota?",text:"Se eliminará la nota",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,l.delete({id:a.id},u,p)})},m.edit=function(a){return i.openConfirm({template:"app/pages/casos/templates/casos.notas.dialog.edit.html",width:"80%",controller:"CasoNotasEditController",controllerAs:"ctrl",closeByDocument:!0,closeByEscape:!0,resolve:{item:function(){return a}}}).then(function(a){return m.list()}).catch(function(a){})},m.create=function(){return i.openConfirm({template:"app/pages/casos/templates/casos.notas.dialog.html",width:"80%",controller:"CasoNotasCreateController",controllerAs:"ctrl",closeByDocument:!0,closeByEscape:!0,resolve:{item:function(){return m.caso}}}).then(function(a){return m.list()}).catch(function(a){})},m.details=function(a){return i.open({template:"app/pages/casos/templates/casos.notas.dialog.dt.html",width:"80%",controller:"CasoNotasDetailsController",controllerAs:"ctrl",closeByDocument:!0,closeByEscape:!0,resolve:{item:function(){return a}}})},m.createCita=function(){if(e.user)return i.openConfirm({template:"app/pages/citas/templates/citas.dialog.grid.pacientes.users.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return e.user},paciente:function(){return m.caso.paciente}}}).then(function(a){}).catch(function(a){})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService","CasoNotasService"],angular.module("BlurAdmin.pages.casos").controller("CasoNotasController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){u.loading=!1,u.caso=c,u.nota={num_sesion:1,caso:u.caso.id,avance_terapeutico:"",comentario_paciente:"",eventos_relevantes:"",evolucion_fisica:"",evolucion_psicologica:"",notas:"",observaciones:"",tarea_anterior:"",tarea_proxima:"",vario:""},u.fecha=new Date,p()}function p(){u.loading=!0,l.previo({caso:u.caso.id},function(a){a.num_sesion&&(u.nota.num_sesion=+a.num_sesion+1),u.nota.tarea_anterior=a.tarea_proxima||"",u.loading=!1},function(a){u.loading=!1})}var u=this;d(),u.save=function(){swal({title:"¿Nueva nota evolutiva?",text:"Se guardará una nueva nota evolutiva",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, guardar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null,l.create(u.nota,function(e){return swal("¡Éxito!","La nota evolutiva fue creada exitosamente","success"),a.confirm(e)},function(a){swal("¡Error!","Ocurrió un error al guardar. Por favor intenta más tarde.","error")})})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService","CasoNotasService","item"],angular.module("BlurAdmin.pages.casos").controller("CasoNotasCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){p.nota=c}var p=this;d()}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService","CasoNotasService","item"],angular.module("BlurAdmin.pages.casos").controller("CasoNotasDetailsController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){p.loading=!1,p.nota=_.clone(c),p.caso=_.clone(c.caso),p.nota.caso=_.clone(c.caso.id),p.fecha=p.nota.fecha_creacion}var p=this;d(),p.save=function(){swal({title:"¿Editar nota evolutiva?",text:"Se editará una nota evolutiva",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null,l.update(p.nota,function(e){return swal("¡Éxito!","La nota evolutiva fue editada exitosamente","success"),a.confirm(e)},function(a){swal("¡Error!","Ocurrió un error al guardar. Por favor intenta más tarde.","error")})})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CasoService","AuthService","CasoNotasService","item"],angular.module("BlurAdmin.pages.casos").controller("CasoNotasEditController",a)}(),function(){"use strict";function a(a){var e="/api/notas_evolutivas/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},previo:{url:e+"previo/",method:"GET"},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.casos").factory("CasoNotasService",a)}(),function(){"use strict";function a(a){var e="/api/casos/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},status:{method:"POST",url:e+"status/"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.casos").factory("CasoService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){p.loading=!1,p.array=[],p.pagination={max_size:10,total_items:0,current_page:1,search:""},p.query={anulada:!1
},p.consultar=!1,p.esMedico=!1,r.me().then(function(a){var e=a,t=r.hasPermission(e,r.PSICOLOGIA);t&&(p.consultar=!0);var o=r.hasPermission(e,r.MEDICINA);o&&(p.esMedico=!0)}).catch(function(a){})}function c(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),p.loading=!1,swal("¡Error!",e,"error")}function d(a){return swal("¡Éxito al anular!","Cita anulada exitosamente","success"),p.list()}var p=this;l(),p.page_changed=function(){return p.list()},p.search=function(){p.pagination.current_page=1,p.list()},p.list=function(){return p.loading=!0,s.list({page:p.pagination.current_page,search:p.pagination.search,anulada:p.query.anulada},function(a){p.pagination.total_items=a.count,p.array=a.results,p.loading=!1},function(a){})},p.list(),p.delete=function(a){swal({title:"¿Anular cita?",text:"Se anulará la cita",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, anular!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.delete({id:a.id},d,c)})},p.details=function(a){return i.open({template:"app/pages/citas/templates/citas.dialog.details.html",width:"80%",controller:"CitaDetailsDialogController",controllerAs:"ctrl",closeByDocument:!0,closeByEscape:!0,resolve:{item:function(){return a}}})},p.create=function(){if(e.user)return r.hasPermission(e.user,r.ADMIN)||r.hasPermission(e.user,r.SECRETARIA)?i.openConfirm({template:"app/pages/citas/templates/citas.dialog.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return null},paciente:function(){return null}}}).then(function(a){return p.list()}).catch(function(a){}):i.openConfirm({template:"app/pages/citas/templates/citas.dialog.users.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return e.user},paciente:function(){return null}}}).then(function(a){return p.list()}).catch(function(a){})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","CitaService","AuthService"],angular.module("BlurAdmin.pages.citas").controller("CitasController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){f.loading=!1,f.colaboradores=[],f.colaborador=null,f.pagination={max_size:10,total_items:0,current_page:1,search:""},l&&(f.colaborador=l),f.loadingPac=!0,f.pacientes=[],f.paciente={},p(),f.paginationPac={max_size:10,total_items:0,current_page:1,search:""},c&&(f.paciente=c);var a=(new Date).getFullYear();f.anios=[{id:a,value:a},{id:a+1,value:a+1}],f.meses=i.getMonths(),f.dias=i.getDays(),f.horas=i.getHours(),f.minutos=i.getMinutes(),f.fechaCita=null,f.descripcion="";var e=new Date;e.setDate(e.getDate()+1),f.fecha={anios:_.find(f.anios,{id:e.getFullYear()}),meses:_.find(f.meses,{id:e.getMonth()}),dias:_.find(f.dias,{id:e.getDate()}),hora:_.find(f.horas,{id:9}),minuto:f.minutos[0]}}function p(){f.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"",departamento:"",direccion:"",correo:"",foto:null},genero:"",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"---",num_hermanos:0,nivel_academico:"Educación Media Superior",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:null,nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{notas:{antecedentes:{medicos:"",quirurgicos:"",traumaticos:"",alergicos:"",vicios:"",pediatricos:"",familiares:"",ginecologicos:{fur:"",gestas:"",partos:"",abortos:"",pf:""}}}},notas_psicologicas:{historia_clinica:{historia_prenatal:"",desarrollo_psicomotriz:"",desenvolvimiento_escolar:"",adolescencia:"",historia_psico_sexual:"",vida_social:"",historia_medica:"",trastornos_familiares:"",otros:""},historia_familiar:""}}}function u(){var a="¡Error!",e="Ocurrió un error, por favor intenta más tarde.",t=!1,o=new Date;return f.fechaCita=new Date(f.fecha.anios.id,f.fecha.meses.id,f.fecha.dias.id,f.fecha.hora.id,f.fecha.minuto.id),f.fechaCita<=o&&(a="Fecha no admitida",e="La fecha debe ser mayor a la fecha actual",t=!0),t&&swal(a,e,"error"),!t}function m(){f.paciente.notas_medicas=JSON.stringify(f.paciente.notas_medicas),f.paciente.notas_psicologicas=JSON.stringify(f.paciente.notas_psicologicas),o.create(f.paciente,function(a){return f.paciente.id=a.id,g()},function(e){return swal("¡Error!","Ocurrió un error al reservar la cita. Por favor intenta más tarde.","error"),a.closeThisDialog(e)})}function g(){var e={colaborador:f.colaborador.id,paciente:f.paciente.id,fecha_cita:f.fechaCita,descripcion:f.descripcion};s.create(e,function(e){return swal("¡Éxito!","La cita fué reservada exitosamente.","success"),a.confirm(e)},function(e){return swal("¡Error!","Ocurrió un error al reservar la cita. Por favor intenta más tarde.","error"),a.closeThisDialog(e)})}var f=this;d(),f.page_changed=function(){return f.listColaboradores()},f.search=function(){f.pagination.current_page=1,f.listColaboradores()},f.listColaboradores=function(){return f.loading=!0,t.list({page:f.pagination.current_page,search:f.pagination.search,roles:r.PSICOLOGIA+","+r.MEDICINA},function(a){f.pagination.total_items=a.count,f.colaboradores=a.results,f.loading=!1},function(a){f.loading=!1})},f.listColaboradores(),f.seleccionarColaborador=function(a){f.colaborador=a},f.resetPaciente=p,f.page_changed_pac=function(){return f.listPacientes()},f.searchPac=function(){f.paginationPac.current_page=1,f.listPacientes()},f.listPacientes=function(){return f.loadingPac=!0,o.list({page:f.paginationPac.current_page,search:f.paginationPac.search},function(a){f.paginationPac.total_items=a.count,f.pacientes=a.results,f.loadingPac=!1},function(a){})},f.listPacientes(),f.seleccionarPaciente=function(a){a&&(f.paciente=a)},f.save=function(){u()&&swal({title:"¿Reservar cita?",text:"Será registrada una cita para el paciente: "+f.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, reservar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,f.paciente.id?g():m()})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","colaborador","paciente"],angular.module("BlurAdmin.pages.citas").controller("CitasDialogController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p){function u(){m.cita=p}var m=this;u()}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","PacienteService","UtilsService","$http","Upload","ngDialog","item"],angular.module("BlurAdmin.pages.citas").controller("CitaDetailsDialogController",a)}(),function(){"use strict";function a(a){var e="/api/citas/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.citas").factory("CitaService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c){function d(){g.loading_item=!1,g.loading=!1,g.array=[],g.consulta={},g.pagination={max_size:10,total_items:0,current_page:1,search:""},g.archivo=null,g.query={},p()}function p(){return o.params.id?(g.loading=!0,void r.get({id:o.params.id},function(a){g.consulta=a,g.loading=!1,g.list()},function(a){return o.go("consultas")})):o.go("consultas")}function u(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),g.loading=!1,swal("¡Error!",e,"error")}function m(a){return swal("¡Éxito al eliminar!","Archivo eliminado exitosamente","success"),g.list()}var g=this;d(),g.page_changed=function(){return g.list()},g.search=function(){g.pagination.current_page=1,g.list()},g.list=function(){return g.loading=!0,c.list({consulta:o.params.id},function(a){g.pagination.total_items=a.count,_.forEach(a.results,function(a){var e=a.archivo.split("/");a.name=e[e.length-1];var t=a.name.split(".");if(t.length>=2){var o=t[t.length-1];"doc"==o||"docx"==o?(a.type="document",a.icon="mdi mdi-file-word-box color-word"):"ppt"==o||"pptx"==o?(a.type="present",a.icon="mdi mdi-file-powerpoint-box color-present"):"jpg"==o||"jpeg"==o||"png"==o||"gif"==o||"svg"==o?(a.type="image",a.icon="mdi mdi-file-image color-img"):"pdf"==o?(a.type="pdf",a.icon="mdi mdi-file-pdf-box color-pdf"):"zip"==o||"rar"==o?(a.type="compressed",a.icon="mdi mdi-zip-box color-zip"):"txt"==o?(a.type="text",a.icon="mdi mdi-file-document-box color-file"):(a.type="file",a.icon="mdi mdi-file-outline color-file")}else a.type="file",a.icon="mdi mdi-file-outline color-file"}),g.array=a.results,g.loading=!1},function(a){})};var f=function(a){g.archivo=a.currentTarget.files[0],g.archivo&&g.uploadFile()};setTimeout(function(){angular.element(document.querySelector("#fileInput")).on("change",f)},1e3),g.uploadFile=function(){swal({title:"¿Adjuntar archivo?",text:"Será importado el archivo a la lista de archivos adjuntos de esta consulta",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, adjuntar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a={consulta:g.consulta.id,archivo:g.archivo};return s.upload({url:"/api/archivos_consulta/guardar_archivo/",method:"POST",data:a}).then(function(a){g.archivo=null,g.list(),swal("¡Archivo importado!","El archivo fue importado exitosamente.","success")}).catch(function(a){return g.archivo=null,u(a)})})},g.downloadFile=function(a){var e=document.createElement("a");e.href=a.archivo,e.download=a.name,e.click()},g.viewFile=function(a){"image"==a.type?g.viewImg(a.archivo):window.open(a.archivo,"_blank")},g.viewImg=function(a){return e.actual_user_foto=a,i.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},g.delete=function(a){swal({title:"¿Eliminar archivo?",text:"Se eliminará un archivo de esta consulta.",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,c.delete({id:a.id},m,u)})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","Upload","ConsultaService","AuthService","ArchivosConsultaService"],angular.module("BlurAdmin.pages.consultas").controller("ArchivosConsultaController",a)}(),function(){"use strict";function a(a){var e="/api/archivos_consulta/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.consultas").factory("ArchivosConsultaService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){p.loading=!1,p.array=[],p.pagination={max_size:10,total_items:0,current_page:1,search:""},p.query={}}function c(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),p.loading=!1,swal("¡Error!",e,"error")}function d(a){return swal("¡Éxito al eliminar!","Consulta eliminada exitosamente","success"),p.list()}var p=this;l(),p.page_changed=function(){return p.list()},p.search=function(){p.pagination.current_page=1,p.list()},p.list=function(){return p.loading=!0,s.list({page:p.pagination.current_page,search:p.pagination.search},function(a){p.pagination.total_items=a.count,p.array=a.results,p.loading=!1},function(a){})},p.list(),p.viewImg=function(a){return e.actual_user_foto=a,i.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},p.delete=function(a){swal({title:"¿Eliminar la consulta?",text:"Se eliminará la consulta",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.delete({id:a.id},d,c)})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","ConsultaService","AuthService"],angular.module("BlurAdmin.pages.consultas").controller("ConsultaController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p){function u(){x.loading=!1,x.departamentos=i.getDepartamentos(),x.religiones=i.getReligiones(),x.foto=null,x.genograma=null,x.panelPacienteOculto=!0,x.panelMotivoOculto=!1,x.panelAntecedentesOculto=!0,x.panelExamenFisicoOculto=!0,x.panelPlanDiagnosticoOculto=!0,x.panelImpresionClinicaOculto=!0,x.panelTratamientoOculto=!1,setTimeout(function(){$("#motivo").focus()},250),x.consulta={motivo:"",notas:{historia:"",examen_fisico:"",plan_diagnostico:"",impresion_clinica:"",tratamiento:""}},x.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{notas:{antecedentes:{medicos:"",quirurgicos:"",traumaticos:"",alergicos:"",vicios:"",pediatricos:"",familiares:"",ginecologicos:{fur:"",gestas:"",partos:"",abortos:"",pf:""}}}},notas_psicologicas:{historia_clinica:{historia_prenatal:"",desarrollo_psicomotriz:"",desenvolvimiento_escolar:"",adolescencia:"",historia_psico_sexual:"",vida_social:"",historia_medica:"",trastornos_familiares:"",otros:""},historia_familiar:""}},x.grados=i.getGrados(),x.paciente.nivel_academico=x.grados[3],x.tiposDeSangre=i.getBloodTypes(),x.paciente.tipo_de_sangre=x.tiposDeSangre[0],x.anios=i.getYears(),x.meses=i.getMonths(),x.dias=i.getDays(),x.nacimiento={dias:x.dias[0],meses:x.meses[0],anios:x.anios[0]},m()}function m(){l.params.id?(x.loading=!0,o.get({id:l.params.id},function(a){a.nivel_academico=_.find(x.grados,{value:a.nivel_academico}),a.tipo_de_sangre=_.find(x.tiposDeSangre,{value:a.tipo_de_sangre});var e=new Date(a.fecha_nacimiento);e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),x.nacimiento.anios=_.find(x.anios,{id:e.getFullYear()}),x.nacimiento.meses=_.find(x.meses,{id:e.getMonth()}),x.nacimiento.dias=_.find(x.dias,{id:e.getDate()}),a.tipos=[],a.notas_medicas=JSON.parse(a.notas_medicas),a.notas_psicologicas=JSON.parse(a.notas_psicologicas),x.paciente=a,x.loading=!1},function(a){return l.go("pacientes")})):(x.panelPacienteOculto=!1,x.panelMotivoOculto=!0,setTimeout(function(){$("#persona").focus(),$(document).ready(function(){$(this).scrollTop(0)})},50))}function g(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function f(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return x.paciente.persona.persona?x.consulta.motivo||(a="Motivo de la consulta",e="No fue asignado un motivo a la consulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function v(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function b(a){var t=_.clone(x.consulta);t.paciente=x.paciente.id,t.colaborador=e.user.id,t.notas=JSON.stringify(t.notas),d.create(t,function(a){return swal("¡Éxito!","La consulta fue registrada exitosamente.","success"),l.go("consultas")},function(a){return swal("¡Error!","La consulta no pudo ser registrada. Por favor, intenta más tarde.","error"),l.go("pacientes")})}function h(a){x.paciente.id=a.id;var e={id:x.paciente.id,foto:x.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return b(a)}).catch(function(a){return b(a)})}var x=this;u(),x.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",w)},1e3)},x.listenUploaders(),x.showPanel=function(a){return x.listenUploaders(),!a},x.getDepartamentos=function(a){var e=_.filter(x.departamentos,function(e){var t=g(a).toLowerCase(),o=g(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},x.getReligiones=function(a){var e=_.filter(x.religiones,function(e){var t=g(a).toLowerCase(),o=g(e).toLowerCase();return o.indexOf(t)!==-1});return e},x.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=x.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var w=function(e){x.foto=e.currentTarget.files[0],x.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};x.save=function(){f()&&swal({title:"¿Registrar consulta?",text:"Será registrada una nueva consulta para el paciente: "+x.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(x.paciente),e=new Date(x.nacimiento.anios.id,x.nacimiento.meses.id,x.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_medicas=JSON.stringify(a.notas_medicas)||"",a.notas_psicologicas=JSON.stringify(a.notas_psicologicas)||"",delete a.persona.foto,a.id?o.update(a,h,v):o.create(a,h,v)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","ConsultaService","ngDialog"],angular.module("BlurAdmin.pages.consultas").controller("ConsultaCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p){function u(){x.loading=!1,x.departamentos=i.getDepartamentos(),x.religiones=i.getReligiones(),x.foto=null,x.genograma=null,x.panelPacienteOculto=!0,x.panelMotivoOculto=!1,x.panelAntecedentesOculto=!0,x.panelExamenFisicoOculto=!0,x.panelPlanDiagnosticoOculto=!0,x.panelImpresionClinicaOculto=!0,x.panelTratamientoOculto=!1,setTimeout(function(){$("#motivo").focus()},250),x.consulta={motivo:"",notas:{}},x.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{}},x.grados=i.getGrados(),x.paciente.nivel_academico=x.grados[3],x.tiposDeSangre=i.getBloodTypes(),x.paciente.tipo_de_sangre=x.tiposDeSangre[0],x.anios=i.getYears(),x.meses=i.getMonths(),x.dias=i.getDays(),x.nacimiento={dias:x.dias[0],meses:x.meses[0],anios:x.anios[0]},m()}function m(){return x.loading=!0,l.params.id?void d.get({id:l.params.id},function(a){var e=a.paciente;e.nivel_academico=_.find(x.grados,{value:e.nivel_academico}),e.tipo_de_sangre=_.find(x.tiposDeSangre,{value:e.tipo_de_sangre});var t=new Date(e.fecha_nacimiento);t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),x.nacimiento.anios=_.find(x.anios,{id:t.getFullYear()}),x.nacimiento.meses=_.find(x.meses,{id:t.getMonth()}),x.nacimiento.dias=_.find(x.dias,{id:t.getDate()}),e.tipos=[],e.notas_medicas=JSON.parse(e.notas_medicas),x.paciente=e,x.consulta.id=a.id,x.consulta.motivo=a.motivo,x.consulta.notas=JSON.parse(a.notas||"{}"),x.loading=!1},function(a){return l.go("pacientes")}):l.go("pacientes")}function g(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function f(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return x.paciente.persona.persona?x.consulta.motivo||(a="Motivo de la consulta",e="No fue asignado un motivo a la consulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function v(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function b(a){var t=_.clone(x.consulta);t.paciente=x.paciente.id,t.colaborador=e.user.id,t.notas=JSON.stringify(t.notas),d.update(t,function(a){return swal("¡Éxito!","La consulta fue editada exitosamente.","success"),l.go("consultas")},function(a){return swal("¡Error!","La consulta no pudo ser editada. Por favor, intenta más tarde.","error"),l.go("pacientes")})}function h(a){var e={id:x.paciente.id,foto:x.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return b(a)}).catch(function(a){return b(a)})}var x=this;u(),x.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",w)},1e3)},x.listenUploaders(),x.showPanel=function(a){return x.listenUploaders(),!a},x.getDepartamentos=function(a){var e=_.filter(x.departamentos,function(e){var t=g(a).toLowerCase(),o=g(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},x.getReligiones=function(a){var e=_.filter(x.religiones,function(e){var t=g(a).toLowerCase(),o=g(e).toLowerCase();return o.indexOf(t)!==-1});return e},x.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=x.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var w=function(e){x.foto=e.currentTarget.files[0],x.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};x.save=function(){f()&&swal({title:"¿Editar consulta?",text:"Será editada una consulta del paciente: "+x.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(x.paciente),e=new Date(x.nacimiento.anios.id,x.nacimiento.meses.id,x.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_medicas=JSON.stringify(a.notas_medicas)||"",delete a.persona.foto,o.update(a,h,v)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","ConsultaService","ngDialog"],angular.module("BlurAdmin.pages.consultas").controller("ConsultaEditController",a)}(),function(){"use strict";function a(a){var e="/api/consultas/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},status:{method:"POST",url:e+"status/"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.consultas").factory("ConsultaService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l){function c(){m.loading=!1,m.loading_item=!1,m.array=[],m.pagination={max_size:10,total_items:0,current_page:1,search:""},m.consulta={},m.query={},d()}function d(){return o.params.id?(m.loading_item=!0,void s.get({id:o.params.id},function(a){m.consulta=a,m.loading_item=!1,m.list()},function(a){return o.go("consultas")})):o.go("consultas")}function p(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),m.loading=!1,swal("¡Error!",e,"error")}function u(a){return swal("¡Éxito al eliminar!","Consulta eliminada exitosamente","success"),m.list()}var m=this;c(),m.page_changed=function(){return m.list()},m.search=function(){m.pagination.current_page=1,m.list()},m.list=function(){return m.loading=!0,l.list({consulta:m.consulta.id,page:m.pagination.current_page,search:m.pagination.search},function(a){m.pagination.total_items=a.count,m.array=a.results,m.loading=!1},function(a){})},m.viewImg=function(a){return e.actual_user_foto=a,i.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},m.delete=function(a){swal({title:"¿Eliminar la consulta?",text:"Se eliminará la consulta",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.delete({id:a.id},u,p)})},m.createCita=function(){if(e.user)return i.openConfirm({template:"app/pages/citas/templates/citas.dialog.grid.pacientes.users.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return e.user},paciente:function(){return m.consulta.paciente}}}).then(function(a){}).catch(function(a){})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","ConsultaService","AuthService","ReconsultaService"],angular.module("BlurAdmin.pages.consultas").controller("ReconsultaController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p,u){function m(){w.loading=!1,w.departamentos=i.getDepartamentos(),w.religiones=i.getReligiones(),w.foto=null,w.genograma=null,w.panelPacienteOculto=!0,w.panelMotivoOculto=!1,w.panelAntecedentesOculto=!0,w.panelExamenFisicoOculto=!0,w.panelPlanDiagnosticoOculto=!0,w.panelImpresionClinicaOculto=!0,w.panelTratamientoOculto=!1,setTimeout(function(){$("#motivo").focus()},250),w.consulta={motivo:"",notas:{}},w.reconsulta={motivo:"",notas:{historia:"",examen_fisico:"",plan_diagnostico:"",impresion_clinica:"",tratamiento:""}},w.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{}},w.grados=i.getGrados(),w.paciente.nivel_academico=w.grados[3],w.tiposDeSangre=i.getBloodTypes(),w.paciente.tipo_de_sangre=w.tiposDeSangre[0],w.anios=i.getYears(),w.meses=i.getMonths(),w.dias=i.getDays(),w.nacimiento={dias:w.dias[0],meses:w.meses[0],anios:w.anios[0]},g()}function g(){return l.params.id?(w.loading=!0,void d.get({id:l.params.id},function(a){var e=a.paciente;e.nivel_academico=_.find(w.grados,{value:e.nivel_academico}),e.tipo_de_sangre=_.find(w.tiposDeSangre,{value:e.tipo_de_sangre});var t=new Date(e.fecha_nacimiento);t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),w.nacimiento.anios=_.find(w.anios,{id:t.getFullYear()}),w.nacimiento.meses=_.find(w.meses,{id:t.getMonth()}),w.nacimiento.dias=_.find(w.dias,{id:t.getDate()}),e.tipos=[],e.notas_medicas=JSON.parse(e.notas_medicas),w.consulta.id=a.id,w.consulta.motivo=a.motivo,w.consulta.notas=JSON.parse(a.notas),w.reconsulta.motivo=w.consulta.motivo,w.reconsulta.notas.historia=w.consulta.notas.historia,w.paciente=e,w.loading=!1},function(a){return l.go("consultas")})):l.go("consultas")}function f(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function v(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return w.paciente.persona.persona?w.consulta.motivo||(a="Motivo de la consulta",e="No fue asignado un motivo a la consulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function b(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function h(a){var e=_.clone(w.reconsulta);e.consulta=w.consulta.id,e.notas=JSON.stringify(e.notas),u.create(e,function(a){return swal("¡Éxito!","La reconsulta fue registrada exitosamente.","success"),l.go("reconsultas",{id:w.consulta.id})},function(a){return swal("¡Error!","La reconsulta no pudo ser registrada. Por favor, intenta más tarde.","error"),l.go("consultas")})}function x(a){var e={id:w.paciente.id,foto:w.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return h(a)}).catch(function(a){return h(a)})}var w=this;m(),w.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",y)},1e3)},w.listenUploaders(),w.showPanel=function(a){return w.listenUploaders(),!a},w.getDepartamentos=function(a){var e=_.filter(w.departamentos,function(e){var t=f(a).toLowerCase(),o=f(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},w.getReligiones=function(a){var e=_.filter(w.religiones,function(e){var t=f(a).toLowerCase(),o=f(e).toLowerCase();return o.indexOf(t)!==-1});return e},w.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=w.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var y=function(e){w.foto=e.currentTarget.files[0],w.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};w.save=function(){v()&&swal({title:"¿Registrar reconsulta?",text:"Será registrada una nueva reconsulta para el paciente: "+w.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(w.paciente),e=new Date(w.nacimiento.anios.id,w.nacimiento.meses.id,w.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_medicas=JSON.stringify(a.notas_medicas)||"",delete a.persona.foto,o.update(a,x,b)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","ConsultaService","ngDialog","ReconsultaService"],angular.module("BlurAdmin.pages.consultas").controller("ReconsultaCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p,u){function m(){w.loading=!1,w.departamentos=i.getDepartamentos(),w.religiones=i.getReligiones(),w.foto=null,w.genograma=null,w.panelPacienteOculto=!0,w.panelMotivoOculto=!1,w.panelAntecedentesOculto=!0,w.panelExamenFisicoOculto=!0,w.panelPlanDiagnosticoOculto=!0,w.panelImpresionClinicaOculto=!0,w.panelTratamientoOculto=!1,setTimeout(function(){$("#motivo").focus()},250),w.consulta={motivo:"",notas:{}},w.reconsulta={motivo:"",notas:{}},w.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,
nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{}},w.grados=i.getGrados(),w.paciente.nivel_academico=w.grados[3],w.tiposDeSangre=i.getBloodTypes(),w.paciente.tipo_de_sangre=w.tiposDeSangre[0],w.anios=i.getYears(),w.meses=i.getMonths(),w.dias=i.getDays(),w.nacimiento={dias:w.dias[0],meses:w.meses[0],anios:w.anios[0]},g()}function g(){return l.params.id?(w.loading=!0,void u.get({id:l.params.id},function(a){var e=a.consulta.paciente;e.nivel_academico=_.find(w.grados,{value:e.nivel_academico}),e.tipo_de_sangre=_.find(w.tiposDeSangre,{value:e.tipo_de_sangre});var t=new Date(e.fecha_nacimiento);t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),w.nacimiento.anios=_.find(w.anios,{id:t.getFullYear()}),w.nacimiento.meses=_.find(w.meses,{id:t.getMonth()}),w.nacimiento.dias=_.find(w.dias,{id:t.getDate()}),e.tipos=[],e.notas_medicas=JSON.parse(e.notas_medicas),w.consulta.id=a.consulta.id,w.reconsulta.id=a.id,w.reconsulta.motivo=a.motivo,w.reconsulta.notas=JSON.parse(a.notas),w.paciente=e,w.loading=!1},function(a){return l.go("consultas")})):l.go("consultas")}function f(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function v(){var a="¡Campos incompletos!",e="Verifica que todos los campos obligatorios estén completados.",t=!1;return w.paciente.persona.persona?w.reconsulta.motivo||(a="Motivo de la reconsulta",e="No fue asignado un motivo a la reconsulta. Por favor completa ese campo.",t=!0):(a="Persona sin nombre",e="La persona no tiene asignado un nombre. Por favor completa ese campo.",t=!0),t&&swal(a,e,"error"),!t}function b(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function h(a){var e=_.clone(w.reconsulta);e.consulta=w.consulta.id,e.notas=JSON.stringify(e.notas),u.update(e,function(a){return swal("¡Éxito!","La reconsulta fue registrada exitosamente.","success"),l.go("reconsultas",{id:w.consulta.id})},function(a){return swal("¡Error!","La reconsulta no pudo ser registrada. Por favor, intenta más tarde.","error"),l.go("consultas")})}function x(a){var e={id:w.paciente.id,foto:w.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return h(a)}).catch(function(a){return h(a)})}var w=this;m(),w.listenUploaders=function(){setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",y)},1e3)},w.listenUploaders(),w.showPanel=function(a){return w.listenUploaders(),!a},w.getDepartamentos=function(a){var e=_.filter(w.departamentos,function(e){var t=f(a).toLowerCase(),o=f(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},w.getReligiones=function(a){var e=_.filter(w.religiones,function(e){var t=f(a).toLowerCase(),o=f(e).toLowerCase();return o.indexOf(t)!==-1});return e},w.viewImg=function(a){return e.actual_user_foto=a,a||(e.actual_user_foto=w.paciente.persona.foto),p.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var y=function(e){w.foto=e.currentTarget.files[0],w.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};w.save=function(){v()&&swal({title:"¿Editar reconsulta?",text:"Será editada una reconsulta del paciente: "+w.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(w.paciente),e=new Date(w.nacimiento.anios.id,w.nacimiento.meses.id,w.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_medicas=JSON.stringify(a.notas_medicas)||"",delete a.persona.foto,o.update(a,x,b)})}}a.$inject=["$scope","$rootScope","UsersService","PacienteService","WizardHandler","UtilsService","CitaService","AuthService","$state","Upload","ConsultaService","ngDialog","ReconsultaService"],angular.module("BlurAdmin.pages.consultas").controller("ReconsultaEditController",a)}(),function(){"use strict";function a(a){var e="/api/reconsultas/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.consultas").factory("ReconsultaService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){u.cobro={paciente:r.id,monto:null,tipo:10,motivo:""}}function c(){var a="Error",e="Campos incompletos. Por favor verifica.",t=!1;return u.cobro.monto?u.cobro.motivo||(a="Sin motivo",e="Por favor, escribe el motivo del cobro",t=!0):(a="Sin monto",e="Por favor, escribe la cantidad del cobro",t=!0),t&&swal(a,e,"error"),!t}function d(e){var t="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";e.data.detail&&(t=e.data.detail.toString()),swal("¡Error!",t,"error"),a.confirm(response)}function p(e){swal("¡Éxito!","El cobro fue registrado exitosamente.","success"),a.confirm(e)}var u=this;l(),u.save=function(){c()&&swal({title:"¿Registrar cobro?",text:"Será registrado un cobro al paciente",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, registrar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,u.cobro.colaborador=e.user.id,s.create(u.cobro,p,d)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","CobrosPacienteService","item"],angular.module("BlurAdmin.pages.caja").controller("CobrosPacienteCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){g.loading=!1,g.loadingIngEng=!1,g.array=[],g.ingresos_egresos={},g.pagination={max_size:10,total_items:0,current_page:1,search:""},g.paciente={},g.ESTADOS_CAJA=l.getEstadosCaja(),g.query={pendientes:10,pagados:20,anulados:30,todas:40},g.query.filterby=g.query.todas,u()}function u(){return o.params.id?(g.loading=!0,void c.get({id:o.params.id},function(a){g.paciente=a,g.loading=!1,g.list()},function(a){})):o.go("caja")}function m(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),g.loading=!1,swal("¡Error!",e,"error")}var g=this;p(),g.page_changed=function(){return g.list()},g.search=function(){g.pagination.current_page=1,g.list()},g.list=function(){var a={paciente:o.params.id,search:g.pagination.search,page:g.pagination.current_page};return g.query.filterby==g.query.pendientes?(a.anulado=!1,a.pagado=!1):g.query.filterby==g.query.pagados?(a.anulado=!1,a.pagado=!0):g.query.filterby==g.query.anulados?(a.anulado=!0,a.pagado=!1):g.query.filterby==g.query.todas&&(a.anulado=null,a.pagado=null),g.loading=!0,d.list(a,function(a){g.pagination.total_items=a.count,g.array=a.results,g.loading=!1},function(a){})},g.registrarCobro=function(){return i.openConfirm({template:"app/pages/pacientes/templates/cobros.create.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"CobrosPacienteCreateController",controllerAs:"ctrl",resolve:{item:function(){return g.paciente}},closeByDocument:!1,closeByEscape:!1}).then(function(a){u()}).catch(function(a){})},g.anularCobro=function(a){return swal({title:"¿Anular cobro?",text:"Se anulará este cobro",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, anular!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,d.delete({id:a.id},function(a){return swal("¡Éxito!","El cobro fue anulado exitosamente","success"),u()},m)})},g.realizarCobro=function(a){return e.user.caja_activa?i.openConfirm({template:"app/pages/caja/templates/movimientos_caja.create.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"MovimientosCajaCreateCobroPacienteController",controllerAs:"ctrl",resolve:{item:function(){return a}},closeByDocument:!1,closeByEscape:!1}).then(function(a){u()}).catch(function(a){}):void swal("Sin apertura de caja","Usted no tiene una apertura de caja activa en este momento. Para realizar el cobro debe tener una caja aperturada","error")},g.registrarAbono=function(){return e.user.caja_activa?i.openConfirm({template:"app/pages/caja/templates/movimientos_caja.create.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"MovimientosCajaCreateAbonoPacienteController",controllerAs:"ctrl",resolve:{paciente:function(){return g.paciente}},closeByDocument:!1,closeByEscape:!1}).then(function(a){u()}).catch(function(a){}):void swal("Sin apertura de caja","Usted no tiene una apertura de caja activa en este momento. Para realizar el cobro debe tener una caja aperturada","error")}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ngDialog","AuthService","CajaService","UtilsService","PacienteService","CobrosPacienteService"],angular.module("BlurAdmin.pages.pacientes").controller("CobrosPacienteController",a)}(),function(){"use strict";function a(a){var e="/api/cobros_paciente/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.pacientes").factory("CobrosPacienteService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){p.loading=!1,p.array=[],p.pagination={max_size:10,total_items:0,current_page:1,search:""},p.esPsicologo=!1,p.esMedico=!1,r.me().then(function(a){var e=a,t=r.hasPermission(e,r.PSICOLOGIA);t&&(p.esPsicologo=!0),r.hasPermission(e,r.MEDICINA)&&(p.esMedico=!0)}).catch(function(a){})}function c(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),p.loading=!1,swal("¡Error!",e,"error")}function d(a){return swal("¡Éxito al eliminar!","Registro eliminado exitosamente","success"),p.list()}var p=this;l(),p.page_changed=function(){return p.list()},p.search=function(){p.pagination.current_page=1,p.list()},p.list=function(){return p.loading=!0,i.list({page:p.pagination.current_page,search:p.pagination.search},function(a){p.pagination.total_items=a.count,_.forEach(a.results,function(a){a.fecha_nacimiento&&(a.edad=moment().diff(moment(a.fecha_nacimiento),"years"))}),p.array=a.results,p.loading=!1},function(a){})},p.list(),p.delete=function(a){swal({title:"¿Eliminar paciente?",text:"Se eliminará al paciente: "+a.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,i.delete({id:a.id},d,c)})},p.details=function(a){return s.openConfirm({template:"app/pages/pacientes/templates/pacientes.dialog.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"PacienteDialogController",controllerAs:"ctrl",width:"90%",resolve:{item:function(){return a},create:function(){return p.create}}}).then(function(a){return p.list()}).catch(function(a){})},p.create=function(a){if(e.user)return r.hasPermission(e.user,r.ADMIN)||r.hasPermission(e.user,r.SECRETARIA)?s.openConfirm({template:"app/pages/citas/templates/citas.dialog.grid.pacientes.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return null},paciente:function(){return a}}}).then(function(a){}).catch(function(a){}):s.openConfirm({template:"app/pages/citas/templates/citas.dialog.grid.pacientes.users.html",width:"80%",controller:"CitasDialogController",controllerAs:"ctrl",closeByDocument:!1,closeByEscape:!1,resolve:{colaborador:function(){return e.user},paciente:function(){return a}}}).then(function(a){return p.list()}).catch(function(a){})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","PacienteService","ngDialog","AuthService"],angular.module("BlurAdmin.pages.pacientes").controller("PacientesController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){v.departamentos=r.getDepartamentos(),v.religiones=r.getReligiones(),v.foto=null,v.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:{notas:{antecedentes:{medicos:"",quirurgicos:"",traumaticos:"",alergicos:"",vicios:"",pediatricos:"",familiares:"",ginecologicos:{fur:"",gestas:"",partos:"",abortos:"",pf:""}}}},notas_psicologicas:{historia_clinica:{historia_prenatal:"",desarrollo_psicomotriz:"",desenvolvimiento_escolar:"",adolescencia:"",historia_psico_sexual:"",vida_social:"",historia_medica:"",trastornos_familiares:"",otros:""},historia_familiar:""}},v.grados=r.getGrados(),v.paciente.nivel_academico=v.grados[3],v.tiposDeSangre=r.getBloodTypes(),v.paciente.tipo_de_sangre=v.tiposDeSangre[0],v.anios=r.getYears(),v.meses=r.getMonths(),v.dias=r.getDays(),v.nacimiento={dias:v.dias[0],meses:v.meses[0],anios:v.anios[0]}}function u(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(){return!!v.form.$valid||(v.form.persona.$dirty=!0,!1)}function g(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function f(a){var e={id:a.id,foto:v.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return swal("¡Éxito!","El paciente fue agregado exitosamente.","success"),o.go("pacientes")}).catch(function(a){return swal("¡Éxito!","El paciente fue agregado exitosamente.","success"),o.go("pacientes")})}var v=this;p(),v.getDepartamentos=function(a){var e=_.filter(v.departamentos,function(e){var t=u(a).toLowerCase(),o=u(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},v.getReligiones=function(a){var e=_.filter(v.religiones,function(e){var t=u(a).toLowerCase(),o=u(e).toLowerCase();return o.indexOf(t)!==-1});return e},v.viewImg=function(){return e.actual_user_foto=v.paciente.persona.foto,d.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var b=function(e){v.foto=e.currentTarget.files[0],v.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",b)},1e3),v.save=function(){m()&&swal({title:"¿Agregar paciente?",text:"Será agregado el paciente: "+v.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, agregar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(v.paciente),e=new Date(v.nacimiento.anios.id,v.nacimiento.meses.id,v.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,a.notas_psicologicas=JSON.stringify(a.notas_psicologicas),a.notas_medicas=JSON.stringify(a.notas_medicas),delete a.persona.foto,s.create(a,f,g)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","PacienteService","UtilsService","$http","Upload","ngDialog"],angular.module("BlurAdmin.pages.pacientes").controller("PacientesCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d,p,u){function m(){g.paciente=p}var g=this;m(),g.create=function(){return a.closeThisDialog(),u(g.paciente)}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","PacienteService","UtilsService","$http","Upload","ngDialog","item","create"],angular.module("BlurAdmin.pages.pacientes").controller("PacienteDialogController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){b.loading=!1,b.departamentos=r.getDepartamentos(),b.religiones=r.getReligiones(),b.foto=null,b.paciente={persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},genero:"Femenino",tipos:[],contacto_referencia:"",telefono_referencia:"",religion:"",tipo_de_sangre:"",num_hermanos:0,nivel_academico:"",ocupacion:"",lugar_nacimiento:"",fecha_nacimiento:"",nombres_padres:"",ocupacion_padres:"",info_padres:"",notas_medicas:"",notas_psicologicas:""},b.grados=r.getGrados(),b.paciente.nivel_academico=b.grados[3],b.tiposDeSangre=r.getBloodTypes(),b.paciente.tipo_de_sangre=b.tiposDeSangre[0],b.anios=r.getYears(),b.meses=r.getMonths(),b.dias=r.getDays(),b.nacimiento={dias:b.dias[0],meses:b.meses[0],anios:b.anios[0]},u()}function u(){return b.loading=!0,o.params.id?void s.get({id:o.params.id},function(a){a.nivel_academico=_.find(b.grados,{value:a.nivel_academico}),a.tipo_de_sangre=_.find(b.tiposDeSangre,{value:a.tipo_de_sangre});var e=new Date(a.fecha_nacimiento);e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),b.nacimiento.anios=_.find(b.anios,{id:e.getFullYear()}),b.nacimiento.meses=_.find(b.meses,{id:e.getMonth()}),b.nacimiento.dias=_.find(b.dias,{id:e.getDate()}),a.tipos=[],a.notas_medicas=JSON.parse(a.notas_medicas),a.notas_psicologicas=JSON.parse(a.notas_psicologicas),b.paciente=a,b.loading=!1},function(a){return o.go("pacientes")}):o.go("pacientes")}function m(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function g(){return!!b.form.$valid||(b.form.persona.$dirty=!0,!1)}function f(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function v(a){var e={id:b.paciente.id,foto:b.foto};return c.upload({url:"/api/pacientes/guardar_foto/",method:"POST",data:e}).then(function(a){return swal("¡Éxito!","El paciente fue editado exitosamente.","success"),o.go("pacientes")}).catch(function(a){return swal("¡Éxito!","El paciente fue editado exitosamente.","success"),o.go("pacientes")})}var b=this;p(),b.getDepartamentos=function(a){var e=_.filter(b.departamentos,function(e){var t=m(a).toLowerCase(),o=m(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},b.getReligiones=function(a){var e=_.filter(b.religiones,function(e){var t=m(a).toLowerCase(),o=m(e).toLowerCase();return o.indexOf(t)!==-1});return e},b.viewImg=function(){return e.actual_user_foto=b.paciente.persona.foto,d.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})};var h=function(e){b.foto=e.currentTarget.files[0],b.paciente.persona.foto=e.currentTarget.files[0],a.$apply()};setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",h)},1e3),b.save=function(){g()&&swal({title:"¿Editar paciente?",text:"Será editado el paciente: "+b.paciente.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=_.clone(b.paciente),e=new Date(b.nacimiento.anios.id,b.nacimiento.meses.id,b.nacimiento.dias.id);return a.fecha_nacimiento=e.getFullYear().toString()+"-"+(e.getMonth()+1).toString()+"-"+e.getDate().toString(),a.persona.departamento?a.persona.departamento=a.persona.departamento.name||a.persona.departamento:a.persona.departamento="",a.tipo_de_sangre=a.tipo_de_sangre.value,a.num_hermanos=a.num_hermanos||0,a.nivel_academico=a.nivel_academico.value,delete a.persona.foto,a.notas_medicas=JSON.stringify(a.notas_medicas),a.notas_psicologicas=JSON.stringify(a.notas_psicologicas),s.update(a,v,f)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","PacienteService","UtilsService","$http","Upload","ngDialog"],angular.module("BlurAdmin.pages.pacientes").controller("PacientesEditController",a)}(),function(){"use strict";function a(a){var e="/api/pacientes/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.pacientes").factory("PacienteService",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s){function r(){d.loading=!1,d.array=[],d.pagination={max_size:10,total_items:0,current_page:1,search:""}}function l(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),d.loading=!1,swal("¡Error!",e,"error")}function c(a){return swal("¡Éxito al eliminar!","Registro eliminado exitosamente","success"),d.list()}var d=this;r(),d.page_changed=function(){return d.list()},d.search=function(){d.pagination.current_page=1,d.list()},d.list=function(){return d.loading=!0,i.list({page:d.pagination.current_page,search:d.pagination.search},function(a){d.pagination.total_items=a.count,d.array=a.results,d.loading=!1},function(a){})},d.list(),d.delete=function(a){swal({title:"¿Eliminar profesión?",text:"Se eliminará la profesión: "+a.profesion,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,i.delete({id:a.id},c,l)})},d.create=function(){return s.openConfirm({template:"app/pages/profesiones/templates/profesiones.dialog.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"ProfesionCreateController",controllerAs:"ctrl"}).then(function(a){return d.list()}).catch(function(a){})},d.update=function(a){return s.openConfirm({template:"app/pages/profesiones/templates/profesiones.dialog.html",className:"ngdialog-theme-default ngdialog-theme-custom",controller:"ProfesionEditController",controllerAs:"ctrl",resolve:{item:function(){return a}}}).then(function(a){return d.list()}).catch(function(a){})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","ProfesionService","ngDialog"],angular.module("BlurAdmin.pages.profesiones").controller("ProfesionController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s){function r(){p.profesion={profesion:""}}function l(){return!!p.form.$valid||(p.form.profesion.$dirty=!0,!1)}function c(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function d(e){swal("¡Éxito!","La profesión fue agregada exitosamente.","success"),a.confirm(e)}var p=this;r(),p.save=function(){l()&&swal({title:"¿Agregar profesión?",text:"Será agregada la profesión: "+p.profesion.profesion,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, agregar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.create(p.profesion,d,c)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","ProfesionService"],angular.module("BlurAdmin.pages.profesiones").controller("ProfesionCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r){function l(){u.profesion={id:r.id,profesion:r.profesion}}function c(){return!!u.form.$valid||(u.form.profesion.$dirty=!0,!1)}function d(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function p(e){swal("¡Éxito!","La profesión fue editada exitosamente.","success"),a.confirm(e)}var u=this;l(),u.save=function(){c()&&swal({title:"¿Editar profesión?",text:"Será editada la profesión: "+u.profesion.profesion,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,s.update(u.profesion,p,d)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","ProfesionService","item"],angular.module("BlurAdmin.pages.profesiones").controller("ProfesionEditController",a)}(),function(){"use strict";function a(a){var e="/api/profesiones/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.profesiones").factory("ProfesionService",a)}(),function(){"use strict";function a(a,e,t,o,n,i){function s(){c.loading=!1,c.array=[],c.pagination={max_size:10,total_items:0,current_page:1,search:""}}function r(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),c.loading=!1,swal("¡Error!",e,"error")}function l(a){return swal("¡Éxito al eliminar!","Registro eliminado exitosamente","success"),c.list()}var c=this;s(),c.page_changed=function(){return c.list()},c.search=function(){c.pagination.current_page=1,c.list()},c.list=function(){return c.loading=!0,i.list({page:c.pagination.current_page,search:c.pagination.search},function(a){c.pagination.total_items=a.count,c.array=a.results,c.loading=!1},function(a){c.loading=!1})},c.list(),c.delete=function(a){swal({title:"¿Eliminar colaborador?",text:"Se eliminará al colaborador: "+a.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, eliminar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){return window.onkeydown=null,window.onfocus=null,i.delete({id:a.id},l,r)})}}a.$inject=["$scope","$rootScope","$window","$state","NotificationsService","UsersService"],angular.module("BlurAdmin.pages.users").controller("UserController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){v.departamentos=r.getDepartamentos(),v.perfil={user:{username:""},persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"Guatemalteco",departamento:"",direccion:"",correo:"",foto:""},profesion:"",colegiado:"",roles:[],password:"",password_confirm:""},v.password_confirm=!1,v.roles=r.getRoles()}function u(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(){return!(!v.form.$valid||!v.password_confirm)||(v.form.persona.$dirty=!0,v.form.email.$dirty=!0,v.form.roles.$dirty=!0,v.form.password.$dirty=!0,v.form.password_confirm.$dirty=!0,!1)}function g(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.detail&&(e=a.data.detail.toString()),swal("¡Error!",e,"error")}function f(a){return swal("¡Éxito!","El colaborador fue agregado exitosamente.","success"),o.go("users")}var v=this;p(),v.getDepartamentos=function(a){var e=_.filter(v.departamentos,function(e){var t=u(a).toLowerCase(),o=u(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},v.getProfesiones=function(a){var e={params:{search:a}};return l.get("/api/profesiones/",e).then(function(a){return a.data}).then(function(a){return a.results}).catch(function(a){})},v.viewImg=function(){return e.actual_user_foto=v.perfil.persona.foto,d.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},v.validate_password=function(){v.perfil.password==v.perfil.password_confirm?v.password_confirm=!0:v.password_confirm=!1};var b=function(e){var t=e.currentTarget.files[0];v.perfil.persona.foto=t,a.$apply()};setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",b)},1e3),v.save=function(){m()&&swal({title:"¿Agregar colaborador?",text:"Será agregado el colaborador: "+v.perfil.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, agregar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=[];v.perfil.roles.forEach(function(e){a.push(e.value)});var e={username:v.perfil.persona.correo,password:v.perfil.password_confirm,persona:v.perfil.persona.persona||"",apellido_casada:v.perfil.persona.apellido_casada||"",telefono:v.perfil.persona.telefono||"",celular:v.perfil.persona.celular||"",nacionalidad:v.perfil.persona.nacionalidad||"",direccion:v.perfil.persona.direccion||"",foto:v.perfil.persona.foto,roles:JSON.stringify(a),profesion:v.perfil.profesion.id,colegiado:v.perfil.colegiado||""};return v.departamento&&(e.departamento=v.departamento.name||v.departamento),c.upload({url:"/api/perfiles/",method:"POST",data:e}).then(f).catch(g)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","UsersService","UtilsService","$http","Upload","ngDialog"],angular.module("BlurAdmin.pages.users").controller("UserCreateController",a)}(),function(){"use strict";function a(a,e,t,o,n,i,s,r,l,c,d){function p(){h.loading=!1,h.departamentos=r.getDepartamentos(),h.roles=r.getRoles(),h.perfil={user:{username:""},persona:{persona:"",apellido_casada:"",cui:"",telefono:"",celular:"",nacionalidad:"",departamento:"",direccion:"",correo:"",foto:""},profesion:"",colegiado:"",roles:[]},u()}function u(){return h.loading=!0,o.params.id?s.get({id:o.params.id},function(a){var e=a;e.persona.persona&&(h.departamento=_.find(h.departamentos,{name:e.persona.departamento}),h.departamento||(h.departamento=e.persona.departamento));var t=[];e.roles.forEach(function(a){t.push(_.find(h.roles,{value:a}))}),e.roles=t,h.perfil=e,h.perfil.colegiado=parseInt(e.colegiado),h.loading=!1},function(a){return h.loading=!1,"users_profile"==o.current.name?(e.user=null,o.go("citas")):o.go("users")}):"users_profile"==o.current.name?(e.user=null,o.go("citas")):o.go("users")}function m(a){var e=a.toString();return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function g(){return!!h.form.$valid||(h.form.persona.$dirty=!0,h.form.email.$dirty=!0,h.form.roles.$dirty=!0,!1)}function f(a){var e="Ocurrió un error al realizar la petición. Por favor intenta más tarde.";return a.data.details&&(e=a.data.details.toString()),swal("¡Error!",e,"error")}function v(a){return swal("¡Éxito!",h.msg,"success"),"users_profile"==o.current.name?(e.user=null,o.go("citas")):o.go("users")}function b(){return!(!h.form_password.$valid||!h.password_confirm)||(h.form_password.password.$dirty=!0,h.form_password.password_confirm.$dirty=!0,!1)}var h=this;p(),h.onChange=function(e){void 0!=e[0]&&(a.fileExt=e[0].name.split(".").pop(),a.fileExt.match(/^(jpg|jpeg|gif|png)$/)?a.isImage=!0:a.isImage=!1)},h.viewImg=function(){return e.actual_user_foto=h.perfil.persona.foto,d.open({template:"app/pages/users/templates/img.dialog.html",width:"90%"})},h.getDepartamentos=function(a){var e=_.filter(h.departamentos,function(e){var t=m(a).toLowerCase(),o=m(e.name).toLowerCase();return o.indexOf(t)!==-1});return e},h.getProfesiones=function(a){
var e={params:{search:a}};return l.get("/api/profesiones/",e).then(function(a){return a.data}).then(function(a){return a.results}).catch(function(a){})},h.validate_password=function(){h.perfil.password==h.perfil.password_confirm?h.password_confirm=!0:h.password_confirm=!1};var x=function(e){var t=e.currentTarget.files[0];h.perfil.persona.foto=t,a.$apply()};setTimeout(function(){angular.element(document.querySelector("#imageInput")).on("change",x)},1e3),h.save=function(){g()&&swal({title:"¿Editar información?",text:"Será editada la información del colaborador",type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, editar!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a=[];h.perfil.roles.forEach(function(e){a.push(e.value)});var e=h.perfil.profesion;e=e?e.id:"";var t={id:h.perfil.id,username:h.perfil.persona.correo,persona:h.perfil.persona.persona||"",apellido_casada:h.perfil.persona.apellido_casada||"",telefono:h.perfil.persona.telefono||"",celular:h.perfil.persona.celular||"",nacionalidad:h.perfil.persona.nacionalidad||"",direccion:h.perfil.persona.direccion||"",foto:h.perfil.persona.foto,roles:JSON.stringify(a),profesion:e,colegiado:h.perfil.colegiado||""};return h.departamento&&(t.departamento=h.departamento.name||h.departamento),h.msg="Información del colaborador editada exitosamente",c.upload({url:"/api/perfiles/"+t.id+"/",method:"PUT",data:t}).then(v).catch(f)})},h.restore_password=function(){b()&&swal({title:"¿Restablecer contraseña?",text:"Se restablecerá la contraseña del colaborador: "+h.perfil.persona.persona,type:"warning",showCancelButton:!0,confirmButtonColor:"#e74c3c",confirmButtonText:"¡Sí, restablecer!",cancelButtonText:"No, aún no",closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){window.onkeydown=null,window.onfocus=null;var a={id:h.perfil.id,password:h.perfil.password_confirm};return h.msg="Contraseña restablecida exitosamente",s.restore(a,v,f)})}}a.$inject=["$scope","$rootScope","$window","$state","AuthService","NotificationsService","UsersService","UtilsService","$http","Upload","ngDialog"],angular.module("BlurAdmin.pages.users").controller("UserEditController",a)}(),function(){"use strict";function a(a){var e="/api/perfiles/";return a(e+":id/",{},{list:{method:"GET",params:{query:"@query"}},get:{method:"GET",params:{id:"@id"}},create:{method:"POST"},update:{method:"PUT",params:{id:"@id"}},restore:{url:e+"restore/",method:"PUT",params:{id:"@id"}},delete:{method:"DELETE",params:{id:"@id"}}},{stripTrailingSlashes:!1})}a.$inject=["$resource"],angular.module("BlurAdmin.pages.users").factory("UsersService",a)}(),function(){"use strict";function a(a,e){return angular.extend({},a,{template:function(t,o){var n='<div  class="panel '+(e.theme.blur?"panel-blur":"")+" full-invisible "+(o.baPanelClass||"");return n+='" zoom-in '+(e.theme.blur?"ba-panel-blur":"")+">",n+=a.template(t,o),n+="</div>"}})}a.$inject=["baPanel","baConfig"],angular.module("BlurAdmin.theme").directive("baPanel",a)}(),function(){"use strict";function a(){return{restrict:"A",transclude:!0,template:function(a,e){var t='<div class="panel-body" ng-transclude></div>';if(e.baPanelTitle){var o='<div class="panel-heading clearfix"><h3 class="panel-title">'+e.baPanelTitle+"</h3></div>";t=o+t}return t}}}angular.module("BlurAdmin.theme").factory("baPanel",a)}(),function(){"use strict";function a(a,e,t){var o;return a.bodyBgLoad().then(function(){o=a.getBodyBgImageSizes()}),e.addEventListener("resize",function(){o=a.getBodyBgImageSizes()}),{restrict:"A",link:function(n,i){function s(){o&&i.css({backgroundSize:Math.round(o.width)+"px "+Math.round(o.height)+"px",backgroundPosition:Math.floor(o.positionX)+"px "+Math.floor(o.positionY)+"px"})}t.$isMobile||(a.bodyBgLoad().then(function(){setTimeout(s)}),e.addEventListener("resize",s),n.$on("$destroy",function(){e.removeEventListener("resize",s)}))}}}a.$inject=["baPanelBlurHelper","$window","$rootScope"],angular.module("BlurAdmin.theme").directive("baPanelBlur",a)}(),function(){"use strict";function a(a){var e=a.defer(),t=getComputedStyle(document.body,":before"),o=new Image;o.src=t.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2"),o.onerror=function(){e.reject()},o.onload=function(){e.resolve()},this.bodyBgLoad=function(){return e.promise},this.getBodyBgImageSizes=function(){var a=document.documentElement.clientWidth,e=document.documentElement.clientHeight;if(!(a<=640)){var t,n,i=o.height/o.width,s=e/a;return s>i?(t=e,n=e/i):(n=a,t=a*i),{width:n,height:t,positionX:(a-n)/2,positionY:(e-t)/2}}}}a.$inject=["$q"],angular.module("BlurAdmin.theme").service("baPanelBlurHelper",a)}(),function(){"use strict";function a(a){return angular.extend({},a,{link:function(a,e,t){e.addClass("panel panel-white"),t.baPanelClass&&e.addClass(t.baPanelClass)}})}a.$inject=["baPanel"],angular.module("BlurAdmin.theme").directive("baPanelSelf",a)}(),function(){"use strict";function a(a,e,t,o){function n(){e.user||i()}function i(){o.me().then(function(a){e.user=a,a.persona&&(e.user.persona.name=a.persona.persona.split(" ")[0],a.persona.persona.split(" ")[1]&&(e.user.persona.name+=" "+a.persona.persona.split(" ")[1])),e.user_img=null,a.persona&&(e.user_img=a.persona.foto);var o=t.getMenuItems(),n=[];_.forEach(o,function(a){var t=!1;_.forEach(e.user.roles,function(e){if(_.indexOf(a.permissions,e)!==-1)return t=!0,!1}),t&&n.push(a)}),n.length&&(e.menuItems=n,e.defaultSidebarState=n[0].stateRef),e.hoverItem=function(a){e.showHoverElem=!0,e.hoverElemHeight=a.currentTarget.clientHeight;var t=66;e.hoverElemTop=a.currentTarget.getBoundingClientRect().top-t}}).catch(function(a){})}n(),a.$on("$stateChangeSuccess",function(){t.canSidebarBeHidden()&&t.setMenuCollapsed(!0)})}a.$inject=["$scope","$rootScope","baSidebarService","AuthService"],angular.module("BlurAdmin.theme.components").controller("BaSidebarCtrl",a)}(),function(){"use strict";function a(a,e,t,o){var n=$(window);return{restrict:"E",templateUrl:"app/theme/components/baSidebar/ba-sidebar.html",controller:"BaSidebarCtrl",link:function(o,i){function s(o){t.isDescendant(i[0],o.target)||o.originalEvent.$sidebarEventProcessed||e.isMenuCollapsed()||!e.canSidebarBeHidden()||(o.originalEvent.$sidebarEventProcessed=!0,a(function(){e.setMenuCollapsed(!0)},10))}function r(){var a=e.shouldMenuBeCollapsed(),t=l();a==e.isMenuCollapsed()&&o.menuHeight==t||o.$apply(function(){o.menuHeight=t,e.setMenuCollapsed(a)})}function l(){return i[0].childNodes[0].clientHeight-84}o.menuHeight=i[0].childNodes[0].clientHeight-84,n.on("click",s),n.on("resize",r),o.$on("$destroy",function(){n.off("click",s),n.off("resize",r)})}}}a.$inject=["$timeout","baSidebarService","baUtil","layoutSizes"],angular.module("BlurAdmin.theme.components").directive("baSidebar",a)}(),function(){"use strict";function a(){var a=[];this.addStaticItem=function(){a.push.apply(a,arguments)},this.$get=["$state","layoutSizes",function(e,t){function o(){function o(){return e.get().filter(function(a){return a.sidebarMeta}).map(function(a){var e=a.sidebarMeta;return{name:a.name,title:a.title,level:(a.name.match(/\./g)||[]).length,order:e.order,icon:e.icon,stateRef:a.name,permissions:a.permissions||[]}}).sort(function(a,e){return 100*(a.level-e.level)+a.order-e.order})}function n(){return window.innerWidth<=t.resWidthCollapseSidebar}function i(){return window.innerWidth<=t.resWidthHideSidebar}var s=n();this.getMenuItems=function(){var e=o(),t=e.filter(function(a){return 0==a.level});return t.forEach(function(a){var t=e.filter(function(e){return 1==e.level&&0===e.name.indexOf(a.name)});a.subMenu=t.length?t:null}),t.concat(a)},this.shouldMenuBeCollapsed=n,this.canSidebarBeHidden=i,this.setMenuCollapsed=function(a){s=a},this.isMenuCollapsed=function(){return s},this.toggleMenuCollapsed=function(){s=!s},this.getAllStateRefsRecursive=function(a){function e(a){a.subMenu&&a.subMenu.forEach(function(a){a.stateRef&&t.push(a.stateRef),e(a)})}var t=[];return e(a),t}}return new o}],this.$get.$inject=["$state","layoutSizes"]}angular.module("BlurAdmin.theme.components").provider("baSidebarService",a)}(),function(){"use strict";function a(a){return{restrict:"A",link:function(e,t){t.on("click",function(t){t.originalEvent.$sidebarEventProcessed=!0,e.$apply(function(){a.toggleMenuCollapsed()})})}}}function e(a){return{restrict:"A",link:function(e,t){t.on("click",function(t){t.originalEvent.$sidebarEventProcessed=!0,a.isMenuCollapsed()||e.$apply(function(){a.setMenuCollapsed(!0)})})}}}function t(){return{restrict:"A",controller:"BaSidebarTogglingItemCtrl"}}function o(a,e,t,o,n){function i(a){return a&&l.some(function(e){return 0==a.name.indexOf(e)})}var s=this,r=s.$$menuItem=a.$eval(t.baSidebarTogglingItem);if(r&&r.subMenu&&r.subMenu.length){s.$$expandSubmenu=function(){console.warn("$$expandMenu should be overwritten by baUiSrefTogglingSubmenu")},s.$$collapseSubmenu=function(){console.warn("$$collapseSubmenu should be overwritten by baUiSrefTogglingSubmenu")};var l=n.getAllStateRefsRecursive(r);s.$expand=function(){s.$$expandSubmenu(),e.addClass("ba-sidebar-item-expanded")},s.$collapse=function(){s.$$collapseSubmenu(),e.removeClass("ba-sidebar-item-expanded")},s.$toggle=function(){e.hasClass("ba-sidebar-item-expanded")?s.$collapse():s.$expand()},i(o.current)&&e.addClass("ba-sidebar-item-expanded"),a.$on("$stateChangeStart",function(a,t){!i(t)&&e.hasClass("ba-sidebar-item-expanded")&&(s.$collapse(),e.removeClass("ba-sidebar-item-expanded"))}),a.$on("$stateChangeSuccess",function(a,t){i(t)&&!e.hasClass("ba-sidebar-item-expanded")&&(s.$expand(),e.addClass("ba-sidebar-item-expanded"))})}}function n(a){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(a,e,t,o){o.$$expandSubmenu=function(){e.slideDown()},o.$$collapseSubmenu=function(){e.slideUp()}}}}function i(a){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(e,t,o,n){t.on("click",function(){a.isMenuCollapsed()?(e.$apply(function(){a.setMenuCollapsed(!1)}),n.$expand()):n.$toggle()})}}}a.$inject=["baSidebarService"],e.$inject=["baSidebarService"],o.$inject=["$scope","$element","$attrs","$state","baSidebarService"],n.$inject=["$state"],i.$inject=["baSidebarService"],angular.module("BlurAdmin.theme.components").directive("baSidebarToggleMenu",a).directive("baSidebarCollapseMenu",e).directive("baSidebarTogglingItem",t).controller("BaSidebarTogglingItemCtrl",o).directive("baUiSrefTogglingSubmenu",n).directive("baUiSrefToggler",i)}(),function(){"use strict";function a(){return{restrict:"E",transclude:!0,templateUrl:"app/theme/components/baWizard/baWizard.html",controllerAs:"$baWizardController",controller:"baWizardCtrl"}}angular.module("BlurAdmin.theme.components").directive("baWizard",a)}(),function(){"use strict";function a(a){function e(){t.progress=(t.tabNum+1)/t.tabs.length*100}var t=this;t.tabs=[],t.tabNum=0,t.progress=0,t.addTab=function(a){a.setPrev(t.tabs[t.tabs.length-1]),t.tabs.push(a),t.selectTab(0)},a.$watch(angular.bind(t,function(){return t.tabNum}),e),t.selectTab=function(a){t.tabs[t.tabNum].submit(),t.tabs[a].isAvailiable()&&(t.tabNum=a,t.tabs.forEach(function(a,e){e==t.tabNum?a.select(!0):a.select(!1)}))},t.isFirstTab=function(){return 0==t.tabNum},t.isLastTab=function(){return t.tabNum==t.tabs.length-1},t.nextTab=function(){t.selectTab(t.tabNum+1)},t.previousTab=function(){t.selectTab(t.tabNum-1)}}a.$inject=["$scope"],angular.module("BlurAdmin.theme.components").controller("baWizardCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",transclude:!0,require:"^baWizard",scope:{form:"="},templateUrl:"app/theme/components/baWizard/baWizardStep.html",link:function(a,e,t,o){function n(e){e?a.selected=!0:a.selected=!1}function i(){a.form&&a.form.$setSubmitted(!0)}function s(){return!a.form||a.form.$valid}function r(){return!c.prevTab||c.prevTab.isComplete()}function l(a){c.prevTab=a}a.selected=!0;var c={title:t.title,select:n,submit:i,isComplete:s,isAvailiable:r,prevTab:void 0,setPrev:l};o.addTab(c)}}}angular.module("BlurAdmin.theme.components").directive("baWizardStep",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"app/theme/components/backTop/backTop.html",controller:function(){$("#backTop").backTop({position:200,speed:100})}}}angular.module("BlurAdmin.theme.components").directive("backTop",a)}(),function(){"use strict";function a(a,e){return{restrict:"E",templateUrl:"app/theme/components/contentTop/contentTop.html",link:function(a){a.$watch(function(){a.activePageTitle=e.current.title})}}}a.$inject=["$location","$state"],angular.module("BlurAdmin.theme.components").directive("contentTop",a)}(),function(){"use strict";function a(a,e){a.users={0:{name:"Vlad"},1:{name:"Kostya"},2:{name:"Andrey"},3:{name:"Nasta"}},a.notifications=[{userId:0,template:"&name posted a new article.",time:"1 min ago"},{userId:1,template:"&name changed his contact information.",time:"2 hrs ago"},{image:"assets/img/shopping-cart.svg",template:"New orders received.",time:"5 hrs ago"},{userId:2,template:"&name replied to your comment.",time:"1 day ago"},{userId:3,template:"Today is &name's birthday.",time:"2 days ago"},{image:"assets/img/comments.svg",template:"New comments on your post.",time:"3 days ago"},{userId:1,template:"&name invited you to join the event.",time:"1 week ago"}],a.messages=[{userId:3,text:"After you get up and running, you can place Font Awesome icons just about...",time:"1 min ago"},{userId:0,text:"You asked, Font Awesome delivers with 40 shiny new icons in version 4.2.",time:"2 hrs ago"},{userId:1,text:"Want to request new icons? Here's how. Need vectors or want to use on the...",time:"10 hrs ago"},{userId:2,text:"Explore your passions and discover new ones by getting involved. Stretch your...",time:"1 day ago"},{userId:3,text:"Get to know who we are - from the inside out. From our history and culture, to the...",time:"1 day ago"},{userId:1,text:"Need some support to reach your goals? Apply for scholarships across a variety of...",time:"2 days ago"},{userId:0,text:"Wrap the dropdown's trigger and the dropdown menu within .dropdown, or...",time:"1 week ago"}],a.getMessage=function(t){var o=t.template;return(t.userId||0===t.userId)&&(o=o.replace("&name","<strong>"+a.users[t.userId].name+"</strong>")),e.trustAsHtml(o)}}a.$inject=["$scope","$sce"],angular.module("BlurAdmin.theme.components").controller("MsgCenterCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"app/theme/components/msgCenter/msgCenter.html",controller:"MsgCenterCtrl"}}angular.module("BlurAdmin.theme.components").directive("msgCenter",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"app/theme/components/pageTop/pageTop.html"}}angular.module("BlurAdmin.theme.components").directive("pageTop",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"app/theme/components/progressBarRound/progressBarRound.html",link:function(e,t,o){function n(){var o=t.find("#loader")[0];o.setAttribute("stroke-dasharray",180*a.getProgress()*Math.PI/100+", 20000"),e.progress=a.getProgress()}e.baProgressDialog=a,e.$watch(function(){return a.getProgress()},n)}}}a.$inject=["baProgressModal"],angular.module("BlurAdmin.theme.components").directive("progressBarRound",a)}(),function(){"use strict";function a(){return{restrict:"EA",scope:{ngModel:"="},templateUrl:"app/theme/components/widgets/widgets.html",replace:!0}}angular.module("BlurAdmin.theme.components").directive("widgets",a)}(),function(){"use strict";function a(a){return function(e){return a.images.root+e}}a.$inject=["layoutPaths"],angular.module("BlurAdmin.theme").filter("appImage",a)}(),function(){"use strict";function a(a){return function(e){return a.images.root+"theme/icon/kameleon/"+e+".svg"}}a.$inject=["layoutPaths"],angular.module("BlurAdmin.theme").filter("kameleonImg",a)}(),function(){"use strict";function a(a){return function(e,t){return t=t||"png",a.images.profile+e+"."+t}}a.$inject=["layoutPaths"],angular.module("BlurAdmin.theme").filter("profilePicture",a)}(),function(){"use strict";function a(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}}angular.module("BlurAdmin.theme").filter("plainText",a)}(),function(){"use strict";function a(){return{templateUrl:"app/theme/inputs/baSwitcher/baSwitcher.html",scope:{switcherStyle:"@",switcherValue:"="}}}angular.module("BlurAdmin.theme.inputs").directive("baSwitcher",a)}(),!function(a){a.fn.backTop=function(e){var t=this,o=a.extend({position:400,speed:500,color:"white"},e),n=o.position,i=o.speed,s=o.color;t.addClass("white"==s?"white":"red"==s?"red":"green"==s?"green":"black"),t.css({right:40,bottom:40,position:"fixed"}),a(document).scroll(function(){var e=a(window).scrollTop();e>=n?t.fadeIn(i):t.fadeOut(i)}),t.click(function(){a("html, body").animate({scrollTop:0},{duration:1200})})}}(jQuery),angular.module("BlurAdmin").run(["$templateCache",function(a){a.put("app/pages/dashboard/dashboard.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span>La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/loader/loader.html",'<div class="line-scale-pulse-out-rapid"><div></div><div></div><div></div><div></div><div></div></div>'),a.put("app/pages/auth/login/login.html",'<div ng-controller="LoginController as ctrl" class="utils_pages"><div class="col-xs-12 pt-24"><div class="panel panel-default panel-big-shadow"><div class="row row-flex"><div class="col-xs-12 col-md-6"><div class="div1-login"><div class="div-left"><div class="text-center" style="padding:24px 0 24px 0;"><a href="/"><img style="max-height: 130px; margin-top: 3px;" src="assets/img/fundacion/logo_blanco_small.png"></a></div><div class="text-center"><h4>¡Hola de nuevo!</h4><br><div class="text-center"><span>Para poder iniciar sesión en el sistema debes formar parte del equipo de colaboradores de La Fundación Talita Kum.</span><br><br><span>Si ya eres colaborador y no tienes credenciales, por favor, solicítalas con el administrador del sistema para poder tener acceso al mismo.</span></div></div></div></div></div><div class="col-xs-12 col-md-6"><div class="panel-body pt-24"><div class="row"><div class="col-xs-12 col-md-offset-1 col-md-10"><main class="auth-main"><div class="auth-block text-center"><h3>Ingresa aquí tus credenciales...</h3><br><span>Para continuar debes iniciar sesión</span><br><br><form class="form-horizontal" ng-submit="ctrl.login()"><div class="form-group ph-16"><div class="div-input-icon"><input type="email" autofocus="" class="form-control" placeholder="Correo electrónico" ng-model="ctrl.account.username"> <i class="icon-input fa fa-envelope"></i></div></div><div class="form-group ph-16"><div class="div-input-icon"><input type="password" class="form-control" placeholder="Contraseña" ng-model="ctrl.account.password"> <i class="icon-input fa fa-lock"></i></div></div><div class="form-group ph-16"><br><button type="submit" class="btn btn-custom btn-default btn-auth" ng-disabled="ctrl.loading"><span class="fa fa-sign-in fa-fw fa-lg"></span> <strong>INGRESAR AHORA</strong></button></div></form></div></main></div></div></div></div></div></div></div></div><style type="text/css">\n\n    html {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    body {\n        /* color: #333;\n        background-position: center; */\n        background-image: url(\'assets/img/fundacion/pattern1.png\');\n        background-size: 300px;\n        max-width: 1600px;\n    }\n    .div1-login {\n        background: url(\'assets/img/fundacion/psico1.jpeg\') center bottom repeat;\n    }\n    .btn-custom {\n        padding: 8px 24px;\n    }\n\n</style>'),a.put("app/pages/caja/templates/aperturar_caja.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Aperturar caja</strong></h2></div><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.save()"><div class="row"><div class="col-xs-4"><div class="form-group" style="margin-bottom: 0px !important;"><label>Cierre anterior:</label><br><label class="label-input"><strong>{{ (cierre_anterior || 0) | currency : "Q " : 2 }}</strong></label></div></div><div class="col-xs-8"><div class="form-group"><label>Efectivo de apertura (Caja):</label> <span class="text-danger field-required">*</span><div class="input-group"><span class="input-group-addon addon-left input-group-addon-success">Q</span> <input class="form-control with-success-addon" type="number" placeholder="0.00" autofocus="" step="1" ng-model="ctrl.total_apertura_form"></div></div></div></div><div class="text-center" style="padding-top: 16px;"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Aperturar caja</strong></button></div></form></div></div></div>'),a.put("app/pages/caja/templates/caja.dialogo.apertura.html",'<div style="margin: 32px;"><div class="row text-center"><div class="col-xs-12"><div class="col-xs-12 text-center" style="font-size:1.75em;"><span class="fa fa-question-circle-o fa-fw fa-5x"></span></div><div class="col-xs-12"><h3>¿Aperturar caja?</h3><span style="font-size: 1.25em;">La caja será aperturada con una cantidad monetaria de</span> <strong style="font-size: 1.25em;">{{ (total_apertura || 0) | currency : "Q " : 2 }}</strong></div><div class="col-xs-12" style="margin-top:32px;"><button class="btn btn-md btn-danger" style="font-size:1.15em; margin-right: 3px;" ng-click="closeThisDialog(0)"><span class="fa fa-times fa-fw"></span> <strong>No, aún no</strong></button> <button class="btn btn-md btn-success" style="font-size:1.15em; margin-left: 3px;" ng-click="confirm(1)"><span class="fa fa-check fa-fw"></span> <strong>Sí, aperturar</strong></button></div></div></div></div>'),a.put("app/pages/caja/templates/caja.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CajaController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><div style="background-color: #009A40;" class="alert bg-danger animated zoomIn" ng-if="user.id && user.caja_activa"><h4>LA CAJA SE ENCUENTRA ACTUALMENTE ABIERTA</h4><strong>Por lo tanto, no es posible aperturarla nuevamente hasta que cierre la misma.</strong></div><div class="alert bg-primary animated zoomIn" ng-if="user.id && !user.caja_activa"><h4>LA CAJA SE ENCUENTRA ACTUALMENTE CERRADA</h4><strong>Puede aperturar la caja ahora mismo.</strong></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-click="ctrl.aperturarCaja()" ng-disabled="ctrl.loading" ng-if="user.id && !user.caja_activa"><span class="fa fa-fw fa-archive"></span> <strong>Aperturar caja</strong></button> <button class="btn btn-danger" ng-click="ctrl.reporteMovimientos()" ng-disabled="ctrl.loading"><span class="mdi mdi-file-document fa-fw"></span> <strong>Reporte de movimientos de caja</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar por colaborador" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="panel panel-default mb12"><div class="panel-body"><div class="input-demo radio-demo row"><span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.estado" ng-change="ctrl.search()" ng-value="null"> <span>Todas</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.estado" ng-change="ctrl.search()" ng-value="ctrl.ESTADOS_CAJA[0].id"> <span>Aperturadas</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.estado" ng-change="ctrl.search()" ng-value="ctrl.ESTADOS_CAJA[1].id"> <span>Cerradas</span></label></span></div></div></div><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de aperturas y cierres de caja</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="min-width:220px;">Colaborador(a)</th><th style="min-width:144px;">Fecha de apertura</th><th style="min-width:144px;">Fecha de cierre</th><th class="text-right">Total aperturado</th><th class="text-right">Total de cierre</th><th>Estado</th><th class="text-right">Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.colaborador.persona.persona || "---" }}</td><td>{{ item.fecha_creacion | date: "dd/MMMM/yyyy hh:mm a" }}</td><td>{{ (item.fecha_cierre | date: "dd/MMMM/yyyy hh:mm a") || "---" }}</td><td class="text-right"><strong>{{ item.total_apertura | currency: "Q " : 2 }}</strong></td><td class="text-right"><strong>{{ (item.total_cierre | currency: "Q " : 2) || "---" }}</strong></td><td><strong class="text-success" ng-if="item.estado == ctrl.ESTADOS_CAJA[0].id">APERTURADA</strong> <strong class="text-danger" ng-if="item.estado == ctrl.ESTADOS_CAJA[1].id">CERRADA</strong></td><td class="text-right" style="width:180px;"><div class="btn-group"><a href="/api/aperturas_cierres_caja/pdf_estado_cuenta_caja/?id={{ item.id }}" target="_blank" class="btn btn-success" title="Estado de cuenta de caja" ng-if="item.estado == ctrl.ESTADOS_CAJA[1].id"><span class="fa fa-file-text"></span></a> <a href="/api/aperturas_cierres_caja/pdf_cierre_caja/?id={{ item.id }}" target="_blank" class="btn btn-danger" title="Informe de cierre de caja" ng-if="item.estado == ctrl.ESTADOS_CAJA[1].id"><span class="fa fa-print"></span></a> <button class="btn btn-primary" title="Cierre de caja" ng-click="ctrl.detallesCierreCaja(item)" ng-if="item.estado == ctrl.ESTADOS_CAJA[1].id || ctrl.loading || item.loadingIngEng"><span class="fa fa-bars"></span></button> <button class="btn btn-warning" title="Movimientos de caja" ui-sref="movimientos_caja({ id: item.id })"><span class="fa fa-arrow-right"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/caja/templates/cerrar_caja.dialog.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Cierre de caja</strong></h2></div><div class="col-xs-12"><div class="row"><div class="col-xs-12"><div class="form-group" style="margin-bottom: 0px !important;"><label>Colaborador que manejó la caja:</label><br><label class="label-input"><span>{{ apertura_cierre_caja_info.colaborador.persona.persona }}</span></label></div></div><div class="col-xs-12 col-sm-6"><div class="form-group" style="margin-bottom: 0px !important;"><label>Fecha de apertura:</label><br><label class="label-input"><span>{{ apertura_cierre_caja_info.fecha_creacion | date : "dd/MMM/yyyy hh:mm a" }}</span></label></div></div><div class="col-xs-12 col-sm-6"><div class="form-group" style="margin-bottom: 0px !important;"><label>Fecha de cierre:</label><br><label class="label-input"><span>{{ apertura_cierre_caja_info.fecha_cierre | date : "dd/MMM/yyyy hh:mm a" }}</span></label></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group" style="margin-bottom: 0px !important;"><label>Monto inicial:</label><br><label class="label-input"><strong>{{ apertura_cierre_caja_info.total_apertura | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Ingresos:</label><br><label class="label-input"><strong class="text-success">{{ ingresos_egresos_info.ingresos | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Egresos:</label><br><label class="label-input"><strong class="text-danger">{{ (ingresos_egresos_info.egresos * -1) | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Efectivo (sistema):</label><br><label class="label-input"><strong>{{ apertura_cierre_caja_info.total_actual | currency : "Q " : 2 }}</strong></label></div></div><div class="col-xs-8"><div class="form-group"><label>Efectivo (Caja):</label> <label class="label-input"><strong>{{ apertura_cierre_caja_info.total_cierre | currency : "Q " : 2 }}</strong></label></div><div class="form-group"><label>Notas:</label> <label class="label-input" style="min-height: 167px"><span>{{ apertura_cierre_caja_info.notas || "---" }}</span></label></div></div></div><div class="row"><div class="col-xs-12 text-center"><div><a href="/api/aperturas_cierres_caja/pdf_estado_cuenta_caja/?id={{ apertura_cierre_caja_info.id }}" target="_blank" class="btn btn-success" title="Estado de cuenta de caja"><span class="fa fa-fw fa-file-text"></span> <strong>Estado de cuenta</strong></a> <a href="/api/aperturas_cierres_caja/pdf_cierre_caja/?id={{ apertura_cierre_caja_info.id }}" target="_blank" class="btn btn-danger" title="Informe de cierre de caja"><span class="fa fa-fw fa-print"></span> <strong>Boleta de cierre</strong></a></div></div></div></div></div></div>'),a.put("app/pages/caja/templates/cerrar_caja.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Cerrar caja</strong></h2></div><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.save()"><div class="row"><div class="col-xs-4"><div class="form-group" style="margin-bottom: 0px !important;"><label>Monto inicial:</label><br><label class="label-input"><strong>{{ ctrl.apertura_cierre_caja.total_apertura | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Ingresos:</label><br><label class="label-input"><strong class="text-success">{{ ctrl.ingresos_egresos.ingresos | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Egresos:</label><br><label class="label-input"><strong class="text-danger">{{ (ctrl.ingresos_egresos.egresos * -1) | currency : "Q " : 2 }}</strong></label></div><div class="form-group" style="margin-bottom: 0px !important;"><label>Efectivo (sistema):</label><br><label class="label-input"><strong>{{ ctrl.apertura_cierre_caja.total_actual | currency : "Q " : 2 }}</strong></label></div></div><div class="col-xs-8"><div class="form-group"><label>Efectivo (Caja):</label> <span class="text-danger field-required">*</span><div class="input-group"><span class="input-group-addon addon-left input-group-addon-success">Q</span> <input class="form-control with-success-addon" type="number" placeholder="0.00" autofocus="" step="1" min="0" ng-model="ctrl.total_cierre_form"></div></div><div class="form-group"><label>Notas:</label> <textarea style="height: 172px !important;" class="form-control" placeholder="Puedes escribir aquí algunas observaciones" name="notas" ng-model="ctrl.apertura_cierre_caja.notas">\n                            </textarea></div></div></div><div class="text-center" style="padding-top: 16px;"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Cerrar caja</strong></button></div></form></div></div></div>'),
a.put("app/pages/caja/templates/movimientos_caja.create.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Registrar movimiento</strong></h2></div><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.save()"><div class="form-group"><label>Cantidad:</label> <span class="text-danger field-required">*</span><div class="input-group"><span class="input-group-addon addon-left input-group-addon-success">Q</span> <input class="form-control with-success-addon" type="number" placeholder="0.00" autofocus="" step="1" min="0" ng-disabled="!ctrl.activar_cantidad" ng-model="ctrl.movimiento_caja.cantidad"></div></div><div class="form-group"><label>Tipo de movimiento:</label> <span class="text-danger field-required">*</span><div class="input-demo radio-demo"><div class="col-xs-12" style="margin-bottom: 8px;background-color: #FFF;border-radius: 4px;border: 1px solid #ccc; padding-top: 4px; padding-bottom: 4px;"><div class="col-xs-6"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.movimiento_caja.tipo" ng-change="ctrl.changeType()" ng-value="10"> <span>Ingreso</span></label></div><div class="col-xs-6"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.movimiento_caja.tipo" ng-change="ctrl.changeType()" ng-disabled="!ctrl.activar_egreso" ng-value="20"> <span>Egreso</span></label></div></div></div></div><div class="form-group"><label>Tipo de documento:</label><div class="input-demo radio-demo"><div class="col-xs-12" style="margin-bottom: 8px;background-color: #FFF;border-radius: 4px;border: 1px solid #ccc; padding-top: 4px; padding-bottom: 4px;"><div class="col-xs-6"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.movimiento_caja.tipo_documento" ng-value="10"> <span>Recibo</span></label></div><div class="col-xs-6"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-disabled="ctrl.movimiento_caja.tipo != 20" ng-model="ctrl.movimiento_caja.tipo_documento" ng-value="20"> <span>Factura</span></label></div></div></div></div><div class="form-group"><label>No. de documento:</label><div class="input-group"><span class="input-group-addon addon-left input-group-addon-success">#</span> <input ng-disabled="!ctrl.movimiento_caja.tipo_documento" class="form-control with-success-addon" type="text" placeholder="No. de documento" ng-model="ctrl.movimiento_caja.num_documento"></div></div><div class="form-group"><label>Concepto:</label> <span class="text-danger field-required">*</span> <textarea class="form-control" placeholder="Concepto del movimiento" name="concepto" ng-model="ctrl.movimiento_caja.concepto">\n                    </textarea></div><div class="text-center"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Guardar</strong></button></div></form></div></div></div>'),a.put("app/pages/caja/templates/movimientos_caja.dialog.html",'<div class="m16"><div class="row"><div class="col-xs-12"><h2><strong>Detalles del movimiento</strong></h2></div><div class="col-xs-12" style="font-size: 16px;"><div class="area-info" style="margin-bottom: 12px;"><div style="margin-bottom: 6px;"><strong>Cantidad:</strong></div><div class="mb2 ml8" style="margin-bottom: 6px;"><strong>{{ (movimiento_caja.cantidad | currency : \'Q \' : 2) || "---" }}</strong></div></div><div class="area-info" style="margin-bottom: 12px;"><div style="margin-bottom: 6px;"><strong>Tipo de movimiento:</strong></div><div class="mb2 ml8" style="margin-bottom: 6px;"><div class="text-success" ng-if="movimiento_caja.tipo == 10"><span class="fa fa-fw fa-arrow-up fa-lg"></span> <strong>INGRESO</strong></div><div class="text-danger" ng-if="movimiento_caja.tipo == 20"><span class="fa fa-fw fa-arrow-down fa-lg"></span> <strong>EGRESO</strong></div></div></div><div class="area-info" style="margin-bottom: 12px;"><div style="margin-bottom: 6px;"><strong>Tipo de documento:</strong></div><div class="mb2 ml8" style="margin-bottom: 6px;"><div ng-if="movimiento_caja.tipo_documento == 10"><span>RECIBO</span></div><div ng-if="movimiento_caja.tipo_documento == 20"><span>FACTURA</span></div><div ng-if="!movimiento_caja.tipo_documento"><span>---</span></div></div></div><div class="area-info" style="margin-bottom: 12px;"><div style="margin-bottom: 6px;"><strong>No. de documento:</strong></div><div class="mb2 ml8" style="margin-bottom: 6px;"><span>{{ movimiento_caja.num_documento || "---" }}</span></div></div><div class="area-info" style="margin-bottom: 12px;"><div style="margin-bottom: 6px;"><strong>Concepto:</strong></div><div class="mb2 ml8" style="margin-bottom: 6px;"><span>{{ movimiento_caja.concepto || "---" }}</span></div></div></div></div></div>'),a.put("app/pages/caja/templates/movimientos_caja.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="MovimientosCajaController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><div class="alert bg-danger animated zoomIn" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[0].id && user.id != ctrl.apertura_cierre_caja.colaborador.id"><h4>ESTA APERTURA DE CAJA PERTENECE A OTRO COLABORADOR</h4><strong>Por lo tanto, no es posible realizar cambios en la misma.</strong></div><div class="panel popular-app animated zoomIn"><div class="popular-app-cost row"><div class="col-xs-6 col-md-2">Colaborador(a):</div><div class="col-xs-6 col-md-10"><strong>{{ ctrl.apertura_cierre_caja.colaborador.persona.persona }}</strong></div></div><div class="popular-app-cost row"><div class="col-xs-6 col-md-2">Estado actual:</div><div class="col-xs-6 col-md-4"><strong class="text-success" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[0].id">Aperturada</strong> <strong class="text-danger" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[1].id">Cerrada</strong> <strong ng-if="!ctrl.apertura_cierre_caja.estado">---</strong></div><div class="col-xs-6 col-md-4 text-right">Saldo actual:</div><div class="col-xs-6 col-md-2 text-right"><strong>{{ (ctrl.apertura_cierre_caja.total_actual || 0) | currency: "Q " : 2 }}</strong></div></div><div class="popular-app-info row"><div class="col-xs-3 text-center"><div style="font-size: 14px;padding-bottom: 4px;" class="info-label">Fecha de apertura</div><div>{{ ctrl.apertura_cierre_caja.fecha_creacion | date : "dd/MM/yyyy hh:mm a" }}</div></div><div class="col-xs-3 text-center"><div style="font-size: 14px;padding-bottom: 4px;" class="info-label">Total de apertura:</div><div>{{ (ctrl.apertura_cierre_caja.total_apertura | currency : "Q " : 2) || "---" }}</div></div><div class="col-xs-3 text-center"><div style="font-size: 14px;padding-bottom: 4px;" class="info-label">Fecha de cierre</div><div>{{ (ctrl.apertura_cierre_caja.fecha_cierre | date : "dd/MM/yyyy hh:mm a") || "---" }}</div></div><div class="col-xs-3 text-center"><div style="font-size: 14px;padding-bottom: 4px;" class="info-label">Total de cierre:</div><div>{{ (ctrl.apertura_cierre_caja.total_cierre | currency : "Q " : 2) || "---" }}</div></div></div></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-click="ctrl.registrarMovimiento()" ng-disabled="ctrl.loading" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[0].id && user.id == ctrl.apertura_cierre_caja.colaborador.id"><span class="fa fa-fw fa-archive"></span> <strong>Registrar movimiento</strong></button> <button class="btn btn-danger" ng-click="ctrl.cerrarCaja()" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[0].id && user.id == ctrl.apertura_cierre_caja.colaborador.id" ng-disabled="ctrl.loading || ctrl.loadingIngEng"><span class="fa fa-fw fa-clock-o"></span> <strong>Cerrar caja</strong></button> <button class="btn btn-primary" ng-click="ctrl.detallesCierreCaja()" ng-if="ctrl.apertura_cierre_caja.estado == ctrl.ESTADOS_CAJA[1].id" ng-disabled="ctrl.loading || ctrl.loadingIngEng"><span class="fa fa-fw fa-file-text"></span> <strong>Detalles del cierre de caja</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar por concepto" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de movimientos de caja</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="width:175px;">Fecha</th><th style="width:100px;">Hora</th><th style="min-width:220px;">Concepto</th><th style="width:120px;">Tipo</th><th class="text-right" style="width:120px;">Cantidad</th><th class="text-right">Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.fecha_creacion | date: "dd/MMMM/yyyy" }}</td><td>{{ item.fecha_creacion | date: "hh:mm a" }}</td><td>{{ item.concepto || "---" }}</td><td><span style="font-size: 18px;" class="text-success fa fa-fw fa-arrow-up" ng-if="item.tipo == 10"></span> <strong class="text-success" ng-if="item.tipo == 10">INGRESO</strong> <span style="font-size: 18px;" class="text-danger fa fa-fw fa-arrow-down" ng-if="item.tipo == 20"></span> <strong class="text-danger" ng-if="item.tipo == 20">EGRESO</strong></td><td class="text-right"><strong>{{ item.cantidad | currency: "Q " : 2 }}</strong></td><td class="text-right" style="width:80px;"><div class="btn-group"><button class="btn btn-primary" title="Ver movimiento" ng-click="ctrl.detallesMovimiento(item)"><span class="fa fa-bars"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/caja/templates/reporte.mov.dialog.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Reporte de todos los movimientos caja</strong></h2></div><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.generate()"><div class="row"><div class="col-xs-12"><div class="row"><div class="col-md-6"><div class="form-group"><label>Fecha inicial:</label> <span class="text-danger field-required">*</span><p class="input-group"><input class="form-control" type="text" uib-datepicker-popup="{{ctrl.format}}" ng-model="ctrl.reporte.desde" is-open="ctrl.openedFechaDesde" datepicker-options="ctrl.dateOptions" close-text="Cerrar" clear-text="Limpiar" current-text="Hoy"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="ctrl.openFechaDesde($event)"><span class="fa fa-calendar"></span></button></span></p></div></div><div class="col-md-6"><div class="form-group"><label>Fecha final:</label> <span class="text-danger field-required">*</span><p class="input-group"><input class="form-control" type="text" uib-datepicker-popup="{{ctrl.format}}" ng-model="ctrl.reporte.hasta" is-open="ctrl.openedFechaHasta" datepicker-options="ctrl.dateOptions" close-text="Cerrar" clear-text="Limpiar" current-text="Hoy"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="ctrl.openFechaHasta($event)"><span class="fa fa-calendar"></span></button></span></p></div></div></div></div></div><div class="text-center" style="padding-top: 16px;"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Generar reporte</strong></button></div></form></div></div></div>'),a.put("app/pages/casos/templates/casos.cerrar.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><form ng-submit="ctrl.save()"><div class="panel panel-primary"><div class="panel-heading"><strong>Cierre del caso</strong></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>No. de sesiones:</strong></div><div class="mb2 ml8"><span>{{ ctrl.sesiones }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Fecha de inicio:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.fecha_creacion | date: \'dd/MMMM/yyyy\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Fecha de culminación:</strong></div><div class="mb2 ml8"><span ng-if="ctrl.caso.cerrado">{{ ctrl.caso.fecha_cierre | date: \'dd/MMMM/yyyy\' }}</span> <span ng-if="!ctrl.caso.cerrado">{{ ctrl.fecha | date: \'dd/MMMM/yyyy\' }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Fecha de nacimiento:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.fecha_nacimiento | date : \'dd/MMMM/yyyy\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Edad:</strong></div><div class="mb2 ml8"><span>{{ ctrl.edad || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.motivo || "---" }}</span></div></div></div></div><div class="row" ng-if="!ctrl.caso.cerrado"><div class="col-xs-12"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Diagnóstico:</label> <textarea name="diagnostico" ng-model="ctrl.caso.diagnostico" class="form-control" placeholder="Usar clasificación del DSM-IV">\n                                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Plan terapéutico:</label> <textarea name="plan_terapeutico" ng-model="ctrl.caso.plan_terapeutico" class="form-control" placeholder="Plan terapéutico.">\n                                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Instrumentos utilizados:</label> <textarea name="instrumentos" ng-model="ctrl.caso.instrumentos" class="form-control" placeholder="Instrumentos utilizados.">\n                                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Resultados:</label> <textarea name="resultados" ng-model="ctrl.caso.resultados" class="form-control" placeholder="Resultados.">\n                                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Pronóstico:</label> <textarea name="pronostico" ng-model="ctrl.caso.pronostico" class="form-control" placeholder="Pronóstico.">\n                                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Observaciones:</label> <textarea name="observaciones" ng-model="ctrl.caso.observaciones" class="form-control" placeholder="Observaciones.">\n                                        </textarea></div></div></div></div><div class="row" ng-if="ctrl.caso.cerrado"><div class="col-xs-12"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Diagnóstico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.diagnostico || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Plan terapéutico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.plan_terapeutico || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Instrumentos utilizados:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.instrumentos || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Resultados:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.resultados || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Pronóstico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.pronostico || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Observaciones:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.observaciones || "---" }}</span></div></div></div></div></div></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ng-click="closeThisDialog(0)" type="button" ng-if="!ctrl.caso.cerrado"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit" ng-if="!ctrl.caso.cerrado"><span class="fa fa-fw fa-folder"></span> <strong>Cerrar caso</strong></button> <a href="/api/casos/pdf_cierre_caso/?id={{ ctrl.caso.id }}" target="_blank" class="btn btn-danger" type="button" ng-if="ctrl.caso.cerrado"><span class="fa fa-fw fa-download"></span> <strong>Descargar en PDF</strong></a> <button class="btn btn-success" ng-click="ctrl.abrirCaso()" type="button" ng-if="ctrl.caso.cerrado"><span class="fa fa-fw fa-folder-open"></span> <strong>Abrir caso</strong></button></div></div></form></div></div>'),a.put("app/pages/casos/templates/casos.create.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CasoCreateController as ctrl"><div class="row"><div class="col-xs-12"><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-show="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/casos/templates/form.html\'"></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="casos()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/casos/templates/casos.edit.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CasoEditController as ctrl"><div class="row"><div class="col-xs-12"><div class="alert bg-primary animated zoomIn" ng-if="ctrl.caso.id && ctrl.caso.cerrado"><h4>EL CASO ESTÁ CERRADO</h4><strong>Por lo tanto, la edición de este formulario se encuentra desactivada.</strong></div><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = !ctrl.panelPacienteOculto"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/casos/templates/form.html\'"></div></div><div class="panel-footer text-center" ng-show="!ctrl.disabled"><button class="btn btn-danger" ui-sref="casos()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/casos/templates/casos.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CasoController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ui-sref="casos_create()"><span class="fa fa-fw fa-plus"></span> <strong>Registrar caso para un nuevo paciente</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="panel panel-default mb12"><div class="panel-body"><div class="input-demo radio-demo row"><span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.cerrado" ng-change="ctrl.search()" ng-value="null"> <span>Todos</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.cerrado" ng-change="ctrl.search()" ng-value="false"> <span>Abiertos</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.cerrado" ng-change="ctrl.search()" ng-value="true"> <span>Cerrados</span></label></span></div></div></div><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="background-color: #1D2531;" class="text-center text-default2" colspan="2"><span>Paciente</span></th><th style="background-color: #202C3A;" class="text-center text-default2" colspan="4"><span>Caso</span></th></tr><tr><th style="min-width:220px;">Nombre</th><th>Móvil</th><th style="min-width:144px;">Motivo</th><th style="min-width:144px;">Fecha</th><th>Estado</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.paciente.persona.persona }}</td><td>{{ item.paciente.persona.celular || "---" }}</td><td>{{ item.motivo || "---" }}</td><td>{{ item.fecha_creacion | date: \'dd/MMM/yyyy\' }}</td><td><strong style="color:#2E7D32;" ng-if="!item.cerrado">Abierto</strong> <strong style="color:#FE0000;" ng-if="item.cerrado">Cerrado</strong></td><td style="width:220px;"><div class="btn-group"><button ng-click="ctrl.goToUrl(\'/api/casos/pdf_cierre_caso/?id=\' + item.id)" ng-disabled="!item.cerrado" class="btn btn-danger" title="Descargar cierre de caso en PDF"><span class="fa fa-download"></span></button> <button class="btn btn-primary" title="Cierre del caso" ng-click="ctrl.status(item, true)"><span class="fa fa-folder"></span></button> <button class="btn btn-success" ng-disabled="!item.genograma" title="Ver genograma" ng-click="ctrl.viewImg(item.genograma)"><span class="fa ion-network rotate180 f16"></span></button> <button class="btn btn-info" title="Notas evolutivas" ui-sref="casos_notas({ id: item.id })"><span class="fa fa-list-ul"></span></button> <button class="btn btn-warning" title="Ver caso" ui-sref="casos_edit({ id: item.id })"><span class="fa fa-arrow-right"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/casos/templates/casos.notas.dialog.dt.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><form><div class="panel panel-primary"><div class="panel-heading"><strong>Nota evolutiva No. {{ ctrl.nota.id }}</strong></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Fecha:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.fecha_creacion | date: \'dd/MMM/yyyy\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.caso.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.caso.paciente.persona.celular || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.caso.motivo || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Varió:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.vario || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Tarea anterior:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.tarea_anterior || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Avance terapéutico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.avance_terapeutico || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Eventos relevantes de la semana:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.eventos_relevantes || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Comentario significativo del paciente:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.comentario_paciente || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Tarea para la próxima sesión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.tarea_proxima || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Observaciones:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.observaciones || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-6"><div class="area-info"><div class="mb2"><strong>Notas:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.notas || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="panel panel-default"><div class="panel-heading text-center"><strong>Evolución de síntomas.</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="text-align: center !important; width: 50%;">Psicológicos</th><th style="text-align: center !important; width: 50%;">Físicos</th></tr></thead><tbody><tr><td><span>{{ ctrl.nota.evolucion_psicologica }}</span></td><td><span>{{ ctrl.nota.evolucion_fisica }}</span></td></tr></tbody></table></div></div></div></div></div></div></div></form></div></div>'),
a.put("app/pages/casos/templates/casos.notas.dialog.edit.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form ng-submit="ctrl.save()"><div class="panel panel-primary"><div class="panel-heading"><strong>Editar nota evolutiva. Sesión No. {{ ctrl.nota.num_sesion }}</strong></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>No. de sesión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.num_sesion }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Fecha:</strong></div><div class="mb2 ml8"><span>{{ ctrl.fecha | date: \'dd/MMM/yyyy\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Nombre:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.persona.celular || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.motivo || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Varió:</label> <textarea name="vario" ng-model="ctrl.nota.vario" class="form-control" placeholder="Varió.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Tarea anterior:</label> <textarea name="tarea_anterior" ng-model="ctrl.nota.tarea_anterior" class="form-control" placeholder="Tarea anterior.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Avance terapéutico:</label> <textarea name="avance_terapeutico" ng-model="ctrl.nota.avance_terapeutico" class="form-control" placeholder="Avance terapéutico.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Eventos relevantes de la semana:</label> <textarea name="eventos_relevantes" ng-model="ctrl.nota.eventos_relevantes" class="form-control" placeholder="Eventos relevantes de la semana.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Comentario significativo del paciente:</label> <textarea name="comentario_paciente" ng-model="ctrl.nota.comentario_paciente" class="form-control" placeholder="Comentario significativo del paciente.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Tarea para la próxima sesión:</label> <textarea name="tarea_proxima" ng-model="ctrl.nota.tarea_proxima" class="form-control" placeholder="Tarea para la próxima sesión.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Observaciones:</label> <textarea name="observaciones" ng-model="ctrl.nota.observaciones" class="form-control" placeholder="Observaciones.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Notas:</label> <textarea name="notas" ng-model="ctrl.nota.notas" class="form-control" placeholder="Notas.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="panel panel-default"><div class="panel-heading text-center"><strong>Evolución de síntomas.</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="text-align: center !important; width: 50%;">Psicológicos</th><th style="text-align: center !important; width: 50%;">Físicos</th></tr></thead><tbody><tr><td><textarea name="evolucion_psicologica" ng-model="ctrl.nota.evolucion_psicologica" class="form-control" placeholder="Evolución psicológica.">\n                                                            </textarea></td><td><textarea name="evolucion_fisica" ng-model="ctrl.nota.evolucion_fisica" class="form-control" placeholder="Evolución física.">\n                                                            </textarea></td></tr></tbody></table></div></div></div></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ng-click="closeThisDialog(0)" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div>'),a.put("app/pages/casos/templates/casos.notas.dialog.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form ng-submit="ctrl.save()"><div class="panel panel-primary"><div class="panel-heading"><strong>Agregar nueva nota evolutiva. Sesión No. {{ ctrl.nota.num_sesion }}</strong></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>No. de sesión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.nota.num_sesion }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Fecha:</strong></div><div class="mb2 ml8"><span>{{ ctrl.fecha | date: \'dd/MMM/yyyy\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Nombre:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-3"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.paciente.persona.celular || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb2 ml8"><span>{{ ctrl.caso.motivo || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Varió:</label> <textarea name="vario" ng-model="ctrl.nota.vario" class="form-control" placeholder="Varió.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Tarea anterior:</label> <textarea name="tarea_anterior" ng-model="ctrl.nota.tarea_anterior" class="form-control" placeholder="Tarea anterior.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Avance terapéutico:</label> <textarea name="avance_terapeutico" ng-model="ctrl.nota.avance_terapeutico" class="form-control" placeholder="Avance terapéutico.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Eventos relevantes de la semana:</label> <textarea name="eventos_relevantes" ng-model="ctrl.nota.eventos_relevantes" class="form-control" placeholder="Eventos relevantes de la semana.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Comentario significativo del paciente:</label> <textarea name="comentario_paciente" ng-model="ctrl.nota.comentario_paciente" class="form-control" placeholder="Comentario significativo del paciente.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Tarea para la próxima sesión:</label> <textarea name="tarea_proxima" ng-model="ctrl.nota.tarea_proxima" class="form-control" placeholder="Tarea para la próxima sesión.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Observaciones:</label> <textarea name="observaciones" ng-model="ctrl.nota.observaciones" class="form-control" placeholder="Observaciones.">\n                                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Notas:</label> <textarea name="notas" ng-model="ctrl.nota.notas" class="form-control" placeholder="Notas.">\n                                    </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="panel panel-default"><div class="panel-heading text-center"><strong>Evolución de síntomas.</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="text-align: center !important; width: 50%;">Psicológicos</th><th style="text-align: center !important; width: 50%;">Físicos</th></tr></thead><tbody><tr><td><textarea name="evolucion_psicologica" ng-model="ctrl.nota.evolucion_psicologica" class="form-control" placeholder="Evolución psicológica.">\n                                                            </textarea></td><td><textarea name="evolucion_fisica" ng-model="ctrl.nota.evolucion_fisica" class="form-control" placeholder="Evolución física.">\n                                                            </textarea></td></tr></tbody></table></div></div></div></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ng-click="closeThisDialog(0)" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div>'),a.put("app/pages/casos/templates/casos.notas.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CasoNotasController as ctrl"><div class="row"><div class="col-xs-12"><div class="alert bg-primary animated zoomIn" ng-if="ctrl.caso.cerrado"><h4>EL CASO ESTÁ CERRADO</h4><strong>Por lo tanto, las tareas de agregar y editar notas evolutivas se encuentran desactivadas.</strong></div><div class="mb16 rel"><mi-loader ng-show="ctrl.loading_item"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Vista previa del caso</strong> <span class="rel pl16"><button style="position: absolute; top: -3px; padding: 3px 10px;" ng-click="ctrl.gotoCaso()" class="btn btn-success btn-sm" type="button"><strong>Ver caso completo</strong> <span class="fa fa-fw fa-arrow-right"></span></button></span></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.caso.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.caso.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.caso.paciente.persona.celular || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.caso.motivo || "---" }}</span></div></div></div></div></div></div></div></div></div><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-click="ctrl.create()" ng-disabled="!ctrl.caso.id || ctrl.caso.cerrado"><span class="fa fa-fw fa-plus"></span> <strong>Nueva nota evolutiva</strong></button> <button class="btn btn-danger" ng-click="ctrl.createCita()" ng-disabled="!ctrl.caso.id || ctrl.caso.cerrado"><span class="fa fa-fw fa-clock-o"></span> <strong>Reservar cita</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de notas evolutivas</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="width: 50px;">No.</th><th style="min-width:175px;">Fecha</th><th>Observaciones</th><th>Notas</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.num_sesion }}</td><td style="width:175px;">{{ item.fecha_creacion | date: \'dd/MMM/yyyy\' }}</td><td>{{ item.observaciones || \'---\' }}</td><td>{{ item.notas || \'---\' }}</td><td style="width:140px;"><div class="btn-group"><button class="btn btn-primary" title="Ver detalles" ng-click="ctrl.details(item)"><span class="fa fa-bars"></span></button> <button class="btn btn-warning" title="Editar nota" ng-disabled="ctrl.caso.cerrado" ng-click="ctrl.edit(item)"><span class="fa fa-pencil"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/casos/templates/form.html",'<div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelMotivoOculto = !ctrl.panelMotivoOculto"><strong>2. Motivo de la consulta</strong> <span title="Contraer" ng-if="!ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelMotivoOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><label>a) Con las propias palabras del informante:</label><span class="text-danger field-required">*</span> <textarea ng-disabled="ctrl.disabled" id="motivo" name="motivo" ng-model="ctrl.caso.motivo" class="form-control" placeholder="Con las propias palabras del informante" required="">\n                    </textarea> <span ng-show="ctrl.form.motivo.$dirty && ctrl.form.motivo.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelMotivoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelHistoriaActualOculto = !ctrl.panelHistoriaActualOculto"><strong>3. Historia del problema actual</strong> <span title="Contraer" ng-if="!ctrl.panelHistoriaActualOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelHistoriaActualOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelHistoriaActualOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6"><label>a) Fecha de inicio, duración y evento desencadenante:</label> <textarea ng-disabled="ctrl.disabled" name="fecha_inicio_duracion_evento" ng-model="ctrl.caso.notas.historia_actual.fecha_inicio_duracion_evento" class="form-control" placeholder="Fecha de inicio, duración y evento desencadenante">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>b) Factores Precipitantes (Estresores):</label> <textarea ng-disabled="ctrl.disabled" name="factores_precipitantes" ng-model="ctrl.caso.notas.historia_actual.factores_precipitantes" class="form-control" placeholder="Factores Precipitantes (Estresores)">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-12"><label>c) Impacto de la enfermedad en su ambiente familiar y social:</label> <textarea ng-disabled="ctrl.disabled" name="impacto_enfermedad" ng-model="ctrl.caso.notas.historia_actual.impacto_enfermedad" class="form-control" placeholder="Impacto de la enfermedad en su ambiente familiar y social">\n                    </textarea></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelHistoriaActualOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelHistoriaClinicaOculto = !ctrl.panelHistoriaClinicaOculto"><strong>4. Historia clínica o antecedentes:</strong> <span title="Contraer" ng-if="!ctrl.panelHistoriaClinicaOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelHistoriaClinicaOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelHistoriaClinicaOculto"><div class="row"><div class="col-xs-12"><div class="panel panel-default"><div class="panel-body ph0"><div class="col-xs-12 mb12"><strong>a) Personales no patológicos:</strong></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Historia prenatal:</label> <input ng-disabled="ctrl.disabled" type="text" name="historia_prenatal" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.historia_prenatal" class="form-control" placeholder="Historia prenatal"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Desarrollo psicomotriz:</label> <input ng-disabled="ctrl.disabled" type="text" name="desarrollo_psicomotriz" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.desarrollo_psicomotriz" class="form-control" placeholder="Desarrollo psicomotriz"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Desenvolvimiento escolar:</label> <input ng-disabled="ctrl.disabled" type="text" name="desenvolvimiento_escolar" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.desenvolvimiento_escolar" class="form-control" placeholder="Desenvolvimiento escolar"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Adolescencia:</label> <input ng-disabled="ctrl.disabled" type="text" name="adolescencia" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.adolescencia" class="form-control" placeholder="Adolescencia"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Historia Psico-Sexual:</label> <input ng-disabled="ctrl.disabled" type="text" name="historia_psico_sexual" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.historia_psico_sexual" class="form-control" placeholder="Historia Psico-Sexual"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Adultez:</label> <input ng-disabled="ctrl.disabled" type="text" name="vida_social" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.vida_social" class="form-control" placeholder="Amigos, deportes, etc."></div></div></div></div></div><div class="col-xs-12"><div class="panel panel-default"><div class="panel-body ph0"><div class="col-xs-12 mb12"><strong>b) Personales patológicos:</strong></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Historia Médica:</label> <input ng-disabled="ctrl.disabled" type="text" name="historia_medica" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.historia_medica" class="form-control" placeholder="Diagnóstico, fecha y tratamiento"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Trastornos mentales:</label> <input ng-disabled="ctrl.disabled" type="text" name="trastornos_familiares" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.trastornos_familiares" class="form-control" placeholder="Antecedentes"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Otros:</label> <input ng-disabled="ctrl.disabled" type="text" name="otros" ng-model="ctrl.paciente.notas_psicologicas.historia_clinica.otros" class="form-control" placeholder="Escriba"></div></div></div></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelHistoriaClinicaOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelHistoriaFamiliarOculto = !ctrl.panelHistoriaFamiliarOculto"><strong>5. Historia familiar</strong> <span title="Contraer" ng-if="!ctrl.panelHistoriaFamiliarOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelHistoriaFamiliarOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelHistoriaFamiliarOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12"><textarea ng-disabled="ctrl.disabled" name="historia_familiar" ng-model="ctrl.paciente.notas_psicologicas.historia_familiar" class="form-control" placeholder="Involucra vida familiar durante la infancia y/o adolescencia. Constitución de la familia; relación conyugal de los padres, situación sociocultural familiar.">\n                    </textarea></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelHistoriaFamiliarOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelExamenMentalOculto = !ctrl.panelExamenMentalOculto"><strong>6. Examen mental o evaluación semiológica</strong> <span title="Contraer" ng-if="!ctrl.panelExamenMentalOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelExamenMentalOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelExamenMentalOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Apariencia:</label> <textarea ng-disabled="ctrl.disabled" name="apariencia" ng-model="ctrl.caso.notas.examen_mental.apariencia" class="form-control" placeholder="Apariencia">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Actitud:</label> <textarea ng-disabled="ctrl.disabled" name="actitud" ng-model="ctrl.caso.notas.examen_mental.actitud" class="form-control" placeholder="Cooperación, desconfianza, seducción, hostilidad.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Conducta:</label> <textarea ng-disabled="ctrl.disabled" name="conducta" ng-model="ctrl.caso.notas.examen_mental.conducta" class="form-control" placeholder="Coordinación, manierismos, gesticulación, agitación.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Lenguaje:</label> <textarea ng-disabled="ctrl.disabled" name="lenguaje" ng-model="ctrl.caso.notas.examen_mental.lenguaje" class="form-control" placeholder="Monotonía, verborrea, neologismos, volumen.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Curso y contenido del pensamiento:</label> <textarea ng-disabled="ctrl.disabled" name="curso_contenido_pensamiento" ng-model="ctrl.caso.notas.examen_mental.curso_contenido_pensamiento" class="form-control" placeholder="Bloqueo, desilusiones, obsesiones, compulsiones, producción, continuidad.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Percepción:</label> <textarea ng-disabled="ctrl.disabled" name="percepcion" ng-model="ctrl.caso.notas.examen_mental.percepcion" class="form-control" placeholder="Alucinaciones, despersonalización, sentido de la realidad.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Humor:</label> <textarea ng-disabled="ctrl.disabled" name="humor" ng-model="ctrl.caso.notas.examen_mental.humor" class="form-control" placeholder="Feliz, expansivo, eufórico, deprimido, triste, congruente.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Afecto:</label> <textarea ng-disabled="ctrl.disabled" name="afecto" ng-model="ctrl.caso.notas.examen_mental.afecto" class="form-control" placeholder="Lábil, plano, adecuado, deprimido, triste, congruente.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Inteligencia o información CI:</label> <textarea ng-disabled="ctrl.disabled" name="inteligencia" ng-model="ctrl.caso.notas.examen_mental.inteligencia" class="form-control" placeholder="Inteligencia o información CI">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Orientación:</label> <textarea ng-disabled="ctrl.disabled" name="orientacion" ng-model="ctrl.caso.notas.examen_mental.orientacion" class="form-control" placeholder="Tiempo, lugar, persona.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Memoria:</label> <textarea ng-disabled="ctrl.disabled" name="memoria" ng-model="ctrl.caso.notas.examen_mental.memoria" class="form-control" placeholder="Remota, pasada, reciente.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Control de impulsos:</label> <textarea ng-disabled="ctrl.disabled" name="control_impulsos" ng-model="ctrl.caso.notas.examen_mental.control_impulsos" class="form-control" placeholder="Control de impulsos.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Capacidad de juicio crítico y toma de decisiones:</label> <textarea ng-disabled="ctrl.disabled" name="capacidad_juicio_critico" ng-model="ctrl.caso.notas.examen_mental.capacidad_juicio_critico" class="form-control" placeholder="Capacidad de juicio crítico y toma de decisiones.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Capacidad de "Insight":</label> <textarea ng-disabled="ctrl.disabled" name="capacidad_insight" ng-model="ctrl.caso.notas.examen_mental.capacidad_insight" class="form-control" placeholder="Introvisión.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Confiabilidad:</label> <textarea ng-disabled="ctrl.disabled" name="confiabilidad" ng-model="ctrl.caso.notas.examen_mental.confiabilidad" class="form-control" placeholder="Confiabilidad.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelExamenMentalOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelFuentesSecundariasOculto = !ctrl.panelFuentesSecundariasOculto"><strong>7. Fuentes secundarias de información</strong> <span title="Contraer" ng-if="!ctrl.panelFuentesSecundariasOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelFuentesSecundariasOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelFuentesSecundariasOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><label>Informes médicos:</label> <textarea ng-disabled="ctrl.disabled" name="informes_medicos" ng-model="ctrl.caso.notas.fuentes_secundarias.informes_medicos" class="form-control" placeholder="Informes médicos.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Test psicométricos e informe de resultados:</label> <textarea ng-disabled="ctrl.disabled" name="test_psicometricos_informe_resultados" ng-model="ctrl.caso.notas.fuentes_secundarias.test_psicometricos_informe_resultados" class="form-control" placeholder="Test psicométricos e informe de resultados.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Test proyectivos interpretación de resultados:</label> <textarea ng-disabled="ctrl.disabled" name="test_proyectivos_interpretacion_resultados" ng-model="ctrl.caso.notas.fuentes_secundarias.test_proyectivos_interpretacion_resultados" class="form-control" placeholder="Test proyectivos interpretación de resultados.">\n                    </textarea></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelFuentesSecundariasOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelDiscernimientoDiagnosticoOculto = !ctrl.panelDiscernimientoDiagnosticoOculto"><strong>8. Discernimiento para el diagnóstico</strong> <span class="f14 ml8">(Criterios, diagnósticos; semiólogico y psicodinámico)</span> <span title="Contraer" ng-if="!ctrl.panelDiscernimientoDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelDiscernimientoDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelDiscernimientoDiagnosticoOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><label>Criterios para el diagnóstico:</label> <textarea ng-disabled="ctrl.disabled" name="criterios_diagnostico" ng-model="ctrl.caso.notas.discernimiento_diag.criterios_diagnostico" class="form-control" placeholder="Criterios para el diagnóstico.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Diagnóstico semiológico:</label> <textarea ng-disabled="ctrl.disabled" name="diagnostico_semiologico" ng-model="ctrl.caso.notas.discernimiento_diag.diagnostico_semiologico" class="form-control" placeholder="Signos, gestos, actitudes.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Diagnóstico psicodinámico:</label> <textarea ng-disabled="ctrl.disabled" name="diagnostico_psicodinamico" ng-model="ctrl.caso.notas.discernimiento_diag.diagnostico_psicodinamico" class="form-control" placeholder="Distinguir lo hereditario y lo ambiental.">\n                    </textarea></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelDiscernimientoDiagnosticoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelObjetivoTerapeuticoOculto = !ctrl.panelObjetivoTerapeuticoOculto"><strong>9. Objetivo terapéutico</strong> <span title="Contraer" ng-if="!ctrl.panelObjetivoTerapeuticoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelObjetivoTerapeuticoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelObjetivoTerapeuticoOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><label>A corto plazo:</label> <textarea ng-disabled="ctrl.disabled" name="corto_plazo" ng-model="ctrl.caso.notas.objetivo_terapeutico.corto_plazo" class="form-control" placeholder="A corto plazo.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>A mediano plazo:</label> <textarea ng-disabled="ctrl.disabled" name="mediano_plazo" ng-model="ctrl.caso.notas.objetivo_terapeutico.mediano_plazo" class="form-control" placeholder="A mediano plazo.">\n                    </textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>A largo plazo:</label> <textarea ng-disabled="ctrl.disabled" name="largo_plazo" ng-model="ctrl.caso.notas.objetivo_terapeutico.largo_plazo" class="form-control" placeholder="A largo plazo.">\n                    </textarea></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelObjetivoTerapeuticoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelEvaluacionPronosticaOculto = !ctrl.panelEvaluacionPronosticaOculto"><strong>10. Evaluación pronóstica</strong> <span title="Contraer" ng-if="!ctrl.panelEvaluacionPronosticaOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelEvaluacionPronosticaOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelEvaluacionPronosticaOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-6"><label>Bueno:</label> <input ng-disabled="ctrl.disabled" type="text" name="bueno" ng-model="ctrl.caso.notas.evaluacion_pronostica.bueno" class="form-control" placeholder="Bueno."></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Reservado:</label> <input ng-disabled="ctrl.disabled" type="text" name="reservado" ng-model="ctrl.caso.notas.evaluacion_pronostica.reservado" class="form-control" placeholder="Reservado."></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelEvaluacionPronosticaOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelGenogramaOculto = ctrl.showPanel(ctrl.panelGenogramaOculto)"><strong>12. Genograma</strong> <span title="Contraer" ng-if="!ctrl.panelGenogramaOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelGenogramaOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelGenogramaOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12"><div class="text-center img-container"><div ng-if="!ctrl.genograma"><span class="fa fa-picture-o fa-5x" style="font-size: 175px;"></span></div><a href="" ng-if="ctrl.genograma" ng-click="ctrl.viewImg(ctrl.genograma)"><img style="height: 250px; border-radius: 1%;" ngf-src="ctrl.genograma"></a></div><div class="text-center"><label class="btn btn-default" for="genogramInput" style="cursor: pointer;" ng-show="!ctrl.disabled"><span class="fa fa-upload fa-fw"></span> <strong>Subir genograma</strong></label> <input id="genogramInput" style="opacity: 0; position: absolute; z-index: -1;" class="form-control" filestyle="" type="file" accept="image/*" data-class-button="btn btn-default" data-class-input="form-control" data-button-text="Subir imagen"></div></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelGenogramaOculto = ctrl.showPanel(ctrl.panelGenogramaOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div>'),
a.put("app/pages/citas/templates/citas.dialog.colaboradores.html",'<div class="col-xs-12 col-sm-6 col-md-7 col-lg-7" style="padding-bottom: 17px"></div><div class="col-xs-12 col-sm-6 col-md-5 col-lg-5"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary"><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Nombre</th><th>Teléfono</th><th>Móvil</th><th>Profesión</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.colaboradores"><td>{{ item.persona.persona || "---" }}</td><td>{{ item.persona.telefono || "---" }}</td><td>{{ item.persona.celular || "---" }}</td><td>{{ item.profesion.profesion || "---" }}</td><td><div class="btn-group"><button wz-next="" ng-click="ctrl.seleccionarColaborador(item)" class="btn btn-primary" title="Seleccionar"><span class="fa fa-check"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.details.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="panel panel-primary"><div class="panel-heading"><strong>Cita</strong></div><div class="panel-body"><div class="row mt4"><div class="col-xs-12"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Colaborador:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.colaborador.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Profesión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.colaborador.profesion.profesion || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.colaborador.persona.celular || "---" }}</span></div></div></div></div></div><div class="row mt4"><div class="col-xs-12"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Paciente:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="row mt4"><div class="col-xs-12"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Fecha:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.fecha_cita | date: \'dd/MMMM/yyyy HH:mm\' }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Estado:</strong></div><div class="mb2 ml8"><strong style="color:#2E7D32;" ng-if="!ctrl.cita.anulada">Activa</strong> <strong style="color:#FE0000;" ng-if="ctrl.cita.anulada">Anulada</strong></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Descripción:</strong></div><div class="mb2 ml8"><span>{{ ctrl.cita.descripcion || "---" }}</span></div></div></div></div></div></div></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.fecha.html",'<div class="row mt4"><div class="col-xs-12"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Colaborador:</strong></div><div class="mb2 ml8"><span>{{ ctrl.colaborador.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Profesión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.colaborador.profesion.profesion || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.colaborador.persona.celular || "---" }}</span></div></div></div></div></div><div class="row mt4"><div class="col-xs-12"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Paciente:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="row mh0 mt8 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Fecha (día, mes, año):</label><div class="row"><div class="col-xs-3"><select class="form-control" name="dias" ng-model="ctrl.fecha.dias" ng-options="option.value for option in ctrl.dias track by option.id"></select></div><div class="col-xs-5"><select class="form-control" name="meses" ng-model="ctrl.fecha.meses" ng-options="option.value for option in ctrl.meses track by option.id"></select></div><div class="col-xs-4"><select class="form-control" name="anios" ng-model="ctrl.fecha.anios" ng-options="option.value for option in ctrl.anios track by option.id"></select></div></div></div><div class="col-xs-12 col-sm-12 col-md-offset-2 col-md-4"><label>Horas y minutos:</label><div class="row"><div class="col-xs-6"><select class="form-control" name="hora" ng-model="ctrl.fecha.hora" ng-options="option.value for option in ctrl.horas track by option.id"></select></div><div class="col-xs-6"><select class="form-control" name="minuto" ng-model="ctrl.fecha.minuto" ng-options="option.value for option in ctrl.minutos track by option.id"></select></div></div></div></div><div class="row mh0 mt8 form-group"><div class="col-xs-12"><label>Descripción:</label> <textarea rows="3" ng-model="ctrl.descripcion" class="form-control" placeholder="Escriba una descripción"></textarea></div></div>'),a.put("app/pages/citas/templates/citas.dialog.grid.pacientes.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="panel panel-primary"><div class="panel-heading"><strong>Reservar cita</strong></div><div class="panel-body" style="padding: 0;"><wizard indicators-position="top" name="wizard"><wz-step wz-title="COLABORADOR" wz-order="1"><div class="div-wizard"><div ng-include="\'app/pages/citas/templates/citas.dialog.colaboradores.html\'"></div></div></wz-step><wz-step wz-title="FECHA" wz-order="3"><div class="div-wizard"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.fecha.html\'"></div><div class="col-xs-6 text-left mb16 mt8"><button wz-previous="" class="btn btn-primary"><span class="fa fa-fw fa-arrow-left"></span> <strong>Volver</strong></button></div><div class="col-xs-6 text-right mb16 mt8"><button ng-click="ctrl.save()" class="btn btn-primary"><span class="fa fa-fw fa-check"></span> <strong>Reservar cita</strong></button></div></div></div></wz-step></wizard></div></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.grid.pacientes.users.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="panel panel-primary"><div class="panel-heading"><strong>Reservar cita</strong></div><div class="panel-body" style="padding: 0;"><div class="div-wizard"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.fecha.html\'"></div><div class="col-xs-6 text-left mb16 mt8"></div><div class="col-xs-6 text-right mb16 mt8"><button ng-click="ctrl.save()" class="btn btn-primary"><span class="fa fa-fw fa-check"></span> <strong>Reservar cita</strong></button></div></div></div></div></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="panel panel-primary"><div class="panel-heading"><strong>Reservar cita</strong></div><div class="panel-body" style="padding: 0;"><wizard indicators-position="top" name="wizard"><wz-step wz-title="COLABORADOR" wz-order="1"><div class="div-wizard"><div ng-include="\'app/pages/citas/templates/citas.dialog.colaboradores.html\'"></div></div></wz-step><wz-step wz-title="PACIENTE" wz-order="2"><div class="div-wizard col-xs-12"><uib-tabset active="active"><uib-tab index="0" heading="Buscar paciente"><div class="row" ng-include="\'app/pages/citas/templates/citas.dialog.pacientes.html\'"></div></uib-tab><uib-tab ng-click="ctrl.resetPaciente()" index="1" heading="Nuevo paciente"><div class="row"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.pac.form.html\'"></div><div class="col-xs-6 text-left mt8"><button wz-previous="" class="btn btn-primary"><span class="fa fa-fw fa-arrow-left"></span> <strong>Volver</strong></button></div><div class="col-xs-6 text-right mt8"><button ng-disabled="!ctrl.paciente.persona.persona" wz-next="" ng-click="ctrl.seleccionarPaciente()" class="btn btn-primary"><strong>Siguiente</strong> <span class="fa fa-fw fa-arrow-right"></span></button></div></div></div></uib-tab></uib-tabset></div></wz-step><wz-step wz-title="FECHA" wz-order="3"><div class="div-wizard"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.fecha.html\'"></div><div class="col-xs-6 text-left mb16 mt8"><button wz-previous="" class="btn btn-primary"><span class="fa fa-fw fa-arrow-left"></span> <strong>Volver</strong></button></div><div class="col-xs-6 text-right mb16 mt8"><button ng-click="ctrl.save()" class="btn btn-primary"><span class="fa fa-fw fa-check"></span> <strong>Reservar cita</strong></button></div></div></div></wz-step></wizard></div></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.pac.form.html",'<div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Nombre completo:</label><span class="text-danger field-required">*</span> <input type="text" autofocus="" name="persona" ng-model="ctrl.paciente.persona.persona" class="form-control" placeholder="Nombre completo" required=""></div><div class="col-xs-12 col-sm-12 col-md-6"><label>No. de DPI (CUI):</label> <input type="text" name="cui" ng-model="ctrl.paciente.persona.cui" class="form-control" ui-mask="9999-99999-9999"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Teléfono:</label> <input type="text" name="telefono" ng-model="ctrl.paciente.persona.telefono" class="form-control" ui-mask="9999-9999"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Móvil:</label> <input type="text" name="celular" ng-model="ctrl.paciente.persona.celular" class="form-control" ui-mask="9999-9999"></div></div>'),a.put("app/pages/citas/templates/citas.dialog.pacientes.html",'<div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-7" style="padding-bottom: 17px"></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-5"><form autocomplete="off" ng-submit="ctrl.searchPac()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.paginationPac.search" ng-change="ctrl.searchPac()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div><div class="col-xs-12"><div class="rel"><mi-loader ng-show="ctrl.loadingPac"></mi-loader><div class="panel panel-primary"><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Nombre</th><th>CUI</th><th>Teléfono</th><th>Móvil</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.pacientes"><td>{{ item.persona.persona }}</td><td>{{ item.persona.cui }}</td><td>{{ item.persona.telefono || "---" }}</td><td>{{ item.persona.celular || "---" }}</td><td><div class="btn-group"><button wz-next="" ng-click="ctrl.seleccionarPaciente(item)" class="btn btn-primary" title="Seleccionar"><span class="fa fa-check"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.paginationPac.total_items" ng-model="ctrl.paginationPac.current_page" max-size="ctrl.paginationPac.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed_pac()"></div></div></div></div>'),a.put("app/pages/citas/templates/citas.dialog.users.html",'<div class="row" style="font-size: 14px; margin-top: 24px;"><div class="col-md-12"><div class="panel panel-primary"><div class="panel-heading"><strong>Reservar cita</strong></div><div class="panel-body" style="padding: 0;"><wizard indicators-position="top" name="wizard"><wz-step wz-title="PACIENTE" wz-order="1"><div class="div-wizard col-xs-12"><uib-tabset active="active"><uib-tab index="0" heading="Buscar paciente"><div class="row" ng-include="\'app/pages/citas/templates/citas.dialog.pacientes.html\'"></div></uib-tab><uib-tab ng-click="ctrl.resetPaciente()" index="1" heading="Nuevo paciente"><div class="row"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.pac.form.html\'"></div><div class="col-xs-6 text-left mt8"></div><div class="col-xs-6 text-right mt8"><button ng-disabled="!ctrl.paciente.persona.persona" wz-next="" ng-click="ctrl.seleccionarPaciente()" class="btn btn-primary"><strong>Siguiente</strong> <span class="fa fa-fw fa-arrow-right"></span></button></div></div></div></uib-tab></uib-tabset></div></wz-step><wz-step wz-title="FECHA" wz-order="2"><div class="div-wizard"><div class="col-xs-12"><div ng-include="\'app/pages/citas/templates/citas.dialog.fecha.html\'"></div><div class="col-xs-6 text-left mb16 mt8"><button wz-previous="" class="btn btn-primary"><span class="fa fa-fw fa-arrow-left"></span> <strong>Volver</strong></button></div><div class="col-xs-6 text-right mb16 mt8"><button ng-click="ctrl.save()" class="btn btn-primary"><span class="fa fa-fw fa-check"></span> <strong>Reservar cita</strong></button></div></div></div></wz-step></wizard></div></div></div></div>'),a.put("app/pages/citas/templates/citas.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CitasController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-click="ctrl.create()"><span class="fa fa-fw fa-plus"></span> <strong>Reservar cita</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="panel panel-default mb12"><div class="panel-body"><div class="input-demo radio-demo row"><span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.anulada" ng-change="ctrl.search()" ng-value="null"> <span>Todas</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.anulada" ng-change="ctrl.search()" ng-value="false"> <span>Activas</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.anulada" ng-change="ctrl.search()" ng-value="true"> <span>Anuladas</span></label></span></div></div></div><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="background-color: #202C3A;" class="text-center text-default2" colspan="3"><span>Colaborador</span></th><th style="background-color: #1D2531;" class="text-center text-default2" colspan="2"><span>Paciente</span></th><th style="background-color: #202C3A;" class="text-center text-default2" colspan="4"><span>Cita</span></th></tr><tr><th style="min-width:220px;">Nombre</th><th>Móvil</th><th>Profesión</th><th style="min-width:220px;">Nombre</th><th>Móvil</th><th style="min-width:144px;">Fecha y hora</th><th>Estado</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.colaborador.persona.persona }}</td><td>{{ item.colaborador.persona.celular || "---" }}</td><td>{{ item.colaborador.profesion.profesion || "---" }}</td><td>{{ item.paciente.persona.persona }}</td><td>{{ item.paciente.persona.celular || "---" }}</td><td>{{ item.fecha_cita | date: \'dd/MMM/yyyy HH:mm\' }}</td><td><span style="color:#2E7D32;" title="Activa" ng-if="!item.anulada" class="icon-grid fa fa-fw fa-lg fa-check-circle"></span> <span style="color:#FE0000;" title="Anulada" ng-if="item.anulada" class="icon-grid fa fa-fw fa-lg fa-times-circle"></span></td><td style="width:141px;"><div class="btn-group"><button class="btn btn-primary" title="Detalles" ng-click="ctrl.details(item)"><span class="fa fa-bars"></span></button> <button ng-if="!item.anulada" class="btn btn-danger" title="Anular" ng-click="ctrl.delete(item)"><span class="fa fa-ban"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/archivos.consulta.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ArchivosConsultaController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><label class="btn btn-primary" style="background-color: #125587;" for="fileInput"><span class="fa fa-upload fa-fw"></span> <strong>Adjuntar archivo</strong></label> <input id="fileInput" style="opacity: 0; position: absolute; z-index: -1;" class="form-control" filestyle="" type="file" data-class-button="btn btn-default" data-class-input="form-control" data-button-text="Adjuntar archivo"></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-body rel" style="min-height: 400px;"><div class="text-center" style="margin-top: 36px;" ng-if="!ctrl.loading && !ctrl.array.length"><i class="mdi mdi-file-multiple icon-empty"></i><h2>No hay archivos</h2><h5>Puedes adjuntar cualquier tipo de archivo para esta consulta.</h5><label class="btn btn-primary" style="background-color: #125587;" for="fileInput"><span class="mdi mdi-cloud-upload mdi-18px" style="padding: 0 4px;"></span> <strong>Adjunta un archivo ahora</strong></label></div><div class="row" ng-if="ctrl.array.length >= 0"><div class="col-xs-12 col-sm-6 col-md-2" ng-repeat="item in ctrl.array track by $index"><div title="{{ item.name }}" ng-click="ctrl.viewFile(item)" class="rel div-file panel-file text-center"><div class="button-close-file" title="Eliminar" ng-click="ctrl.delete(item);$event.stopPropagation()"><span class="fa fa-trash fa-fw fa-lg"></span></div><i ng-if="item.type != \'image\'" class="{{ item.icon }} custom-icon-file"></i> <img class="image-file" ng-if="item.type == \'image\'" ngf-src="item.archivo"> <span class="text-file">{{ item.name }}</span></div></div></div></div></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/consultas.create.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ConsultaCreateController as ctrl"><div class="row"><div class="col-xs-12"><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-show="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/consultas/templates/form.html\'"></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="consultas()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/consultas.edit.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ConsultaEditController as ctrl"><div class="row"><div class="col-xs-12"><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-show="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/consultas/templates/form.html\'"></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="consultas()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/consultas.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ConsultaController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ui-sref="consultas_create()"><span class="fa fa-fw fa-plus"></span> <strong>Registrar consulta para un nuevo paciente</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="background-color: #1D2531;" class="text-center text-default2" colspan="3"><span>Paciente</span></th><th style="background-color: #202C3A;" class="text-center text-default2" colspan="2"><span>Consulta</span></th></tr><tr><th style="min-width:144px;">Fecha</th><th style="min-width:220px;">Nombre</th><th>Móvil</th><th>Motivo</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.fecha_creacion | date: \'dd/MMM/yyyy\' }}</td><td>{{ item.paciente.persona.persona }}</td><td>{{ item.paciente.persona.celular || "---" }}</td><td>{{ item.motivo || "---" }}</td><td style="width:220px;"><div class="btn-group"><a href="/api/consultas/pdf_expediente/?id={{ item.id }}" target="_blank" class="btn btn-danger" title="Descargar expediente en PDF"><span class="fa fa-download"></span></a> <a href="/api/consultas/pdf_tratamiento/?id={{ item.id }}" target="_blank" class="btn btn-info" title="Imprimir tratamiento"><span class="fa fa-print"></span></a> <button class="btn btn-success" title="Ver reconsultas" ui-sref="reconsultas({ id: item.id })"><span class="fa fa-list-ul"></span></button> <button class="btn btn-primary" title="Ver archivos adjuntos" ui-sref="archivos_consulta({ id: item.id })"><span class="mdi mdi-file-multiple"></span></button> <button class="btn btn-warning" title="Ver consulta" ui-sref="consultas_edit({ id: item.id })"><span class="fa fa-arrow-right"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/form.html",'<div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelMotivoOculto = !ctrl.panelMotivoOculto"><strong>2. Motivo de la consulta</strong> <span title="Contraer" ng-if="!ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelMotivoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>a) Con las propias palabras del informante:</label><span class="text-danger field-required">*</span> <textarea id="motivo" name="motivo" ng-model="ctrl.consulta.motivo" class="form-control" placeholder="Con las propias palabras del informante" required="">\n                        </textarea> <span ng-show="ctrl.form.motivo.$dirty && ctrl.form.motivo.$error.required" class="text-danger">Este campo es requerido.</span></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>b) Historia de la enfermedad actual:</label> <textarea id="historia" name="historia" ng-model="ctrl.consulta.notas.historia" class="form-control" placeholder="Historia de la enfermedad actual.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelMotivoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelAntecedentesOculto = !ctrl.panelAntecedentesOculto"><strong>3. Antecedentes</strong> <span title="Contraer" ng-if="!ctrl.panelAntecedentesOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelAntecedentesOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelAntecedentesOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Médicos:</label> <textarea id="medicos" name="medicos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.medicos" class="form-control" placeholder="Antecedentes médicos.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Quirúrgicos:</label> <textarea id="quirurgicos" name="quirurgicos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.quirurgicos" class="form-control" placeholder="Antecedentes quirúrgicos.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Traumáticos:</label> <textarea id="traumaticos" name="traumaticos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.traumaticos" class="form-control" placeholder="Antecedentes traumáticos.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Alérgicos:</label> <textarea id="alergicos" name="alergicos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.alergicos" class="form-control" placeholder="Antecedentes alérgicos.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Vicios y manías:</label> <textarea id="vicios" name="vicios" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.vicios" class="form-control" placeholder="Vicios y manías.">\n                        </textarea></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Pediátricos:</label> <textarea id="pediatricos" name="pediatricos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.pediatricos" class="form-control" placeholder="Antecedentes pediátricos.">\n                        </textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Familiares:</label> <textarea id="familiares" name="familiares" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.familiares" class="form-control" placeholder="Antecedentes familiares.">\n                        </textarea></div></div><div class="col-xs-12"><div class="panel panel-default"><div class="panel-heading"><strong>Antecedentes ginecológicos</strong></div><div class="panel-body row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>FUR:</label> <input type="text" id="fur" name="fur" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.ginecologicos.fur" class="form-control" placeholder="FUR."></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Gestas:</label> <input type="number" id="gestas" name="gestas" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.ginecologicos.gestas" class="form-control" placeholder="Gestas."></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Partos:</label> <input type="number" id="partos" name="partos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.ginecologicos.partos" class="form-control" placeholder="Partos."></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Abortos:</label> <input type="number" id="abortos" name="abortos" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.ginecologicos.abortos" class="form-control" placeholder="Abortos."></div><div class="col-xs-12 col-sm-12 col-md-4"><label>PF:</label> <input type="text" id="pf" name="pf" ng-model="ctrl.paciente.notas_medicas.notas.antecedentes.ginecologicos.pf" class="form-control" placeholder="PF."></div></div></div></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelAntecedentesOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelExamenFisicoOculto = !ctrl.panelExamenFisicoOculto"><strong>4. Examen físico</strong> <span title="Contraer" ng-if="!ctrl.panelExamenFisicoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelExamenFisicoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelExamenFisicoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Examen físico:</label> <textarea id="examen_fisico" name="examen_fisico" ng-model="ctrl.consulta.notas.examen_fisico" class="form-control" placeholder="Examen físico.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelExamenFisicoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPlanDiagnosticoOculto = !ctrl.panelPlanDiagnosticoOculto"><strong>5. Plan diagnóstico</strong> <span title="Contraer" ng-if="!ctrl.panelPlanDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPlanDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelPlanDiagnosticoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Plan diagnóstico:</label> <textarea id="plan_diagnostico" name="plan_diagnostico" ng-model="ctrl.consulta.notas.plan_diagnostico" class="form-control" placeholder="Plan diagnóstico.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPlanDiagnosticoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelImpresionClinicaOculto = !ctrl.panelImpresionClinicaOculto"><strong>6. Impresión clínica</strong> <span title="Contraer" ng-if="!ctrl.panelImpresionClinicaOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelImpresionClinicaOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelImpresionClinicaOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Impresión clínica:</label> <textarea id="impresion_clinica" name="impresion_clinica" ng-model="ctrl.consulta.notas.impresion_clinica" class="form-control" placeholder="Impresión clínica.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelImpresionClinicaOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelTratamientoOculto = !ctrl.panelTratamientoOculto"><strong>7. Tratamiento</strong> <span title="Contraer" ng-if="!ctrl.panelTratamientoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelTratamientoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelTratamientoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><text-angular id="tratamiento" name="tratamiento" ng-model="ctrl.consulta.notas.tratamiento"></text-angular></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelTratamientoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div>'),
a.put("app/pages/consultas/templates/form.reconsultas.html",'<div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelMotivoOculto = !ctrl.panelMotivoOculto"><strong>2. Motivo de la reconsulta</strong> <span title="Contraer" ng-if="!ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelMotivoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelMotivoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>a) Con las propias palabras del informante:</label><span class="text-danger field-required">*</span> <textarea id="motivo" name="motivo" ng-model="ctrl.reconsulta.motivo" class="form-control" placeholder="Con las propias palabras del informante" required="">\n                        </textarea> <span ng-show="ctrl.form.motivo.$dirty && ctrl.form.motivo.$error.required" class="text-danger">Este campo es requerido.</span></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>b) Historia de la enfermedad actual:</label> <textarea id="historia" name="historia" ng-model="ctrl.reconsulta.notas.historia" class="form-control" placeholder="Historia de la enfermedad actual.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelMotivoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelExamenFisicoOculto = !ctrl.panelExamenFisicoOculto"><strong>2. Examen físico</strong> <span title="Contraer" ng-if="!ctrl.panelExamenFisicoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelExamenFisicoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelExamenFisicoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Examen físico:</label> <textarea id="examen_fisico" name="examen_fisico" ng-model="ctrl.reconsulta.notas.examen_fisico" class="form-control" placeholder="Examen físico.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelExamenFisicoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPlanDiagnosticoOculto = !ctrl.panelPlanDiagnosticoOculto"><strong>3. Plan diagnóstico</strong> <span title="Contraer" ng-if="!ctrl.panelPlanDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPlanDiagnosticoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelPlanDiagnosticoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Plan diagnóstico:</label> <textarea id="plan_diagnostico" name="plan_diagnostico" ng-model="ctrl.reconsulta.notas.plan_diagnostico" class="form-control" placeholder="Plan diagnóstico.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPlanDiagnosticoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelImpresionClinicaOculto = !ctrl.panelImpresionClinicaOculto"><strong>4. Impresión clínica</strong> <span title="Contraer" ng-if="!ctrl.panelImpresionClinicaOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelImpresionClinicaOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelImpresionClinicaOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><label>Impresión clínica:</label> <textarea id="impresion_clinica" name="impresion_clinica" ng-model="ctrl.reconsulta.notas.impresion_clinica" class="form-control" placeholder="Impresión clínica.">\n                        </textarea></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelImpresionClinicaOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div><div class="row mh0 form-group"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelTratamientoOculto = !ctrl.panelTratamientoOculto"><strong>5. Tratamiento</strong> <span title="Contraer" ng-if="!ctrl.panelTratamientoOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelTratamientoOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-if="!ctrl.panelTratamientoOculto"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><text-angular id="tratamiento" name="tratamiento" ng-model="ctrl.reconsulta.notas.tratamiento"></text-angular></div></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelTratamientoOculto = true" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div></div>'),a.put("app/pages/consultas/templates/reconsultas.create.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ReconsultaCreateController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-show="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/consultas/templates/form.reconsultas.html\'"></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="consultas()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/reconsultas.edit.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ReconsultaEditController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="panel panel-primary"><div class="panel-heading secondary-btn" ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)"><strong>1. Información personal del paciente</strong> <span title="Contraer" ng-if="!ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-up"></span> <span title="Expandir" ng-if="ctrl.panelPacienteOculto" class="right fa fa-fw fa-lg fa-angle-down"></span></div><div class="panel-body" ng-show="ctrl.panelPacienteOculto"><div class="row"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div></div></div></div><div class="panel-body" ng-if="!ctrl.panelPacienteOculto"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div><div class="col-xs-12 text-center"><span ng-click="ctrl.panelPacienteOculto = ctrl.showPanel(ctrl.panelPacienteOculto)" class="secondary-btn fa fa-fw fa-3x fa-angle-up" title="Contraer"></span></div></div></div></div><div ng-include="\'app/pages/consultas/templates/form.reconsultas.html\'"></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="consultas()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-plus"></span> <strong>Guardar</strong></button></div></div></form></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/consultas/templates/reconsultas.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ReconsultaController as ctrl"><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading_item"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Vista previa de la consulta</strong> <span class="rel pl16"><button style="position: absolute; top: -3px; padding: 3px 10px;" ui-sref="consultas_edit({ id: ctrl.consulta.id })" class="btn btn-success btn-sm" type="button"><strong>Ver consulta completa</strong> <span class="fa fa-fw fa-arrow-right"></span></button></span></div><div class="panel-body"><div class="row"><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.consulta.paciente.persona.persona || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.consulta.paciente.persona.cui || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Movil:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.consulta.paciente.persona.celular || "---" }}</span></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-12"><div class="area-info"><div class="mb2"><strong>Motivo de la consulta:</strong></div><div class="mb6 mt10 ml8"><span>{{ ctrl.consulta.motivo || "---" }}</span></div></div></div></div></div></div></div></div></div><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-disabled="!ctrl.consulta.id" ui-sref="reconsultas_create({ id: ctrl.consulta.id })"><span class="fa fa-fw fa-plus"></span> <strong>Nueva reconsulta</strong></button> <button class="btn btn-danger" ng-click="ctrl.createCita()" ng-disabled="!ctrl.consulta.id"><span class="fa fa-fw fa-clock-o"></span> <strong>Reservar cita</strong></button> <button class="btn btn-primary" ui-sref="archivos_consulta({ id: ctrl.consulta.id })" ng-disabled="!ctrl.consulta.id"><span class="mdi mdi-file-multiple"></span> <strong>Archivos adjuntos</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="background-color: #1D2531;" class="text-center text-default2" colspan="3"><span>Paciente</span></th><th style="background-color: #202C3A;" class="text-center text-default2" colspan="2"><span>Consulta</span></th></tr><tr><th style="min-width:144px;">Fecha</th><th style="min-width:220px;">Nombre</th><th>Móvil</th><th>Motivo</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.fecha_creacion | date: \'dd/MMM/yyyy\' }}</td><td>{{ item.consulta.paciente.persona.persona }}</td><td>{{ item.consulta.paciente.persona.celular || "---" }}</td><td>{{ item.motivo || "---" }}</td><td style="width:140px;"><div class="btn-group"><a href="/api/reconsultas/pdf_expediente/?id={{ item.id }}" target="_blank" class="btn btn-danger" title="Descargar reconsulta en PDF"><span class="fa fa-download"></span></a> <a href="/api/reconsultas/pdf_tratamiento/?id={{ item.id }}" target="_blank" class="btn btn-info" title="Imprimir tratamiento"><span class="fa fa-print"></span></a> <button class="btn btn-warning" title="Ver reconsulta" ui-sref="reconsultas_edit({ id: item.id })"><span class="fa fa-arrow-right"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/pacientes/templates/cobros.create.html",'<div class="m16"><div class="row"><div class="col-xs-12 text-center"><h2><strong>Registrar cobro</strong></h2></div><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.save()"><div class="form-group"><label>Monto:</label> <span class="text-danger field-required">*</span><div class="input-group"><span class="input-group-addon addon-left input-group-addon-success">Q</span> <input class="form-control with-success-addon" type="number" placeholder="0.00" autofocus="" step="1" min="0" ng-model="ctrl.cobro.monto"></div></div><div class="form-group"><label>Motivo:</label> <span class="text-danger field-required">*</span> <textarea class="form-control" placeholder="Motivo del cobro" name="motivo" ng-model="ctrl.cobro.motivo">\n                    </textarea></div><div class="text-center"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Guardar</strong></button></div></form></div></div></div>'),a.put("app/pages/pacientes/templates/cobros.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="CobrosPacienteController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><div class="panel popular-app animated zoomIn"><div class="popular-app-cost row"><div class="col-xs-6 col-md-2">Paciente:</div><div class="col-xs-6 col-md-4"><a ui-sref="pacientes_edit({ id: ctrl.paciente.id })" ng-if="ctrl.paciente.id"><strong class="text-info">{{ ctrl.paciente.persona.persona || "---" }}</strong></a> <strong ng-if="!ctrl.paciente.id">---</strong></div><div class="col-xs-6 col-md-4 text-right" ng-if="esAdmin || esSecretaria">Saldo actual:</div><div class="col-xs-6 col-md-2 text-right" ng-if="esAdmin || esSecretaria"><strong>{{ (ctrl.paciente.saldo || 0) | currency: "Q " : 2 }}</strong></div></div></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-money" ng-click="ctrl.registrarAbono()" ng-disabled="ctrl.loading" ng-if="esAdmin || esSecretaria"><span class="fa fa-fw fa-money"></span> <strong>Registrar abono</strong></button> <button class="btn btn-danger" ng-click="ctrl.registrarCobro()" ng-disabled="ctrl.loading"><span class="fa fa-fw fa-money"></span> <strong>Registrar cobro</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="panel panel-default mb12"><div class="panel-body"><div class="input-demo radio-demo row"><span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.filterby" ng-change="ctrl.search()" ng-value="ctrl.query.pendientes"> <span>Pendientes</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.filterby" ng-change="ctrl.search()" ng-value="ctrl.query.pagados"> <span>Pagados</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.filterby" ng-change="ctrl.search()" ng-value="ctrl.query.anulados"> <span>Anulados</span></label></span> <span style="margin-right: 16px;"><label class="radio-inline custom-radio nowrap"><input type="radio" ng-model="ctrl.query.filterby" ng-change="ctrl.search()" ng-value="ctrl.query.todas"> <span>Todos</span></label></span></div></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de abonos y cobros asociados al paciente</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th style="width:150px;">Fecha y hora</th><th>Colaborador</th><th style="min-width:220px;">Motivo</th><th style="width:120px;">Tipo</th><th class="text-left" style="width:120px;">Monto</th><th style="width:120px;">Estado</th><th class="text-right">Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.fecha_creacion | date: "dd/MMMM/yyyy HH:mm" }}</td><td>{{ item.colaborador.persona.persona || "---" }}</td><td>{{ item.motivo || "---" }}</td><td><strong class="text-danger" ng-if="item.tipo == 10">COBRO</strong> <strong class="text-success" ng-if="item.tipo == 20">ABONO</strong></td><td class="text-left"><strong>{{ item.monto | currency: "Q " : 2 }}</strong></td><td><strong class="text-success" ng-if="item.pagado">PAGADO</strong><strong class="text-warning" ng-if="!item.pagado && !item.anulado">PENDIENTE DE PAGO</strong> <strong class="text-danger" ng-if="item.anulado">ANULADO</strong></td><td class="text-right" style="width:140px; text-align: right !important;"><div class="btn-group"><button class="btn btn-money" ng-click="ctrl.realizarCobro(item)" title="Realizar cobro" ng-if="(esAdmin || esSecretaria) && (item.tipo == 10)" ng-disabled="item.anulado || item.pagado || !user.id"><span class="fa fa-money"></span></button> <button class="btn btn-danger" ng-click="ctrl.anularCobro(item)" title="Anular" ng-disabled="item.anulado || item.pagado"><span class="fa fa-ban"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/pacientes/templates/form.html",'<div class="row mh0 form-group"><div class="col-xs-12"><label>Foto:</label><div class="text-center img-container"><div ng-if="!ctrl.paciente.persona.foto"><span class="fa fa-user-circle-o fa-5x" style="font-size: 100px;"></span></div><a href="" ng-if="ctrl.paciente.persona.foto" ng-click="ctrl.viewImg()"><img style="height: 150px; border-radius: 4%;" ngf-src="ctrl.paciente.persona.foto"></a></div><div class="text-center"><label class="btn btn-default" for="imageInput" style="cursor: pointer;" ng-show="!ctrl.disabled"><span class="fa fa-upload fa-fw"></span> <strong>Subir foto</strong></label> <input id="imageInput" style="opacity: 0; position: absolute; z-index: -1;" class="form-control" filestyle="" type="file" accept="image/*" data-class-button="btn btn-default" data-class-input="form-control" data-button-text="Subir imagen"></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Nombre completo:</label><span class="text-danger field-required">*</span> <input ng-disabled="ctrl.disabled" type="text" autofocus="" id="persona" name="persona" ng-model="ctrl.paciente.persona.persona" class="form-control" placeholder="Nombre completo" required=""> <span ng-show="ctrl.form.persona.$dirty && ctrl.form.persona.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Apellido de casada:</label> <input ng-disabled="ctrl.disabled" type="text" name="apellido_casada" ng-model="ctrl.paciente.persona.apellido_casada" class="form-control" placeholder="Apellido de casada"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>No. de DPI (CUI):</label> <input ng-disabled="ctrl.disabled" type="text" name="cui" ng-model="ctrl.paciente.persona.cui" class="form-control" ui-mask="9999-99999-9999"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Teléfono:</label> <input ng-disabled="ctrl.disabled" type="text" name="telefono" ng-model="ctrl.paciente.persona.telefono" class="form-control" ui-mask="9999-9999"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Móvil:</label> <input ng-disabled="ctrl.disabled" type="text" name="celular" ng-model="ctrl.paciente.persona.celular" class="form-control" ui-mask="9999-9999"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Correo electrónico:</label> <input ng-disabled="ctrl.disabled" type="email" name="email" ng-model="ctrl.paciente.persona.correo" class="form-control" placeholder="mail@ejemplo.com"> <span class="text-danger" ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.email">Debes ingresar un email válido</span></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Nacionalidad:</label> <input ng-disabled="ctrl.disabled" type="text" name="nacionalidad" ng-model="ctrl.paciente.persona.nacionalidad" class="form-control" placeholder="Nacionalidad"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Departamento:</label> <input ng-disabled="ctrl.disabled" type="text" name="departamento" ng-model="ctrl.paciente.persona.departamento" class="form-control" placeholder="Escribe el departamento" uib-typeahead="departamentos as departamentos.name for departamentos in ctrl.getDepartamentos($viewValue, item) | limitTo : 10" typeahead-min-length="1" typeahead-no-results="noResults"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Dirección:</label> <input ng-disabled="ctrl.disabled" type="text" name="direccion" ng-model="ctrl.paciente.persona.direccion" class="form-control" placeholder="Dirección"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Lugar de nacimiento:</label> <input ng-disabled="ctrl.disabled" type="text" name="lugar_nacimiento" ng-model="ctrl.paciente.lugar_nacimiento" class="form-control" placeholder="Lugar de nacimiento"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Fecha de nacimiento:</label><div class="row"><div class="col-xs-3"><select ng-disabled="ctrl.disabled" class="form-control" name="dias" ng-model="ctrl.nacimiento.dias" ng-options="option.value for option in ctrl.dias track by option.id"></select></div><div class="col-xs-5"><select ng-disabled="ctrl.disabled" class="form-control" name="meses" ng-model="ctrl.nacimiento.meses" ng-options="option.value for option in ctrl.meses track by option.id"></select></div><div class="col-xs-4"><select ng-disabled="ctrl.disabled" class="form-control" name="anios" ng-model="ctrl.nacimiento.anios" ng-options="option.value for option in ctrl.anios track by option.id"></select></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Género:</label><div class="input-demo radio-demo row"><div class="col-md-6"><label class="radio-inline custom-radio nowrap"><input ng-disabled="ctrl.disabled" type="radio" ng-model="ctrl.paciente.genero" ng-value="\'Femenino\'"> <span>Femenino</span></label></div><div class="col-md-6"><label class="radio-inline custom-radio nowrap"><input ng-disabled="ctrl.disabled" type="radio" ng-model="ctrl.paciente.genero" ng-value="\'Masculino\'"> <span>Masculino</span></label></div></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Nombres y edades de los padres:</label> <textarea ng-disabled="ctrl.disabled" rows="3" type="text" name="nombres_padres" ng-model="ctrl.paciente.nombres_padres" class="form-control" placeholder="Nombres y edades de los padres"></textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Ocupación de los padres:</label> <textarea ng-disabled="ctrl.disabled" rows="3" type="text" name="ocupacion_padres" ng-model="ctrl.paciente.ocupacion_padres" class="form-control" placeholder="Ocupación de los padres"></textarea></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Información relevante de los padres:</label> <textarea ng-disabled="ctrl.disabled" rows="3" type="text" name="info_padres" ng-model="ctrl.paciente.info_padres" class="form-control" placeholder="Salud, estado civil, residencia, etc."></textarea></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Número de hermanos:</label> <input ng-disabled="ctrl.disabled" type="number" min="0" step="1" name="num_hermanos" ng-model="ctrl.paciente.num_hermanos" class="form-control" placeholder="0"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Religión:</label> <input ng-disabled="ctrl.disabled" type="text" name="religion" ng-model="ctrl.paciente.religion" class="form-control" placeholder="Escribe la religión" uib-typeahead="religiones as religiones for religiones in ctrl.getReligiones($viewValue, item) | limitTo : 10" typeahead-min-length="1" typeahead-no-results="noResults"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Tipo de sangre:</label><select ng-disabled="ctrl.disabled" class="form-control" name="tipo_de_sangre" ng-model="ctrl.paciente.tipo_de_sangre" ng-options="option.value for option in ctrl.tiposDeSangre track by option.value"></select></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Nivel académico:</label><select ng-disabled="ctrl.disabled" class="form-control" name="nivel_academico" ng-model="ctrl.paciente.nivel_academico" ng-options="option.value for option in ctrl.grados track by option.value"></select></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Ocupación:</label> <input ng-disabled="ctrl.disabled" type="text" name="ocupacion" ng-model="ctrl.paciente.ocupacion" class="form-control" placeholder="Ocupación"></div><div class="col-xs-12 col-sm-12 col-md-4"><label>Contacto de referencia:</label> <input ng-disabled="ctrl.disabled" type="text" name="contacto_referencia" ng-model="ctrl.paciente.contacto_referencia" class="form-control" placeholder="Contacto de referencia"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-4"><label>Teléfono de referencia:</label> <input ng-disabled="ctrl.disabled" type="text" name="telefono_referencia" ng-model="ctrl.paciente.telefono_referencia" class="form-control" placeholder="Teléfono de referencia"></div></div>'),a.put("app/pages/pacientes/templates/pacientes.create.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="PacientesCreateController as ctrl"><div class="row"><div class="col-xs-12"><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Información personal</strong></div><div class="panel-body"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="pacientes()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-user-plus"></span> <strong>Agregar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/pacientes/templates/pacientes.dialog.html",'<div class="row" style="font-size: 14px;"><div class="col-xs-12 col-sm-12 col-md-4"><div><span>Foto:</span><div class="text-center img-container img-dialog"><div ng-if="!ctrl.paciente.persona.foto"><span class="fa fa-user-circle-o fa-5x" style="font-size: 120px;"></span></div><a href="" ng-if="ctrl.paciente.persona.foto" ng-click="ctrl.viewImg()"><img style="height: 100%; border-radius: 4%;" ngf-src="ctrl.paciente.persona.foto"></a></div></div><div class="area-info"><div class="mb2"><strong>Nombre completo:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.persona || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Apellido de casada:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.apellido_casada || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Teléfono:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.telefono || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Móvil:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.celular || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Nombres y edades de los padres:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.nombres_padres || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Correo electrónico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.correo || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>CUI:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.cui || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Nacionalidad:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.nacionalidad || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Departamento:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.departamento || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Dirección:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.persona.direccion || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Fecha de nacimiento:</strong></div><div class="mb2 ml8"><span ng-if="ctrl.paciente.fecha_nacimiento">{{ ctrl.paciente.fecha_nacimiento | date: \'dd/MMMM/yyyy\' }}</span> <span ng-if="!ctrl.paciente.fecha_nacimiento">---</span></div></div><div class="area-info"><div class="mb2"><strong>Género:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.genero || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Ocupación de los padres:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.ocupacion_padres || "---" }}</span></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="area-info"><div class="mb2"><strong>Tipo de sangre:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.tipo_de_sangre || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Religión:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.religion || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Número de hermanos:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.num_hermanos || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Nivel académico:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.nivel_academico || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Ocupación:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.ocupacion || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Contacto de referencia:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.contacto_referencia || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Teléfono de referencia:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.telefono_referencia || "---" }}</span></div></div><div class="area-info"><div class="mb2"><strong>Información relevante de los padres:</strong></div><div class="mb2 ml8"><span>{{ ctrl.paciente.info_padres || "---" }}</span></div></div></div></div><div class="row"><div class="col-xs-12 text-center" style="margin-top: 16px;"><button class="btn btn-success" ng-click="ctrl.create()"><span class="fa fa-fw fa-clock-o"></span> <strong>Reservar cita</strong></button></div></div>'),
a.put("app/pages/pacientes/templates/pacientes.edit.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="PacientesEditController as ctrl"><div class="row"><div class="col-xs-12"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Información personal</strong></div><div class="panel-body"><div class="row"><div ng-include="\'app/pages/pacientes/templates/form.html\'"></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="pacientes()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-pencil"></span> <strong>Editar</strong></button></div></div></form></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/pacientes/templates/pacientes.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="PacientesController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ui-sref="pacientes_create()"><span class="fa fa-fw fa-user-plus"></span> <strong>Agregar paciente</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de pacientes</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Nombre</th><th>CUI</th><th>Teléfono</th><th>Móvil</th><th>Fecha de nacimiento</th><th>Edad</th><th style="width: 290px;">Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.persona.persona }}</td><td>{{ item.persona.cui || "---" }}</td><td>{{ item.persona.telefono || "---" }}</td><td>{{ item.persona.celular || "---" }}</td><td><span ng-if="item.fecha_nacimiento">{{ item.fecha_nacimiento | date: \'dd/MMMM/yyyy\' }}</span> <span ng-if="!item.fecha_nacimiento">---</span></td><td><span ng-if="item.edad">{{ item.edad }} años</span> <span ng-if="!item.edad">---</span></td><td><div class="btn-group"><button class="btn btn-money" title="Cobro" ui-sref="cobros_paciente({ id: item.id })"><span class="fa fa-money"></span></button> <button class="btn btn-info" title="Nueva consulta" ng-if="ctrl.esMedico" ui-sref="consultas_create({ id: item.id })"><span class="fa fa-user-md"></span></button> <button class="btn btn-info" title="Nuevo caso" ng-if="ctrl.esPsicologo" ui-sref="casos_create({ id: item.id })"><span class="fa fa-file-text"></span></button> <button class="btn btn-success" title="Reservar cita" ng-click="ctrl.create(item)"><span class="fa fa-clock-o"></span></button> <button class="btn btn-primary" title="Ver detalles" ng-click="ctrl.details(item)"><span class="fa fa-bars"></span></button> <button class="btn btn-warning" title="Editar" ui-sref="pacientes_edit({ id: item.id })"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger" title="Eliminar" ng-click="ctrl.delete(item)"><span class="fa fa-trash"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/profesiones/templates/profesiones.dialog.html",'<div class="m16"><div class="row"><div class="col-xs-12"><form autocomplete="off" name="ctrl.form" novalidate="" ng-submit="ctrl.save()"><div class="form-group"><label>Profesión:</label> <span class="text-danger field-required">*</span> <input class="form-control" placeholder="Nombre de la profesión" autofocus="" type="text" name="profesion" required="" ng-model="ctrl.profesion.profesion"> <span ng-show="ctrl.form.profesion.$dirty && ctrl.form.profesion.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="text-center"><button class="btn btn-danger" type="button" ng-click="closeThisDialog()"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit" ng-click="ctrl.save()"><span class="fa fa-fw fa-check"></span> <strong>Guardar</strong></button></div></form></div></div></div>'),a.put("app/pages/profesiones/templates/profesiones.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="ProfesionController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ng-click="ctrl.create()"><span class="fa fa-fw fa-plus"></span> <strong>Nueva profesión</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de profesiones</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>ID</th><th>Profesión</th><th>Fecha de creación</th><th>Fecha de modificación</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.id }}</td><td>{{ item.profesion }}</td><td>{{ item.fecha_creacion | date: \'dd/MMMM/yyyy\' }}</td><td>{{ item.fecha_modificacion | date: \'dd/MMMM/yyyy\' }}</td><td><div class="btn-group"><button class="btn btn-warning" title="Editar" ng-click="ctrl.update(item)"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger" title="Eliminar" ng-click="ctrl.delete(item)"><span class="fa fa-trash"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/users/templates/form.html",'<div class="row mh0 form-group"><div class="col-xs-12"><label>Foto de perfil:</label><div class="text-center img-container"><div ng-if="!ctrl.perfil.persona.foto"><span class="fa fa-user-circle-o fa-5x" style="font-size: 100px;"></span></div><a href="" ng-if="ctrl.perfil.persona.foto" ng-click="ctrl.viewImg()"><img style="height: 150px; border-radius: 4%;" ngf-src="ctrl.perfil.persona.foto"></a></div><div class="text-center"><label class="btn btn-default" for="imageInput" style="cursor: pointer;"><span class="fa fa-upload fa-fw"></span> <strong>Subir foto</strong></label> <input id="imageInput" style="opacity: 0; position: absolute; z-index: -1;" class="form-control" filestyle="" type="file" accept="image/*" data-class-button="btn btn-default" data-class-input="form-control" data-button-text="Subir imagen"></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Nombre completo:</label><span class="text-danger field-required">*</span> <input type="text" autofocus="" name="persona" ng-model="ctrl.perfil.persona.persona" class="form-control" placeholder="Nombre completo" required=""> <span ng-show="ctrl.form.persona.$dirty && ctrl.form.persona.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Teléfono:</label> <input type="text" name="telefono" ng-model="ctrl.perfil.persona.telefono" class="form-control" ui-mask="9999-9999"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Móvil:</label> <input type="text" name="celular" ng-model="ctrl.perfil.persona.celular" class="form-control" ui-mask="9999-9999"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Nacionalidad:</label> <input type="text" name="nacionalidad" ng-model="ctrl.perfil.persona.nacionalidad" class="form-control" placeholder="Nacionalidad"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Departamento:</label> <input type="text" name="departamento" ng-model="ctrl.departamento" class="form-control" placeholder="Escribe el departamento" uib-typeahead="departamentos as departamentos.name for departamentos in ctrl.getDepartamentos($viewValue, item) | limitTo : 10" typeahead-min-length="1" typeahead-no-results="noResults" value="{{ item.pasajero.id }}"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Dirección:</label> <input type="text" name="direccion" ng-model="ctrl.perfil.persona.direccion" class="form-control" placeholder="Dirección"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Acceso:</label><span class="text-danger field-required">*</span><ui-select name="roles" multiple="" ng-model="ctrl.perfil.roles" search-enabled="true" append-to-body="true" class="form-control" required=""><ui-select-match placeholder="Nivel de acceso">{{ $item.name }}</ui-select-match><ui-select-choices repeat="item in ctrl.roles | filter: $select.search">{{ item.name }}</ui-select-choices></ui-select><span ng-show="ctrl.form.roles.$dirty && ctrl.form.roles.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Profesión:</label> <input type="text" name="profesion" ng-model="ctrl.perfil.profesion" class="form-control" placeholder="Seleccione la profesión" uib-typeahead="profesiones as profesiones.profesion for profesiones in ctrl.getProfesiones($viewValue, item)" typeahead-min-length="1" typeahead-no-results="noResults" value="{{ item.pasajero.id }}"></div></div><div class="mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>No. Colegiado:</label> <input type="number" min="0" name="celular" ng-model="ctrl.perfil.colegiado" class="form-control" placeholder="No. Colegiado"></div></div>'),a.put("app/pages/users/templates/form.profile.html",'<div class="row mh0 form-group"><div class="col-xs-12"><label>Foto de perfil:</label><div class="text-center img-container"><div ng-if="!ctrl.perfil.persona.foto"><span class="fa fa-user-circle-o fa-5x" style="font-size: 100px;"></span></div><a href="" ng-if="ctrl.perfil.persona.foto" ng-click="ctrl.viewImg()"><img style="height: 150px; border-radius: 4%;" ngf-src="ctrl.perfil.persona.foto"></a></div><div class="text-center"><label class="btn btn-default" for="imageInput" style="cursor: pointer;"><span class="fa fa-upload fa-fw"></span> <strong>Subir foto</strong></label> <input id="imageInput" style="opacity: 0; position: absolute; z-index: -1;" class="form-control" filestyle="" type="file" accept="image/*" data-class-button="btn btn-default" data-class-input="form-control" data-button-text="Subir imagen"></div></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Nombre completo:</label><span class="text-danger field-required">*</span> <input type="text" autofocus="" name="persona" ng-model="ctrl.perfil.persona.persona" class="form-control" placeholder="Nombre completo" required=""> <span ng-show="ctrl.form.persona.$dirty && ctrl.form.persona.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Teléfono:</label> <input type="text" name="telefono" ng-model="ctrl.perfil.persona.telefono" class="form-control" ui-mask="9999-9999"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Móvil:</label> <input type="text" name="celular" ng-model="ctrl.perfil.persona.celular" class="form-control" ui-mask="9999-9999"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Nacionalidad:</label> <input type="text" name="nacionalidad" ng-model="ctrl.perfil.persona.nacionalidad" class="form-control" placeholder="Nacionalidad"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Departamento:</label> <input type="text" name="departamento" ng-model="ctrl.departamento" class="form-control" placeholder="Escribe el departamento" uib-typeahead="departamentos as departamentos.name for departamentos in ctrl.getDepartamentos($viewValue, item) | limitTo : 10" typeahead-min-length="1" typeahead-no-results="noResults" value="{{ item.pasajero.id }}"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Dirección:</label> <input type="text" name="direccion" ng-model="ctrl.perfil.persona.direccion" class="form-control" placeholder="Dirección"></div></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>No. Colegiado:</label> <input type="number" name="celular" min="0" ng-model="ctrl.perfil.colegiado" class="form-control" placeholder="No. Colegiado"></div><div class="col-xs-12 col-sm-12 col-md-6"><label>Correo electrónico:</label> <span class="text-danger field-required">*</span> <input type="email" name="email" ng-model="ctrl.perfil.persona.correo" class="form-control" placeholder="mail@ejemplo.com" required=""> <span class="text-danger" ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.email">Debes ingresar un email válido</span> <span ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.required" class="text-danger">Este campo es requerido.</span></div></div>'),a.put("app/pages/users/templates/img.dialog.html",'<div class="row" style="margin: 16px 0;"><div class="col-xs-12"><div class="text-center img-container"><img style="max-height: 750px; max-width: 100%;" ngf-src="actual_user_foto"></div></div></div>'),a.put("app/pages/users/templates/users.create.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="UserCreateController as ctrl"><div class="row"><div class="col-xs-12"><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn"><div class="panel-body"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8"><div class="panel panel-primary" style="margin-bottom:16px;"><div class="panel-heading"><strong>Información personal</strong></div><div class="panel-body"><div class="row"><div ng-include="\'app/pages/users/templates/form.html\'"></div></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class="panel panel-primary m0"><div class="panel-heading"><strong>Credenciales</strong></div><div class="panel-body"><div class="row"><div class="col-xs-12 form-group mh0"><label>Correo electrónico:</label> <span class="text-danger field-required">*</span> <input type="email" name="email" ng-model="ctrl.perfil.persona.correo" class="form-control" placeholder="mail@ejemplo.com" required=""> <span class="text-danger" ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.email">Debes ingresar un email válido</span> <span ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.required" class="text-danger">Este campo es requerido.</span></div><div class="col-xs-12 form-group mh0"><label>Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password" ng-model="ctrl.perfil.password" class="form-control" placeholder="Contraseña" required="" ng-pattern="/^[a-zA-Z0-9]{8,32}$/" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form.password.$dirty && ctrl.form.password.$error.required" class="text-danger">Este campo es requerido.</span> <span ng-show="ctrl.form.password.$error.pattern" class="text-danger">La contraseña debe contener entre 8 a 32 caracteres.</span></div><div class="col-xs-12 form-group mh0"><label>Repetir Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password_confirm" ng-model="ctrl.perfil.password_confirm" class="form-control" placeholder="Repetir contraseña" required="" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form.password_confirm.$dirty && ctrl.form.password_confirm.$error.required" class="text-danger">Este campo es requerido.</span> <span class="text-danger" ng-show="!ctrl.password_confirm && ctrl.perfil.password_confirm">Las contraseñas no coinciden.</span></div></div></div></div></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="users()" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-user-plus"></span> <strong>Agregar</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/users/templates/users.edit.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="UserEditController as ctrl"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn" style="margin-bottom:16px;"><div class="panel-heading"><strong>Información personal</strong></div><div class="panel-body"><div class="row"><div ng-include="\'app/pages/users/templates/form.html\'"></div><div class="row mh0 form-group"><div class="col-xs-12 col-sm-12 col-md-6"><label>Correo electrónico:</label> <span class="text-danger field-required">*</span> <input type="email" name="email" ng-model="ctrl.perfil.persona.correo" class="form-control" placeholder="mail@ejemplo.com" required=""> <span class="text-danger" ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.email">Debes ingresar un email válido</span> <span ng-show="ctrl.form.email.$dirty && ctrl.form.email.$error.required" class="text-danger">Este campo es requerido.</span></div></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="users" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Guardar</strong></button></div></div></form></div></div><div class="col-xs-12 col-sm-12 col-md-4"><form name="ctrl.form_password" ng-submit="ctrl.restore_password()" novalidate=""><div class="panel panel-primary animated zoomIn m0"><div class="panel-heading"><strong>Restablecer contraseña</strong></div><div class="panel-body"><div class="row"><div class="col-xs-12 form-group mh0"><label>Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password" ng-model="ctrl.perfil.password" class="form-control" placeholder="Contraseña" required="" ng-pattern="/^[a-zA-Z0-9]{8,32}$/" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form_password.password.$dirty && ctrl.form_password.password.$error.required" class="text-danger">Este campo es requerido.</span> <span ng-show="ctrl.form_password.password.$error.pattern" class="text-danger">La contraseña debe contener entre 8 a 32 caracteres.</span></div><div class="col-xs-12 form-group mh0"><label>Repetir Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password_confirm" ng-model="ctrl.perfil.password_confirm" class="form-control" placeholder="Repetir contraseña" required="" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form_password.password_confirm.$dirty && ctrl.form_password.password_confirm.$error.required" class="text-danger">Este campo es requerido.</span> <span class="text-danger" ng-show="!ctrl.password_confirm && ctrl.perfil.password_confirm">Las contraseñas no coinciden.</span></div></div></div><div class="panel-footer text-center"><button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Restablecer</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/users/templates/users.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="UserController as ctrl"><div class="row"><div class="col-xs-12 col-sm-6 col-md-8 col-lg-8" style="padding-bottom: 17px"><button class="btn btn-success" ui-sref="users_create()"><span class="fa fa-fw fa-user-plus"></span> <strong>Agregar colaborador</strong></button></div><div class="col-xs-12 col-sm-6 col-md-4 col-lg-4"><form autocomplete="off" ng-submit="ctrl.search()"><div class="form-group"><div class="input-group"><input type="text" name="find" class="form-control ng-pristine ng-valid ng-touched" placeholder="Buscar" ng-model="ctrl.pagination.search" ng-change="ctrl.search()"> <span class="input-group-btn"><button class="btn btn-default" type="submit"><span class="fa fa-fw fa-search"></span> <strong>Buscar</strong></button></span></div></div></form></div></div><div class="row"><div class="col-xs-12"><div class="mb16 rel"><mi-loader ng-show="ctrl.loading"></mi-loader><div class="panel panel-primary animated zoomIn"><div class="panel-heading"><strong>Listado de colaboradores</strong></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Nombre</th><th>Correo electrónico</th><th>Teléfono</th><th>Móvil</th><th>Profesión</th><th>Acceso</th><th>Acciones</th></tr></thead><tbody><tr ng-repeat="item in ctrl.array"><td>{{ item.persona.persona }}</td><td>{{ item.persona.correo }}</td><td>{{ item.persona.telefono || "---" }}</td><td>{{ item.persona.celular || "---" }}</td><td>{{ item.profesion.profesion || "---" }}</td><td>{{ item.roles }}</td><td><div class="btn-group"><button class="btn btn-warning" title="Editar" ui-sref="users_edit({ id: item.id })"><span class="fa fa-pencil"></span></button> <button class="btn btn-danger" title="Eliminar" ng-click="ctrl.delete(item)"><span class="fa fa-trash"></span></button></div></td></tr></tbody></table></div></div><div class="custom-pagination pagination-sm" uib-pagination="" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Último" total-items="ctrl.pagination.total_items" ng-model="ctrl.pagination.current_page" max-size="ctrl.pagination.max_size" boundary-links="true" rotate="false" ng-change="ctrl.page_changed()"></div></div></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/pages/users/templates/users.profile.html",'<div><ba-sidebar></ba-sidebar><page-top></page-top><div class="al-main"><div class="al-content"><content-top></content-top><div ng-controller="UserEditController as ctrl"><div class="row"><div class="col-xs-12 col-sm-12 col-md-8"><div class="rel"><mi-loader ng-show="ctrl.loading"></mi-loader><form name="ctrl.form" autocomplete="off" ng-submit="ctrl.save()" novalidate=""><div class="panel panel-primary animated zoomIn" style="margin-bottom:16px;"><div class="panel-heading"><strong>Información personal</strong></div><div class="panel-body"><div class="row"><div ng-include="\'app/pages/users/templates/form.profile.html\'"></div></div></div><div class="panel-footer text-center"><button class="btn btn-danger" ui-sref="citas" type="button"><span class="fa fa-fw fa-times-circle"></span> <strong>Cancelar</strong></button> <button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Guardar</strong></button></div></div></form></div></div><div class="col-xs-12 col-sm-12 col-md-4"><form name="ctrl.form_password" ng-submit="ctrl.restore_password()" novalidate=""><div class="panel panel-primary animated zoomIn m0"><div class="panel-heading"><strong>Restablecer contraseña</strong></div><div class="panel-body"><div class="row"><div class="col-xs-12 form-group mh0"><label>Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password" ng-model="ctrl.perfil.password" class="form-control" placeholder="Contraseña" required="" ng-pattern="/^[a-zA-Z0-9]{8,32}$/" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form_password.password.$dirty && ctrl.form_password.password.$error.required" class="text-danger">Este campo es requerido.</span> <span ng-show="ctrl.form_password.password.$error.pattern" class="text-danger">La contraseña debe contener entre 8 a 32 caracteres.</span></div><div class="col-xs-12 form-group mh0"><label>Repetir Contraseña:</label> <span class="text-danger field-required">*</span> <input type="password" name="password_confirm" ng-model="ctrl.perfil.password_confirm" class="form-control" placeholder="Repetir contraseña" required="" ng-change="ctrl.validate_password()"> <span ng-show="ctrl.form_password.password_confirm.$dirty && ctrl.form_password.password_confirm.$error.required" class="text-danger">Este campo es requerido.</span> <span class="text-danger" ng-show="!ctrl.password_confirm && ctrl.perfil.password_confirm">Las contraseñas no coinciden.</span></div></div></div><div class="panel-footer text-center"><button class="btn btn-success" type="submit"><span class="fa fa-fw fa-check"></span> <strong>Restablecer</strong></button></div></div></form></div></div></div></div></div><footer class="al-footer clearfix"><div class="al-footer-main clearfix"><div class="al-copy"><span style="font-size:14px;">La Fundación Talita Kum</span></div><ul class="al-share clearfix"></ul></div></footer></div>'),a.put("app/theme/components/baSidebar/ba-sidebar.html",'<aside class="al-sidebar" ng-swipe-right="$baSidebarService.setMenuCollapsed(false)" ng-swipe-left="$baSidebarService.setMenuCollapsed(true)" ng-mouseleave="hoverElemTop=selectElemTop"><ul class="al-sidebar-list" slimscroll="{height: \'{{menuHeight}}px\'}" slimscroll-watch="menuHeight"><li ng-repeat="item in menuItems" class="al-sidebar-list-item" ng-class="::{\'with-sub-menu\': item.subMenu}" ui-sref-active="selected" ba-sidebar-toggling-item="item"><a ng-mouseenter="hoverItem($event, item)" ui-state="item.stateRef || \'\'" ng-href="{{::(item.fixedHref ? item.fixedHref: \'\')}}" ng-if="::!item.subMenu" class="al-sidebar-list-link"><i class="{{ ::item.icon }}"></i><span>{{ ::item.title }}</span></a> <a ng-mouseenter="hoverItem($event, item)" ng-if="::item.subMenu" class="al-sidebar-list-link" ba-ui-sref-toggler=""><i class="{{ ::item.icon }}"></i><span>{{ ::item.title }}</span> <b class="fa fa-angle-down" ui-sref-active="fa-angle-up" ng-if="::item.subMenu"></b></a><ul ng-if="::item.subMenu" class="al-sidebar-sublist" ng-class="{\'slide-right\': item.slideRight}" ba-ui-sref-toggling-submenu=""><li ng-repeat="subitem in ::item.subMenu" ng-class="::{\'with-sub-menu\': subitem.subMenu}" ui-sref-active="selected" ba-sidebar-toggling-item="subitem" class="ba-sidebar-sublist-item"><a ng-mouseenter="hoverItem($event, item)" ng-if="::subitem.subMenu" ba-ui-sref-toggler="" class="al-sidebar-list-link subitem-submenu-link"><span>{{ ::subitem.title }}</span> <b class="fa" ng-class="{\'fa-angle-up\': subitem.expanded, \'fa-angle-down\': !subitem.expanded}" ng-if="::subitem.subMenu"></b></a><ul ng-if="::subitem.subMenu" class="al-sidebar-sublist subitem-submenu-list" ng-class="{expanded: subitem.expanded, \'slide-right\': subitem.slideRight}" ba-ui-sref-toggling-submenu=""><li ng-mouseenter="hoverItem($event, item)" ng-repeat="subSubitem in ::subitem.subMenu" ui-sref-active="selected"><a ng-mouseenter="hoverItem($event, item)" href="" ng-if="::subSubitem.disabled" class="al-sidebar-list-link">{{ ::subSubitem.title }}</a> <a ng-mouseenter="hoverItem($event, item)" ui-state="subSubitem.stateRef || \'\'" ng-if="::!subSubitem.disabled" ng-href="{{::(subSubitem.fixedHref ? subSubitem.fixedHref: \'\')}}">{{::subSubitem.title }}</a></li></ul><a ng-mouseenter="hoverItem($event, item)" href="" ng-if="::(!subitem.subMenu && subitem.disabled)" class="al-sidebar-list-link">{{ ::subitem.title }}</a> <a ng-mouseenter="hoverItem($event, item)" target="{{::(subitem.blank ? \'_blank\' : \'_self\')}}" ng-if="::(!subitem.subMenu && !subitem.disabled)" ui-state="subitem.stateRef || \'\'" ng-href="{{::(subitem.fixedHref ? subitem.fixedHref: \'\')}}">{{ ::subitem.title}}</a></li></ul></li></ul><div class="sidebar-hover-elem" ng-style="{top: hoverElemTop + \'px\', height: hoverElemHeight + \'px\'}" ng-class="{\'show-hover-elem\': showHoverElem }"></div></aside>'),a.put("app/theme/components/baWizard/baWizard.html",'<div class="ba-wizard"><div class="ba-wizard-navigation-container"><div ng-repeat="t in $baWizardController.tabs" class="ba-wizard-navigation {{$baWizardController.tabNum == $index ? \'active\' : \'\'}}" ng-click="$baWizardController.selectTab($index)">{{t.title}}</div></div><div class="progress ba-wizard-progress"><div class="progress-bar progress-bar-danger active" role="progressbar" aria-valuemin="0" aria-valuemax="100" ng-style="{width: $baWizardController.progress + \'%\'}"></div></div><div class="steps" ng-transclude=""></div><nav><ul class="pager ba-wizard-pager"><li class="Anterior"><button ng-disabled="$baWizardController.isFirstTab()" ng-click="$baWizardController.previousTab()" type="button" class="btn btn-primary"><span aria-hidden="true">&larr;</span> previous</button></li><li class="Siguiente"><button ng-disabled="$baWizardController.isLastTab()" ng-click="$baWizardController.nextTab()" type="button" class="btn btn-primary">next <span aria-hidden="true">&rarr;</span></button></li></ul></nav></div>'),
a.put("app/theme/components/baWizard/baWizardStep.html",'<section ng-show="selected" class="step" ng-transclude=""></section>'),a.put("app/theme/components/backTop/backTop.html",'<i class="fa fa-angle-up back-top" id="backTop" title="Back to Top"></i>'),a.put("app/theme/components/contentTop/contentTop.html",'<div class="content-top clearfix"><h1 class="al-title">{{ activePageTitle }}</h1><ul class="breadcrumb al-breadcrumb"><li><a href="#/citas">Home</a></li><li>{{ activePageTitle }}</li></ul></div>'),a.put("app/theme/components/msgCenter/msgCenter.html",'<ul class="al-msg-center clearfix"><li uib-dropdown=""><a href="" uib-dropdown-toggle=""><i class="fa fa-bell-o"></i><span>5</span><div class="notification-ring"></div></a><div uib-dropdown-menu="" class="top-dropdown-menu"><i class="dropdown-arr"></i><div class="header clearfix"><strong>Notifications</strong> <a href="">Mark All as Read</a> <a href="">Settings</a></div><div class="msg-list"><a href="" class="clearfix" ng-repeat="msg in notifications"><div class="img-area"><img ng-class="{\'photo-msg-item\' : !msg.image}" ng-src="{{::( msg.image || (users[msg.userId].name | profilePicture) )}}"></div><div class="msg-area"><div ng-bind-html="getMessage(msg)"></div><span>{{ msg.time }}</span></div></a></div><a href="">See all notifications</a></div></li><li uib-dropdown=""><a href="" class="msg" uib-dropdown-toggle=""><i class="fa fa-envelope-o"></i><span>5</span><div class="notification-ring"></div></a><div uib-dropdown-menu="" class="top-dropdown-menu"><i class="dropdown-arr"></i><div class="header clearfix"><strong>Messages</strong> <a href="">Mark All as Read</a> <a href="">Settings</a></div><div class="msg-list"><a href="" class="clearfix" ng-repeat="msg in messages"><div class="img-area"><img class="photo-msg-item" ng-src="{{::( users[msg.userId].name | profilePicture )}}"></div><div class="msg-area"><div>{{ msg.text }}</div><span>{{ msg.time }}</span></div></a></div><a href="">See all messages</a></div></li></ul>'),a.put("app/theme/components/pageTop/pageTop.html",'<div class="page-top clearfix" scroll-position="scrolled" max-height="50" ng-class="{\'scrolled\': scrolled}"><a style="position:relative;" href="#/dashboard" class="al-logo clearfix"><img style="max-height: 54px; margin-top: 3px; padding: 0 24px;" src="assets/img/fundacion/logo_blanco_small.png"></a> <a href="" class="collapse-menu-link ion-navicon" ba-sidebar-toggle-menu=""></a><div class="user-profile clearfix"><div class="al-user-profile" uib-dropdown="" ng-controller="MeController as me"><a style="color:#F5F5F5;" uib-dropdown-toggle="" class="profile-toggle-link"><div class="rel"><strong class="user-profile-name text-default">{{ user.persona.name || "" }}</strong></div><img ng-if="user_img" ngf-src="user_img"> <span ng-if="!user_img" class="fa fa-user-circle-o fa-3x"></span></a><ul class="top-dropdown-menu profile-dropdown" uib-dropdown-menu=""><li><i class="dropdown-arr"></i></li><li ng-controller="LogoutController as ctrl"><a href="" ui-sref="users_profile({ id: user.id })" class="signout"><i class="fa fa-user"></i>Perfil</a> <a href="" ng-click="ctrl.logout()" class="signout"><i class="fa fa-sign-out"></i>Cerrar sesión</a></li></ul></div></div></div>'),a.put("app/theme/components/progressBarRound/progressBarRound.html",'<svg class="center-block progress-bar-round" width="200" height="200"><circle cx="100" cy="100" r="90" fill="none" stroke="#F8F8FF" stroke-width="8"></circle><circle cx="100" cy="100" r="90" fill="none" id="loader" class="" stroke="#209e91" stroke-width="8" stroke-dasharray="0,20000" transform="rotate(-90,100,100)" stroke-linecap="round"></circle><text text-anchor="middle" class="loading" x="100" y="90">Loading...</text><text class="percentage" text-anchor="middle" x="100" y="130">{{progress}}%</text></svg>'),a.put("app/theme/components/widgets/widgets.html",'<div class="widgets"><div ng-repeat="widgetBlock in ngModel" ng-class="{\'row\': widgetBlock.widgets.length > 1}"><div ng-repeat="widgetCol in widgetBlock.widgets" ng-class="{\'col-md-6\': widgetBlock.widgets.length === 2}" ng-model="widgetCol" class="widgets-block"><div ba-panel="" ba-panel-title="{{::widget.title}}" ng-repeat="widget in widgetCol" ba-panel-class="with-scroll {{widget.panelClass}}"><div ng-include="widget.url"></div></div></div></div></div>'),a.put("app/theme/inputs/baSwitcher/baSwitcher.html",'<label class="switcher-container"><input type="checkbox" ng-model="switcherValue"><div class="switcher" ng-class="::switcherStyle"><div class="handle-container"><span class="handle handle-on">ON</span> <span class="handle"></span> <span class="handle handle-off">OFF</span></div></div></label>')}]);
//# sourceMappingURL=../maps/scripts/app-548bf8a566.js.map
